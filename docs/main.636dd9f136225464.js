"use strict";(self.webpackChunkangular_task=self.webpackChunkangular_task||[]).push([[179],{58:(Gi,Pn,Be)=>{Be.d(Pn,{BH:()=>Rt,G6:()=>Ei,L:()=>Je,LL:()=>L,Pz:()=>pt,Sg:()=>fr,UG:()=>Z,ZB:()=>Ie,ZR:()=>Q,aH:()=>kt,b$:()=>gn,eu:()=>F,hl:()=>k,jU:()=>Gt,m9:()=>Lo,ne:()=>Wi,pd:()=>$a,r3:()=>tr,ru:()=>Vt,tV:()=>K,uI:()=>wn,vZ:()=>qi,w1:()=>Ii,xO:()=>ja,xb:()=>Rr,z$:()=>Ge,zd:()=>ai});const Ne=function(T){const D=[];let A=0;for(let G=0;G<T.length;G++){let M=T.charCodeAt(G);M<128?D[A++]=M:M<2048?(D[A++]=M>>6|192,D[A++]=63&M|128):55296==(64512&M)&&G+1<T.length&&56320==(64512&T.charCodeAt(G+1))?(M=65536+((1023&M)<<10)+(1023&T.charCodeAt(++G)),D[A++]=M>>18|240,D[A++]=M>>12&63|128,D[A++]=M>>6&63|128,D[A++]=63&M|128):(D[A++]=M>>12|224,D[A++]=M>>6&63|128,D[A++]=63&M|128)}return D},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(T,D){if(!Array.isArray(T))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let M=0;M<T.length;M+=3){const q=T[M],xe=M+1<T.length,qe=xe?T[M+1]:0,gt=M+2<T.length,Wt=gt?T[M+2]:0;let kn=(15&qe)<<2|Wt>>6,Dt=63&Wt;gt||(Dt=64,xe||(kn=64)),G.push(A[q>>2],A[(3&q)<<4|qe>>4],A[kn],A[Dt])}return G.join("")},encodeString(T,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(T):this.encodeByteArray(Ne(T),D)},decodeString(T,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(T):function(T){const D=[];let A=0,G=0;for(;A<T.length;){const M=T[A++];if(M<128)D[G++]=String.fromCharCode(M);else if(M>191&&M<224){const q=T[A++];D[G++]=String.fromCharCode((31&M)<<6|63&q)}else if(M>239&&M<365){const gt=((7&M)<<18|(63&T[A++])<<12|(63&T[A++])<<6|63&T[A++])-65536;D[G++]=String.fromCharCode(55296+(gt>>10)),D[G++]=String.fromCharCode(56320+(1023&gt))}else{const q=T[A++],xe=T[A++];D[G++]=String.fromCharCode((15&M)<<12|(63&q)<<6|63&xe)}}return D.join("")}(this.decodeStringToByteArray(T,D))},decodeStringToByteArray(T,D){this.init_();const A=D?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let M=0;M<T.length;){const q=A[T.charAt(M++)],qe=M<T.length?A[T.charAt(M)]:0;++M;const Wt=M<T.length?A[T.charAt(M)]:64;++M;const me=M<T.length?A[T.charAt(M)]:64;if(++M,null==q||null==qe||null==Wt||null==me)throw new Xt;G.push(q<<2|qe>>4),64!==Wt&&(G.push(qe<<4&240|Wt>>2),64!==me&&G.push(Wt<<6&192|me))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let T=0;T<this.ENCODED_VALS.length;T++)this.byteToCharMap_[T]=this.ENCODED_VALS.charAt(T),this.charToByteMap_[this.byteToCharMap_[T]]=T,this.byteToCharMapWebSafe_[T]=this.ENCODED_VALS_WEBSAFE.charAt(T),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[T]]=T,T>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(T)]=T,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(T)]=T)}}};class Xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(T){return function(T){const D=Ne(T);return zt.encodeByteArray(D,!0)}(T).replace(/\./g,"")},K=function(T){try{return zt.decodeString(T,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Ie(T,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===T&&(T={});break;case Array:T=[];break;default:return D}for(const A in D)!D.hasOwnProperty(A)||!Qe(A)||(T[A]=Ie(T[A],D[A]));return T}function Qe(T){return"__proto__"!==T}const ze=()=>{try{return function dt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const T=process.env.__FIREBASE_DEFAULTS__;return T?JSON.parse(T):void 0})()||(()=>{if(typeof document>"u")return;let T;try{T=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=T&&K(T[1]);return D&&JSON.parse(D)})()}catch(T){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${T}`)}},kt=()=>{var T;return null===(T=ze())||void 0===T?void 0:T.config},pt=T=>{var D;return null===(D=ze())||void 0===D?void 0:D[`_${T}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,A)=>{this.resolve=D,this.reject=A})}wrapCallback(D){return(A,G)=>{A?this.reject(A):this.resolve(G),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(A):D(A,G))}}}function fr(T,D){if(T.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=D||"demo-project",M=T.iat||0,q=T.sub||T.user_id;if(!q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:M,exp:M+3600,auth_time:M,sub:q,user_id:q,firebase:{sign_in_provider:"custom",identities:{}}},T);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(xe)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Z(){var T;const D=null===(T=ze())||void 0===T?void 0:T.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Gt(){return"object"==typeof self&&self.self===self}function Vt(){const T="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof T&&void 0!==T.id}function gn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ii(){const T=Ge();return T.indexOf("MSIE ")>=0||T.indexOf("Trident/")>=0}function Ei(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((T,D)=>{try{let A=!0;const G="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(G);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(G),T(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var q;D((null===(q=M.error)||void 0===q?void 0:q.message)||"")}}catch(A){D(A)}})}class Q extends Error{constructor(D,A,G){super(A),this.code=D,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(D,A,G){this.service=D,this.serviceName=A,this.errors=G}create(D,...A){const G=A[0]||{},M=`${this.service}/${D}`,q=this.errors[D],xe=q?function he(T,D){return T.replace(rt,(A,G)=>{const M=D[G];return null!=M?String(M):`<${G}?>`})}(q,G):"Error";return new Q(M,`${this.serviceName}: ${xe} (${M}).`,G)}}const rt=/\{\$([^}]+)}/g;function tr(T,D){return Object.prototype.hasOwnProperty.call(T,D)}function Rr(T){for(const D in T)if(Object.prototype.hasOwnProperty.call(T,D))return!1;return!0}function qi(T,D){if(T===D)return!0;const A=Object.keys(T),G=Object.keys(D);for(const M of A){if(!G.includes(M))return!1;const q=T[M],xe=D[M];if(mn(q)&&mn(xe)){if(!qi(q,xe))return!1}else if(q!==xe)return!1}for(const M of G)if(!A.includes(M))return!1;return!0}function mn(T){return null!==T&&"object"==typeof T}function ja(T){const D=[];for(const[A,G]of Object.entries(T))Array.isArray(G)?G.forEach(M=>{D.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):D.push(encodeURIComponent(A)+"="+encodeURIComponent(G));return D.length?"&"+D.join("&"):""}function ai(T){const D={};return T.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[M,q]=G.split("=");D[decodeURIComponent(M)]=decodeURIComponent(q)}}),D}function $a(T){const D=T.indexOf("?");if(!D)return"";const A=T.indexOf("#",D);return T.substring(D,A>0?A:void 0)}function Wi(T,D){const A=new ls(T,D);return A.subscribe.bind(A)}class ls{constructor(D,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{D(this)}).catch(G=>{this.error(G)})}next(D){this.forEachObserver(A=>{A.next(D)})}error(D){this.forEachObserver(A=>{A.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,A,G){let M;if(void 0===D&&void 0===A&&void 0===G)throw new Error("Missing Observer.");M=function Ys(T,D){if("object"!=typeof T||null===T)return!1;for(const A of D)if(A in T&&"function"==typeof T[A])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:A,complete:G},void 0===M.next&&(M.next=Ft),void 0===M.error&&(M.error=Ft),void 0===M.complete&&(M.complete=Ft);const q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),q}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,D)}sendOne(D,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{A(this.observers[D])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ft(){}function Lo(T){return T&&T._delegate?T._delegate:T}},120:(Gi,Pn,Be)=>{function I(t){return"function"==typeof t}function Me(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const B=Me(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ne(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class lt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof B?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Mn(s)}catch(o){e=e??[],o instanceof B?e=[...e,...o.errors]:e.push(o)}}if(e)throw new B(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Mn(e);else{if(e instanceof lt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ne(n,e)}remove(e){const{_finalizers:n}=this;n&&Ne(n,e),e instanceof lt&&e._removeParent(this)}}lt.EMPTY=(()=>{const t=new lt;return t.closed=!0,t})();const zt=lt.EMPTY;function Xt(t){return t instanceof lt||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Mn(t){I(t)?t():t.unsubscribe()}const Je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},K={setTimeout(t,e,...n){const{delegate:r}=K;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=K;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function re(t){K.setTimeout(()=>{const{onUnhandledError:e}=Je;if(!e)throw t;e(t)})}function Ie(){}const Qe=ft("C",void 0,void 0);function ft(t,e,n){return{kind:t,value:e,error:n}}let ke=null;function ze(t){if(Je.useDeprecatedSynchronousErrorHandling){const e=!ke;if(e&&(ke={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ke;if(ke=null,n)throw r}}else t()}class On extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xt(e)&&e.add(this)):this.destination=Gt}static create(e,n,r){return new fr(e,n,r)}next(e){this.isStopped?Z(function Nn(t){return ft("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Z(function dt(t){return ft("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Z(Qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kt=Function.prototype.bind;function pt(t,e){return kt.call(t,e)}class Rt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ge(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ge(r)}else Ge(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ge(n)}}}class fr extends On{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Je.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pt(e.next,s),error:e.error&&pt(e.error,s),complete:e.complete&&pt(e.complete,s)}):i=e}this.destination=new Rt(i)}}function Ge(t){Je.useDeprecatedSynchronousErrorHandling?function xn(t){Je.useDeprecatedSynchronousErrorHandling&&ke&&(ke.errorThrown=!0,ke.error=t)}(t):re(t)}function Z(t,e){const{onStoppedNotification:n}=Je;n&&K.setTimeout(()=>n(t,e))}const Gt={closed:!0,next:Ie,error:function wn(t){throw t},complete:Ie},Vt="function"==typeof Symbol&&Symbol.observable||"@@observable";function gn(t){return t}function Ii(t){return 0===t.length?gn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function k(t){return t&&t instanceof On||function Ei(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Xt(t)}(n)?n:new fr(n,r,i);return ze(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Qs(r))((i,s)=>{const o=new fr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Vt](){return this}pipe(...n){return Ii(n)(this)}toPromise(n){return new(n=Qs(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Qs(t){var e;return null!==(e=t??Je.Promise)&&void 0!==e?e:Promise}const F=Me(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zt:(this.currentObservers=null,s.push(n),new lt(()=>{this.currentObservers=null,Ne(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:zt}}function Q(t){return I(t?.lift)}function L(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new rt(t,e,n,r,i)}class rt extends On{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ee(t,e){return L((n,r)=>{let i=0;n.subscribe(he(r,s=>{r.next(t.call(e,s,i++))}))})}var we=Be(582);const ut=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function qt(t){return I(t?.then)}function Nt(t){return I(t[Vt])}function Wn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function Dn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const pr=function tr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rr(t){return I(t?.[pr])}function Ba(t){return(0,we.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,we.qq)(n.read());if(i)return yield(0,we.qq)(void 0);yield yield(0,we.qq)(r)}}finally{n.releaseLock()}})}function qi(t){return I(t?.getReader)}function mn(t){if(t instanceof st)return t;if(null!=t){if(Nt(t))return function xo(t){return new st(e=>{const n=t[Vt]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ut(t))return function ja(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(qt(t))return function ai(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,re)})}(t);if(Wn(t))return gr(t);if(Rr(t))return function $a(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(qi(t))return function Wi(t){return gr(Ba(t))}(t)}throw Dn(t)}function gr(t){return new st(e=>{(function ls(t,e){var n,r,i,s;return(0,we.mG)(this,void 0,void 0,function*(){try{for(n=(0,we.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Zn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ft(t,e,n=1/0){return I(e)?Ft((r,i)=>Ee((s,o)=>e(r,s,i,o))(mn(t(r,i))),n):("number"==typeof e&&(n=e),L((r,i)=>function Ys(t,e,n,r,i,s,o,a){const u=[];let d=0,p=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=C=>d<r?E(C):u.push(C),E=C=>{s&&e.next(C),d++;let S=!1;mn(n(C,p++)).subscribe(he(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const O=u.shift();o?Zn(e,o,()=>E(O)):E(O)}_()}catch(O){e.error(O)}}))};return t.subscribe(he(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ui(t=1/0){return Ft(gn,t)}const Tn=new st(t=>t.complete());function ds(t){return t[t.length-1]}function ko(t){return I(ds(t))?t.pop():void 0}function hs(t){return function Qr(t){return t&&I(t.schedule)}(ds(t))?t.pop():void 0}function nr(t,e=0){return L((n,r)=>{n.subscribe(he(r,i=>Zn(r,t,()=>r.next(i),e),()=>Zn(r,t,()=>r.complete(),e),i=>Zn(r,t,()=>r.error(i),e)))})}function mr(t,e=0){return L((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lo(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{Zn(n,e,()=>{const r=t[Symbol.asyncIterator]();Zn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function D(t,e){if(null!=t){if(Nt(t))return function fs(t,e){return mn(t).pipe(mr(e),nr(e))}(t,e);if(ut(t))return function fc(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(qt(t))return function Fo(t,e){return mn(t).pipe(mr(e),nr(e))}(t,e);if(Wn(t))return Lo(t,e);if(Rr(t))return function Ha(t,e){return new st(n=>{let r;return Zn(n,e,()=>{r=t[pr](),Zn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(qi(t))return function T(t,e){return Lo(Ba(t),e)}(t,e)}throw Dn(t)}(t,e):mn(t)}function G(...t){const e=hs(t),n=function Vo(t,e){return"number"==typeof ds(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?mn(r[0]):ui(n)(A(r,e)):Tn}class M extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function q(...t){return A(t,hs(t))}function xe(t={}){const{connector:e=(()=>new $),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,p=g=!1},E=()=>{const C=o;y(),C?.unsubscribe()};return L((C,S)=>{d++,!g&&!p&&_();const O=u=u??e();S.add(()=>{d--,0===d&&!g&&!p&&(a=qe(E,i))}),O.subscribe(S),!o&&d>0&&(o=new fr({next:R=>O.next(R),error:R=>{g=!0,_(),a=qe(y,n,R),O.error(R)},complete:()=>{p=!0,_(),a=qe(y,r),O.complete()}}),mn(C).subscribe(o))})(s)}}function qe(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new fr({next:()=>{r.unsubscribe(),t()}});return mn(e(...n)).subscribe(r)}function gt(t,e){return L((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(he(r,u=>{i?.unsubscribe();let d=0;const p=s++;mn(t(u,p)).subscribe(i=he(r,g=>r.next(e?e(u,g,p,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wt(t,e=gn){return t=t??Cn,L((n,r)=>{let i,s=!0;n.subscribe(he(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Cn(t,e){return t===e}function me(t){for(let e in t)if(t[e]===me)return e;throw Error("Could not find renamed property on target object.")}function kn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Dt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Dt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function wi(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const pc=me({__forward_ref__:me});function x(t){return t.__forward_ref__=x,t.toString=function(){return Dt(this())},t}function b(t){return X(t)?t():t}function X(t){return"function"==typeof t&&t.hasOwnProperty(pc)&&t.__forward_ref__===x}function _e(t){return t&&!!t.\u0275providers}const Xe="https://g.co/ng/security#xss";class j extends Error{constructor(e,n){super(function en(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ye(t){return"string"==typeof t?t:null==t?"":String(t)}function za(t,e){throw new j(-201,!1)}function _r(t,e){null==t&&function Se(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ae(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ga(t){return $d(t,qa)||$d(t,Eg)}function $d(t,e){return t.hasOwnProperty(e)?t[e]:null}function Zi(t){return t&&(t.hasOwnProperty(Wa)||t.hasOwnProperty(Hd))?t[Wa]:null}const qa=me({\u0275prov:me}),Wa=me({\u0275inj:me}),Eg=me({ngInjectableDef:me}),Hd=me({ngInjectorDef:me});var et=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(et||{});let Za;function Kn(t){const e=Za;return Za=t,e}function Dg(t,e,n){const r=Ga(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&et.Optional?null:void 0!==e?e:void za(Dt(t))}const mt=globalThis;class ue{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Nr={},Ja="__NG_DI_FLAG__",mc="ngTempTokenPath",lI=/\n/gm,Rg="__source";let gs;function Ti(t){const e=gs;return gs=t,e}function hI(t,e=et.Default){if(void 0===gs)throw new j(-203,!1);return null===gs?Dg(t,void 0,e):gs.get(t,e&et.Optional?null:void 0,e)}function ie(t,e=et.Default){return(function wg(){return Za}()||hI)(b(t),e)}function fe(t,e=et.Default){return ie(t,yc(e))}function yc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qd(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let i,s=et.Default;for(let o=0;o<r.length;o++){const a=r[o],u=X0(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ie(i,s))}else e.push(ie(r))}return e}function Ki(t,e){return t[Ja]=e,t.prototype[Ja]=e,t}function X0(t){return t[Ja]}function yr(t){return{toString:t}.toString()}var Yi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yi||{}),Yr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Yr||{});const ci={},ct=[],vc=me({\u0275cmp:me}),ms=me({\u0275dir:me}),Zd=me({\u0275pipe:me}),Xa=me({\u0275mod:me}),Ci=me({\u0275fac:me}),Bo=me({__NG_ELEMENT_ID__:me}),Ic=me({__NG_ENV_ID__:me});function xr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ec(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];wc(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Pg(t){return 3===t||4===t||6===t}function wc(t){return 64===t.charCodeAt(0)}function _s(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Kd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Kd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Qd="ng-template";function fI(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==xr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Dc(t){return 4===t.type&&t.value!==Qd}function Yd(t,e,n){return e===(4!==t.type||n?t.value:Qd)}function Jd(t,e,n){let r=4;const i=t.attrs||[],s=function Mg(t){for(let e=0;e<t.length;e++)if(Pg(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Yd(t,u,n)||""===u&&1===e.length){if(vr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!fI(t.attrs,d,n)){if(vr(r))return!1;o=!0}continue}const g=Xd(8&r?"class":u,i,Dc(t),n);if(-1===g){if(vr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==xr(y,d,0)||2&r&&d!==_){if(vr(r))return!1;o=!0}}}}else{if(!o&&!vr(r)&&!vr(u))return!1;if(o&&vr(u))continue;o=!1,r=u|1&r}}return vr(r)||o}function vr(t){return 0==(1&t)}function Xd(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function nh(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function eh(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jd(t,e[r],n))return!0;return!1}function Cc(t,e){return t?":not("+e.trim()+")":e}function Ng(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!vr(o)&&(e+=Cc(s,i),i=""),r=o,s=s||!vr(r);n++}return""!==i&&(e+=Cc(s,i)),e}function ys(t){return yr(()=>{const e=bc(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Yr.Emulated,styles:t.styles||ct,_:null,schemas:t.schemas||null,tView:null,id:""};Og(n);const r=t.dependencies;return n.directiveDefs=jo(r,!1),n.pipeDefs=jo(r,!0),n.id=function sh(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function ih(t){return tt(t)||_n(t)}function gI(t){return null!==t}function Or(t){return yr(()=>({type:t.type,bootstrap:t.bootstrap||ct,declarations:t.declarations||ct,imports:t.imports||ct,exports:t.exports||ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ac(t,e){if(null==t)return ci;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Re(t){return yr(()=>{const e=bc(t);return Og(e),e})}function Vn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[vc]||null}function _n(t){return t[ms]||null}function rr(t){return t[Zd]||null}function kr(t,e){const n=t[Xa]||null;if(!n&&!0===e)throw new Error(`Type ${Dt(t)} does not have '\u0275mod' property.`);return n}function bc(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ci,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ac(t.inputs,e),outputs:Ac(t.outputs)}}function Og(t){t.features?.forEach(e=>e(t))}function jo(t,e){if(!t)return null;const n=e?rr:ih;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(gI)}const tn=0,le=1,je=2,Pt=3,li=4,tu=5,An=6,$o=7,an=8,Ai=9,Ho=10,Oe=11,nu=12,Sc=13,zo=14,Zt=15,ru=16,Is=17,bi=18,Js=19,Vg=20,Si=21,Ji=22,iu=23,Go=24,Ke=25,Es=1,oh=2,Ri=7,qo=9,Fn=11;function Vr(t){return Array.isArray(t)&&"object"==typeof t[Es]}function Ir(t){return Array.isArray(t)&&!0===t[Es]}function ou(t){return 0!=(4&t.flags)}function Xs(t){return t.componentOffset>-1}function Pc(t){return 1==(1&t.flags)}function Pi(t){return!!t.template}function Fg(t){return 0!=(512&t[je])}function Mi(t,e){return t.hasOwnProperty(Ci)?t[Ci]:null}let Ln=null,ws=!1;function Jr(t){const e=Ln;return Ln=t,e}const un={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Mc(t){if(!Ts(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Gg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function zg(t){t.dirty=!0,function Hg(t){if(void 0===t.liveConsumerNode)return;const e=ws;ws=!0;try{for(const n of t.liveConsumerNode)n.dirty||zg(n)}finally{ws=e}}(t),t.consumerMarkedDirty?.(t)}function lh(t){return t&&(t.nextProducerIndex=0),Jr(t)}function Nc(t,e){if(Jr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ts(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ds(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Gg(t){Zo(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Mc(n),r!==n.version))return!0}return!1}function uu(t){if(Zo(t),Ts(t))for(let e=0;e<t.producerNode.length;e++)Ds(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ds(t,e){if(function xc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Zo(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Ds(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Zo(i),i.producerIndexOfThis[r]=e}}function Ts(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Zo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Zg=null;const Yg=()=>{},wI=(()=>({...un,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Yg}))();class DI{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fr(){return Jg}function Jg(t){return t.type.prototype.ngOnChanges&&(t.setInput=CI),TI}function TI(){const t=Xg(this),e=t?.current;if(e){const n=t.previous;if(n===ci)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function CI(t,e,n,r){const i=this.declaredInputs[n],s=Xg(t)||function ph(t,e){return t[kc]=e}(t,{previous:ci,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new DI(u&&u.currentValue,e,a===ci),t[r]=e}Fr.ngInherit=!0;const kc="__ngSimpleChanges__";function Xg(t){return t[kc]||null}const Ni=function(t,e,n){};function Et(t){for(;Array.isArray(t);)t=t[tn];return t}function Qo(t,e){return Et(e[t])}function bn(t,e){return Et(e[t.index])}function Fc(t,e){return t.data[e]}function Yo(t,e){return t[e]}function Lr(t,e){const n=e[t];return Vr(n)?n:n[tn]}function Cs(t,e){return null==e?null:t[e]}function tm(t){t[Is]=0}function vh(t){1024&t[je]||(t[je]|=1024,Lc(t,1))}function nm(t){1024&t[je]&&(t[je]&=-1025,Lc(t,-1))}function Lc(t,e){let n=t[Pt];if(null===n)return;n[tu]+=e;let r=n;for(n=n[Pt];null!==n&&(1===e&&1===r[tu]||-1===e&&0===r[tu]);)n[tu]+=e,r=n,n=n[Pt]}const Pe={lFrame:cm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Bc(){return Pe.bindingsEnabled}function Y(){return Pe.lFrame.lView}function nt(){return Pe.lFrame.tView}function Dh(t){return Pe.lFrame.contextLView=t,t[an]}function Th(t){return Pe.lFrame.contextLView=null,t}function yn(){let t=am();for(;null!==t&&64===t.type;)t=t.parent;return t}function am(){return Pe.lFrame.currentTNode}function Xr(t,e){const n=Pe.lFrame;n.currentTNode=t,n.isParent=e}function Ch(){return Pe.lFrame.isParent}function ro(){return Pe.lFrame.bindingIndex++}function Rh(t,e){const n=Pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ph(e)}function Ph(t){Pe.lFrame.currentDirectiveIndex=t}function Nh(t){Pe.lFrame.currentQueryIndex=t}function xI(t){const e=t[le];return 2===e.type?e.declTNode:1===e.type?t[An]:null}function xh(t,e,n){if(n&et.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&et.Host||(i=xI(s),null===i||(s=s[zo],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Pe.lFrame=fu();return r.currentTNode=e,r.lView=t,!0}function Oh(t){const e=fu(),n=t[le];Pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fu(){const t=Pe.lFrame,e=null===t?null:t.child;return null===e?cm(t):e}function cm(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function lm(){const t=Pe.lFrame;return Pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const dm=lm;function kh(){const t=lm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ir(){return Pe.lFrame.selectedIndex}function io(t){Pe.lFrame.selectedIndex=t}function xt(){const t=Pe.lFrame;return Fc(t.tView,t.selectedIndex)}let Vh=!0;function Hc(){return Vh}function bs(t){Vh=t}function zc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function Gc(t,e,n){fm(t,e,3,n)}function Jo(t,e,n,r){(3&t[je])===n&&fm(t,e,n,r)}function pu(t,e){let n=t[je];(3&n)===e&&(n&=8191,n+=1,t[je]=n)}function fm(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Is]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Is]+=65536),(a<s||-1==s)&&(jI(t,n,e,u),t[Is]=(4294901760&t[Is])+u+2),u++}function qc(t,e){Ni(4,t,e);const n=Jr(null);try{e.call(t)}finally{Jr(n),Ni(5,t,e)}}function jI(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[je]>>13<t[Is]>>16&&(3&t[je])===e&&(t[je]+=8192,qc(a,s)):qc(a,s)}const so=-1;class gu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Lh(t){return t!==so}function mu(t){return 32767&t}function _u(t,e){let n=function zI(t){return t>>16}(t),r=e;for(;n>0;)r=r[zo],n--;return r}let Uh=!0;function yu(t){const e=Uh;return Uh=t,e}const GI=255,Ss=5;let qI=0;const Oi={};function Zc(t,e){const n=_m(t,e);if(-1!==n)return n;const r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,vu(r.data,t),vu(e,null),vu(r.blueprint,null));const i=Kc(t,e),s=t.injectorIndex;if(Lh(i)){const o=mu(i),a=_u(i,e),u=a[le].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function vu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _m(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Kc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Dm(i),null===r)return so;if(n++,i=i[zo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return so}function Iu(t,e,n){!function Bh(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bo)&&(r=n[Bo]),null==r&&(r=n[Bo]=qI++);const i=r&GI;e.data[t+(i>>Ss)]|=1<<i}(t,e,n)}function ym(t,e,n){if(n&et.Optional||void 0!==t)return t;za()}function Qc(t,e,n,r){if(n&et.Optional&&void 0===r&&(r=null),!(n&(et.Self|et.Host))){const i=t[Ai],s=Kn(void 0);try{return i?i.get(e,r,n&et.Optional):Dg(e,r,n&et.Optional)}finally{Kn(s)}}return ym(r,0,n)}function vm(t,e,n,r=et.Default,i){if(null!==t){if(2048&e[je]&&!(r&et.Self)){const o=function QI(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[je]&&!(512&o[je]);){const a=Im(s,o,n,r|et.Self,Oi);if(a!==Oi)return a;let u=s.parent;if(!u){const d=o[Vg];if(d){const p=d.get(n,Oi,r);if(p!==Oi)return p}u=Dm(o),o=o[zo]}s=u}return i}(t,e,n,r,Oi);if(o!==Oi)return o}const s=Im(t,e,n,r,Oi);if(s!==Oi)return s}return Qc(e,n,r,i)}function Im(t,e,n,r,i){const s=function Em(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bo)?t[Bo]:void 0;return"number"==typeof e?e>=0?e&GI:KI:e}(n);if("function"==typeof s){if(!xh(e,t,r))return r&et.Host?ym(i,0,r):Qc(e,n,r,i);try{let o;if(o=s(r),null!=o||r&et.Optional)return o;za()}finally{dm()}}else if("number"==typeof s){let o=null,a=_m(t,e),u=so,d=r&et.Host?e[Zt][An]:null;for((-1===a||r&et.SkipSelf)&&(u=-1===a?Kc(t,e):e[a+8],u!==so&&wm(r,!1)?(o=e[le],a=mu(u),e=_u(u,e)):a=-1);-1!==a;){const p=e[le];if(Jc(s,a,p.data)){const g=ZI(a,e,n,o,r,d);if(g!==Oi)return g}u=e[a+8],u!==so&&wm(r,e[le].data[a+8]===d)&&Jc(s,a,e)?(o=p,a=mu(u),e=_u(u,e)):a=-1}}return i}function ZI(t,e,n,r,i,s){const o=e[le],a=o.data[t+8],p=function Yc(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,p=s>>20,_=i?a+p:t.directiveEnd;for(let y=r?a:a+p;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&Pi(y)&&y.type===n)return u}return null}(a,o,n,null==r?Xs(a)&&Uh:r!=o&&0!=(3&a.type),i&et.Host&&s===a);return null!==p?oo(e,o,p,a):Oi}function oo(t,e,n,r){let i=t[n];const s=e.data;if(function Fh(t){return t instanceof gu}(i)){const o=i;o.resolving&&function Uo(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ye(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ye(t)}(s[n]));const a=yu(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Kn(o.injectImpl):null;xh(t,r,et.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function BI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Jg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Kn(d),yu(a),o.resolving=!1,dm()}}return i}function Jc(t,e,n){return!!(n[e+(t>>Ss)]&1<<t)}function wm(t,e){return!(t&et.Self||t&et.Host&&e)}class Bn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vm(this._tNode,this._lView,e,yc(r),n)}}function KI(){return new Bn(yn(),Y())}function jn(t){return yr(()=>{const e=t.prototype.constructor,n=e[Ci]||Xo(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Ci]||Xo(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Xo(t){return X(t)?()=>{const e=Xo(b(t));return e&&e()}:Mi(t)}function Dm(t){const e=t[le],n=e.type;return 2===n?e.declTNode:1===n?t[An]:null}const ea="__parameters__";function ki(t,e,n){return yr(()=>{const r=function $h(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,p){const g=u.hasOwnProperty(ea)?u[ea]:Object.defineProperty(u,ea,{value:[]})[ea];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function na(t,e){t.forEach(n=>Array.isArray(n)?na(n,e):e(n))}function el(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ra(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Br(t,e,n){let r=ia(t,e);return r>=0?t[1|r]=n:(r=~r,function Ps(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Hh(t,e){const n=ia(t,e);if(n>=0)return t[1|n]}function ia(t,e){return function sr(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Cu=Ki(ki("Optional"),8),rl=Ki(ki("SkipSelf"),4);function Vm(t){return 128==(128&t.flags)}var oa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(oa||{});const uE=new Map;let EU=0;const lE="__ngContext__";function Er(t,e){Vr(e)?(t[lE]=e[Js],function DU(t){uE.set(t[Js],t)}(e)):t[lE]=e}let dE;function hE(t,e){return dE(t,e)}function Qh(t){const e=t[Pt];return Ir(e)?e[Pt]:e}function Bb(t){return $b(t[nu])}function jb(t){return $b(t[li])}function $b(t){for(;null!==t&&!Ir(t);)t=t[li];return t}function al(t,e,n,r,i){if(null!=r){let s,o=!1;Ir(r)?s=r:Vr(r)&&(o=!0,r=r[tn]);const a=Et(r);0===t&&null!==n?null==i?qb(e,n,a):bu(e,n,a,i||null,!0):1===t&&null!==n?bu(e,n,a,i||null,!0):2===t?function Hm(t,e,n){const r=jm(t,e);r&&function $U(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function GU(t,e,n,r,i){const s=n[Ri];s!==Et(n)&&al(e,t,r,s,i);for(let a=Fn;a<n.length;a++){const u=n[a];Jh(u[le],u,t,e,r,s)}}(e,t,s,n,i)}}function Um(t,e,n){return t.createElement(e,n)}function zb(t,e){const n=t[qo],r=n.indexOf(e);nm(e),n.splice(r,1)}function Bm(t,e){if(t.length<=Fn)return;const n=Fn+e,r=t[n];if(r){const i=r[ru];null!==i&&i!==t&&zb(i,r),e>0&&(t[n-1][li]=r[li]);const s=ra(t,Fn+e);!function OU(t,e){Jh(t,e,e[Oe],2,null,null),e[tn]=null,e[An]=null}(r[le],r);const o=s[bi];null!==o&&o.detachView(s[le]),r[Pt]=null,r[li]=null,r[je]&=-129}return r}function pE(t,e){if(!(256&e[je])){const n=e[Oe];e[iu]&&uu(e[iu]),e[Go]&&uu(e[Go]),n.destroyNode&&Jh(t,e,n,3,null,null),function FU(t){let e=t[nu];if(!e)return gE(t[le],t);for(;e;){let n=null;if(Vr(e))n=e[nu];else{const r=e[Fn];r&&(n=r)}if(!n){for(;e&&!e[li]&&e!==t;)Vr(e)&&gE(e[le],e),e=e[Pt];null===e&&(e=t),Vr(e)&&gE(e[le],e),n=e&&e[li]}e=n}}(e)}}function gE(t,e){if(!(256&e[je])){e[je]&=-129,e[je]|=256,function jU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof gu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ni(4,a,u);try{u.call(a)}finally{Ni(5,a,u)}}else{Ni(4,i,s);try{s.call(i)}finally{Ni(5,i,s)}}}}}(t,e),function BU(t,e){const n=t.cleanup,r=e[$o];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[$o]=null);const i=e[Si];if(null!==i){e[Si]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[le].type&&e[Oe].destroy();const n=e[ru];if(null!==n&&Ir(e[Pt])){n!==e[Pt]&&zb(n,e);const r=e[bi];null!==r&&r.detachView(t)}!function TU(t){uE.delete(t[Js])}(e)}}function mE(t,e,n){return function Gb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Yr.None||s===Yr.Emulated)return null}return bn(r,n)}}(t,e.parent,n)}function bu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qb(t,e,n){t.appendChild(e,n)}function Wb(t,e,n,r,i){null!==r?bu(t,e,n,r,i):qb(t,e,n)}function jm(t,e){return t.parentNode(e)}let _E,EE,Gm,Qb=function Kb(t,e,n){return 40&t.type?bn(t,n):null};function $m(t,e,n,r){const i=mE(t,r,e),s=e[Oe],a=function Zb(t,e,n){return Qb(t,e,n)}(r.parent||e[An],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Wb(s,i,n[u],a,!1);else Wb(s,i,n,a,!1);void 0!==_E&&_E(s,r,e,n,i)}function Yh(t,e){if(null!==e){const n=e.type;if(3&n)return bn(e,t);if(4&n)return yE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Yh(t,r);{const i=t[e.index];return Ir(i)?yE(-1,i):Et(i)}}if(32&n)return hE(e,t)()||Et(t[e.index]);{const r=Jb(t,e);return null!==r?Array.isArray(r)?r[0]:Yh(Qh(t[Zt]),r):Yh(t,e.next)}}return null}function Jb(t,e){return null!==e?t[Zt][An].projection[e.projection]:null}function yE(t,e){const n=Fn+t+1;if(n<e.length){const r=e[n],i=r[le].firstChild;if(null!==i)return Yh(r,i)}return e[Ri]}function vE(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Er(Et(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)vE(t,e,n.child,r,i,s,!1),al(e,t,i,a,s);else if(32&u){const d=hE(n,r);let p;for(;p=d();)al(e,t,i,p,s);al(e,t,i,a,s)}else 16&u?eS(t,e,r,n,i,s):al(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Jh(t,e,n,r,i,s){vE(n,r,t.firstChild,e,i,s,!1)}function eS(t,e,n,r,i,s){const o=n[Zt],u=o[An].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)al(e,t,i,u[d],s);else{let d=u;const p=o[Pt];Vm(r)&&(d.flags|=128),vE(t,e,d,p,i,s,!0)}}function tS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function nS(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Ec(t,e,r),null!==i&&tS(t,e,i),null!==s&&function WU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function sS(t){return function wE(){if(void 0===Gm&&(Gm=null,mt.trustedTypes))try{Gm=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Gm}()?.createScriptURL(t)||t}class oS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}function aa(t){return t instanceof oS?t.changingThisBreaksApplicationSecurity:t}function Xh(t,e){const n=function rB(t){return t instanceof oS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Xe})`)}return n===e}const aB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ll=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ll||{});function fS(t){const e=tf();return e?e.sanitize(ll.URL,t)||"":Xh(t,"URL")?aa(t):function DE(t){return(t=String(t)).match(aB)?t:"unsafe:"+t}(ye(t))}function pS(t){const e=tf();if(e)return sS(e.sanitize(ll.RESOURCE_URL,t)||"");if(Xh(t,"ResourceURL"))return sS(aa(t));throw new j(904,!1)}function tf(){const t=Y();return t&&t[Ho].sanitizer}const nf=new ue("ENVIRONMENT_INITIALIZER"),mS=new ue("INJECTOR",-1),_S=new ue("INJECTOR_DEF_TYPES");class bE{get(e,n=Nr){if(n===Nr){const r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return n}}function IB(...t){return{\u0275providers:vS(0,t),\u0275fromNgModule:!0}}function vS(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return na(e,o=>{const a=o;Wm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&IS(i,s),n}function IS(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];SE(i,s=>{e(s,r)})}}function Wm(t,e,n,r){if(!(t=b(t)))return!1;let i=null,s=Zi(t);const o=!s&&tt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Zi(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Wm(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{na(s.imports,p=>{Wm(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&IS(d,e)}if(!a){const d=Mi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ct},i),e({provide:_S,useValue:i,multi:!0},i),e({provide:nf,useValue:()=>ie(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;SE(u,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function SE(t,e){for(let n of t)_e(n)&&(n=n.\u0275providers),Array.isArray(n)?SE(n,e):e(n)}const EB=me({provide:String,useValue:me});function RE(t){return null!==t&&"object"==typeof t&&EB in t}function Su(t){return"function"==typeof t}const PE=new ue("Set Injector scope."),Zm={},DB={};let ME;function Km(){return void 0===ME&&(ME=new bE),ME}class Vi{}class dl extends Vi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xE(e,o=>this.processProvider(o)),this.records.set(mS,hl(void 0,this)),i.has("environment")&&this.records.set(Vi,hl(void 0,this));const s=this.records.get(PE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_S.multi,ct,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ti(this),r=Kn(void 0);try{return e()}finally{Ti(n),Kn(r)}}get(e,n=Nr,r=et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ic))return e[Ic](this);r=yc(r);const s=Ti(this),o=Kn(void 0);try{if(!(r&et.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function SB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ue}(e)&&Ga(e);u=d&&this.injectableDefInScope(d)?hl(NE(e),Zm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&et.Self?Km():this.parent).get(e,n=r&et.Optional&&n===Nr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[mc]=a[mc]||[]).unshift(Dt(e)),s)throw a;return function Wd(t,e,n,r){const i=t[mc];throw e[Rg]&&i.unshift(e[Rg]),t.message=function Qi(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Dt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(lI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[mc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Kn(o),Ti(s)}}resolveInjectorInitializers(){const e=Ti(this),n=Kn(void 0);try{const i=this.get(nf.multi,ct,et.Self);for(const s of i)s()}finally{Ti(e),Kn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let n=Su(e=b(e))?e:b(e&&e.provide);const r=function CB(t){return RE(t)?hl(void 0,t.useValue):hl(DS(t),Zm)}(e);if(Su(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=hl(void 0,Zm,!0),i.factory=()=>qd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Zm&&(n.value=DB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function bB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function NE(t){const e=Ga(t),n=null!==e?e.factory:Mi(t);if(null!==n)return n;if(t instanceof ue)throw new j(204,!1);if(t instanceof Function)return function TB(t){const e=t.length;if(e>0)throw function Du(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new j(204,!1);const n=function uI(t){return t&&(t[qa]||t[Eg])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new j(204,!1)}function DS(t,e,n){let r;if(Su(t)){const i=b(t);return Mi(i)||NE(i)}if(RE(t))r=()=>b(t.useValue);else if(function wS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...qd(t.deps||[]));else if(function ES(t){return!(!t||!t.useExisting)}(t))r=()=>ie(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function AB(t){return!!t.deps}(t))return Mi(i)||NE(i);r=()=>new i(...qd(t.deps))}return r}function hl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xE(t,e){for(const n of t)Array.isArray(n)?xE(n,e):n&&_e(n)?xE(n.\u0275providers,e):e(n)}const Qm=new ue("AppId",{providedIn:"root",factory:()=>RB}),RB="ng",TS=new ue("Platform Initializer"),co=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CS=new ue("CSP nonce",{providedIn:"root",factory:()=>function cl(){if(void 0!==EE)return EE;if(typeof document<"u")return document;throw new j(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let AS=(t,e,n)=>null;function jE(t,e,n=!1){return AS(t,e,n)}class UB{}class RS{}class jB{resolveComponentFactory(e){throw function BB(t){const e=Error(`No component factory found for ${Dt(t)}.`);return e.ngComponent=t,e}(e)}}let n_=(()=>{class t{static#e=this.NULL=new jB}return t})();function $B(){return gl(yn(),Y())}function gl(t,e){return new ti(bn(t,e))}let ti=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=$B}return t})();class MS{}let lo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function zB(){const t=Y(),n=Lr(yn().index,t);return(Vr(n)?n:t)[Oe]}()}return t})(),GB=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>null})}return t})();class ml{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const NS=new ml("16.2.12"),zE={};function VS(t,e=null,n=null,r){const i=FS(t,e,n,r);return i.resolveInjectorInitializers(),i}function FS(t,e=null,n=null,r,i=new Set){const s=[n||ct,IB(t)];return r=r||("object"==typeof t?void 0:Dt(t)),new dl(s,e||Km(),r||null,i)}let hi=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Nr;static#t=this.NULL=new bE;static create(n,r){if(Array.isArray(n))return VS({name:""},r,n,"");{const i=n.name??"";return VS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ae({token:t,providedIn:"any",factory:()=>ie(mS)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function qE(t){return t.ngOriginalError}class ho{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&qE(e);for(;n&&qE(n);)n=qE(n);return n||null}}function ZE(t){return e=>{setTimeout(t,void 0,e)}}const ln=class JB extends ${constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=ZE(s),i&&(i=ZE(i)),o&&(o=ZE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof lt&&e.add(a),a}};function US(...t){}class wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ln(!1),this.onMicrotaskEmpty=new ln(!1),this.onStable=new ln(!1),this.onError=new ln(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function XB(){const t="function"==typeof mt.requestAnimationFrame;let e=mt[t?"requestAnimationFrame":"setTimeout"],n=mt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function nj(t){const e=()=>{!function tj(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,QE(t),t.isCheckStableRunning=!0,KE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),QE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function ij(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return BS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),jS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return BS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),jS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,QE(t),KE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ej,US,US);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const ej={};function KE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function BS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function jS(t){t._nesting--,KE(t)}class rj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ln,this.onMicrotaskEmpty=new ln,this.onStable=new ln,this.onError=new ln}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const $S=new ue("",{providedIn:"root",factory:HS});function HS(){const t=fe(wt);let e=!0;return G(new st(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new st(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{wt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(xe()))}function fo(t){return t instanceof Function?t():t}let YE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function af(t){for(;t;){t[je]|=64;const e=Qh(t);if(Fg(t)&&!e)return t;t=e}return null}const ZS=new ue("",{providedIn:"root",factory:()=>!1});let i_=null;function JS(t,e){return t[e]??tR()}function XS(t,e){const n=tR();n.producerNode?.length&&(t[e]=i_,n.lView=t,i_=eR())}const pj={...un,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{af(t.lView)},lView:null};function eR(){return Object.create(pj)}function tR(){return i_??=eR(),i_}const He={};function Tt(t){nR(nt(),Y(),ir()+t,!1)}function nR(t,e,n,r){if(!r)if(3==(3&e[je])){const s=t.preOrderCheckHooks;null!==s&&Gc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Jo(e,s,0,n)}io(n)}function ne(t,e=et.Default){const n=Y();return null===n?ie(t,e):vm(yn(),n,b(t),e)}function s_(t,e,n,r,i,s,o,a,u,d,p){const g=e.blueprint.slice();return g[tn]=i,g[je]=140|r,(null!==d||t&&2048&t[je])&&(g[je]|=2048),tm(g),g[Pt]=g[zo]=t,g[an]=n,g[Ho]=o||t&&t[Ho],g[Oe]=a||t&&t[Oe],g[Ai]=u||t&&t[Ai]||null,g[An]=s,g[Js]=function wU(){return EU++}(),g[Ji]=p,g[Vg]=d,g[Zt]=2==e.type?t[Zt]:g,g}function vl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function JE(t,e,n,r,i){const s=am(),o=Ch(),u=t.data[e]=function wj(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function As(){return null!==Pe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function MI(){return Pe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function du(){const t=Pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Xr(s,!0),s}function uf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function iR(t,e,n,r,i){const s=JS(e,iu),o=ir(),a=2&r;try{io(-1),a&&e.length>Ke&&nR(t,e,Ke,!1),Ni(a?2:0,i);const d=a?s:null,p=lh(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{Nc(d,p)}}finally{a&&null===e[iu]&&XS(e,iu),io(o),Ni(a?3:1,i)}}function XE(t,e,n){if(ou(e)){const r=Jr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Jr(r)}}}function ew(t,e,n){Bc()&&(function Rj(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Xs(n)&&function Vj(t,e,n){const r=bn(e,t),i=sR(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=o_(t,s_(t,i,null,o,r,e,null,t[Ho].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Zc(n,e),Er(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=oo(e,t,a,n);Er(d,e),null!==o&&Fj(0,a-i,d,u,0,o),Pi(u)&&(Lr(n.index,e)[an]=oo(e,t,a,n))}}(t,e,n,bn(n,e)),64==(64&n.flags)&&lR(t,e,n))}function tw(t,e,n=bn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function sR(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=nw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function nw(t,e,n,r,i,s,o,a,u,d,p){const g=Ke+r,_=g+i,y=function mj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:He);return n}(g,_),E="function"==typeof d?d():d;return y[le]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:p}}let oR=t=>null;function aR(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?uR(n,e,i,s):r.hasOwnProperty(i)&&uR(n,e,r[i],s)}return n}function uR(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function rw(t,e,n,r){if(Bc()){const i=null===r?null:{"":-1},s=function Mj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(eh(e,o.selectors,!1))if(r||(r=[]),Pi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),iw(t,e,a.length)}else r.unshift(o),iw(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&cR(t,e,n,o,i,a),i&&function Nj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new j(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=_s(n.mergedAttrs,n.attrs)}function cR(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Iu(Zc(n,e),t,r[d].type);!function Oj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=uf(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=_s(n.mergedAttrs,p.hostAttrs),kj(t,n,e,u,p),xj(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Dj(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let p=e.directiveStart;p<i;p++){const g=s[p],_=n?n.get(g):null,E=_?_.outputs:null;u=aR(g.inputs,p,u,_?_.inputs:null),d=aR(g.outputs,p,d,E);const C=null===u||null===o||Dc(e)?null:Lj(u,p,o);a.push(C)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function lR(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function NI(){return Pe.lFrame.currentDirectiveIndex}();try{io(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Ph(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Pj(u,d)}}finally{io(-1),Ph(o)}}function Pj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function iw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function xj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pi(e)&&(n[""]=t)}}function kj(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Mi(i.type)),o=new gu(s,Pi(i),ne);t.blueprint[r]=o,n[r]=o,function bj(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Sj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,uf(t,n,i.hostVars,He),i)}function Ms(t,e,n,r,i,s){const o=bn(t,e);!function sw(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?ye(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Oe],o,s,t.value,n,r,i)}function Fj(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)dR(r,n,o[a++],o[a++],o[a++])}function dR(t,e,n,r,i){const s=Jr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Jr(s)}}function Lj(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function hR(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function fR(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Nh(n[r]),o.contentQueries(2,e[s],s)}}}function o_(t,e){return t[nu]?t[Sc][li]=e:t[nu]=e,t[Sc]=e,e}function ow(t,e,n){Nh(0);const r=Jr(null);try{e(t,n)}finally{Jr(r)}}function _R(t,e){const n=t[Ai],r=n?n.get(ho,null):null;r&&r.handleError(e)}function aw(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];dR(t.data[o],e[o],r,a,i)}}function Uj(t,e){const n=Lr(e,t),r=n[le];!function Bj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[tn];null!==i&&null===n[Ji]&&(n[Ji]=jE(i,n[Ai])),uw(r,n,n[an])}function uw(t,e,n){Oh(e);try{const r=t.viewQuery;null!==r&&ow(1,r,n);const i=t.template;null!==i&&iR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fR(t,e),t.staticViewQueries&&ow(2,t.viewQuery,n);const s=t.components;null!==s&&function jj(t,e){for(let n=0;n<e.length;n++)Uj(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[je]&=-5,kh()}}let yR=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function EI(t,e,n){const r=Object.create(wI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>zg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Gg(r))return;r.hasRun=!0;const o=lh(r);try{r.cleanupFn(),r.cleanupFn=Yg,r.fn(i)}finally{Nc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function a_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=wi(i,a):2==s&&(r=wi(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function cf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Et(s)),Ir(s)&&vR(s,r);const o=n.type;if(8&o)cf(t,e,n.child,r);else if(32&o){const a=hE(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Jb(e,n);if(Array.isArray(a))r.push(...a);else{const u=Qh(e[Zt]);cf(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function vR(t,e){for(let n=Fn;n<t.length;n++){const r=t[n],i=r[le].firstChild;null!==i&&cf(r[le],r,i,e)}t[Ri]!==t[tn]&&e.push(t[Ri])}function u_(t,e,n,r=!0){const i=e[Ho],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{IR(t,e,t.template,n)}catch(u){throw r&&_R(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function IR(t,e,n,r){const i=e[je];if(256!=(256&i)){e[Ho].effectManager?.flush(),Oh(e);try{tm(e),function bh(t){return Pe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&iR(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&Gc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&Jo(e,d,0,null),pu(e,0)}if(function zj(t){for(let e=Bb(t);null!==e;e=jb(e)){if(!e[oh])continue;const n=e[qo];for(let r=0;r<n.length;r++){vh(n[r])}}}(e),ER(e,2),null!==t.contentQueries&&fR(t,e),o){const d=t.contentCheckHooks;null!==d&&Gc(e,d)}else{const d=t.contentHooks;null!==d&&Jo(e,d,1),pu(e,1)}!function gj(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=JS(e,Go);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)io(~s);else{const o=s,a=n[++i],u=n[++i];Rh(a,o),r.dirty=!1;const d=lh(r);try{u(2,e[o])}finally{Nc(r,d)}}}}finally{null===e[Go]&&XS(e,Go),io(-1)}}(t,e);const a=t.components;null!==a&&DR(e,a,0);const u=t.viewQuery;if(null!==u&&ow(2,u,r),o){const d=t.viewCheckHooks;null!==d&&Gc(e,d)}else{const d=t.viewHooks;null!==d&&Jo(e,d,2),pu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[je]&=-73,nm(e)}finally{kh()}}}function ER(t,e){for(let n=Bb(t);null!==n;n=jb(n))for(let r=Fn;r<n.length;r++)wR(n[r],e)}function Gj(t,e,n){wR(Lr(e,t),n)}function wR(t,e){if(!function yh(t){return 128==(128&t[je])}(t))return;const n=t[le],r=t[je];if(80&r&&0===e||1024&r||2===e)IR(n,t,n.template,t[an]);else if(t[tu]>0){ER(t,1);const i=n.components;null!==i&&DR(t,i,1)}}function DR(t,e,n){for(let r=0;r<e.length;r++)Gj(t,e[r],n)}class lf{get rootNodes(){const e=this._lView,n=e[le];return cf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return 256==(256&this._lView[je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pt];if(Ir(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Bm(e,r),ra(n,r))}this._attachedToViewContainer=!1}pE(this._lView[le],this._lView)}onDestroy(e){!function rm(t,e){if(256==(256&t[je]))throw new j(911,!1);null===t[Si]&&(t[Si]=[]),t[Si].push(e)}(this._lView,e)}markForCheck(){af(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-129}reattach(){this._lView[je]|=128}detectChanges(){u_(this._lView[le],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VU(t,e){Jh(t,e,e[Oe],2,null,null)}(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class qj extends lf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;u_(e[le],e,e[an],!1)}checkNoChanges(){}get context(){return null}}class TR extends n_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tt(e);return new df(n,this.ngModule)}}function CR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Zj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=yc(r);const i=this.injector.get(e,zE,r);return i!==zE||n===zE?i:this.parentInjector.get(e,n,r)}}class df extends RS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=CR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return CR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function rh(t){return t.map(Ng).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Vi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Zj(e,s):e,a=o.get(MS,null);if(null===a)throw new j(407,!1);const g={rendererFactory:a,sanitizer:o.get(GB,null),effectManager:o.get(yR,null),afterRenderEventManager:o.get(YE,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function _j(t,e,n,r){const s=r.get(ZS,!1)||n===Yr.ShadowDom,o=t.selectRootElement(e,s);return function yj(t){oR(t)}(o),o}(_,r,this.componentDef.encapsulation,o):Um(_,y,function Wj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=jE(E,o,!0));const U=nw(0,null,null,1,0,null,null,null,null,null,null),te=s_(null,U,null,O,null,null,g,_,o,null,R);let ce,Ue;Oh(te);try{const It=this.componentDef;let qn,mg=null;It.findHostDirectiveDefs?(qn=[],mg=new Map,It.findHostDirectiveDefs(It,qn,mg),qn.push(It)):qn=[It];const tI=function Qj(t,e){const n=t[le],r=Ke;return t[r]=e,vl(n,r,2,"#host",null)}(te,E),gJ=function Yj(t,e,n,r,i,s,o){const a=i[le];!function Jj(t,e,n,r){for(const i of t)e.mergedAttrs=_s(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(a_(e,e.mergedAttrs,!0),null!==n&&nS(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=jE(e,i[Ai]));const d=s.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=s_(i,sR(n),null,p,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&iw(a,t,r.length-1),o_(i,g),i[t.index]=g}(tI,E,It,qn,te,g,_);Ue=Fc(U,Ke),E&&function e$(t,e,n,r){if(r)Ec(t,n,["ng-version",NS.full]);else{const{attrs:i,classes:s}=function xg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!vr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Ec(t,n,i),s&&s.length>0&&tS(t,n,s.join(" "))}}(_,It,E,r),void 0!==n&&function t$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Ue,this.ngContentSelectors,n),ce=function Xj(t,e,n,r,i,s){const o=yn(),a=i[le],u=bn(o,i);cR(a,i,o,n,null,r);for(let p=0;p<n.length;p++)Er(oo(i,a,o.directiveStart+p,o),i);lR(a,i,o),u&&Er(u,i);const d=oo(i,a,o.directiveStart+o.componentOffset,o);if(t[an]=i[an]=d,null!==s)for(const p of s)p(d,e);return XE(a,o,t),d}(gJ,It,qn,mg,te,[n$]),uw(U,te,null)}finally{kh()}return new Kj(this.componentType,ce,gl(Ue,te),te,Ue)}}class Kj extends UB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new qj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;aw(s[le],s,i,e,n),this.previousInputValues.set(e,n),af(Lr(this._tNode.index,s))}}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function n$(){const t=yn();zc(Y()[le],t)}function Ct(t){let e=function AR(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Pi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=c_(t.inputs),o.inputTransforms=c_(t.inputTransforms),o.declaredInputs=c_(t.declaredInputs),o.outputs=c_(t.outputs);const a=i.hostBindings;a&&o$(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&i$(t,u),d&&s$(t,d),kn(t.inputs,i.inputs),kn(t.declaredInputs,i.declaredInputs),kn(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),kn(o.inputTransforms,i.inputTransforms)),Pi(i)&&i.data.animation){const p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ct&&(n=!1)}}e=Object.getPrototypeOf(e)}!function r$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_s(i.hostAttrs,n=_s(n,i.hostAttrs))}}(r)}function c_(t){return t===ci?{}:t===ct?[]:t}function i$(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function s$(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function o$(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function PR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function wr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xs(t,e,n,r){const i=Y();return wr(i,ro(),e)&&(nt(),Ms(xt(),i,t,e,n,r)),xs}function mf(t,e,n,r,i,s,o,a){const u=Y(),d=nt(),p=t+Ke,g=d.firstCreatePass?function M$(t,e,n,r,i,s,o,a,u){const d=e.consts,p=vl(e,t,4,o||null,Cs(d,a));rw(e,n,p,Cs(d,u)),zc(e,p);const g=p.tView=nw(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,u,e,n,r,i,s,o):d.data[p];Xr(g,!1);const _=HR(d,u,g,t);Hc()&&$m(d,u,_,g),Er(_,u),o_(u,u[p]=hR(_,u,_,g)),Pc(g)&&ew(d,u,g),null!=o&&tw(u,g,a)}let HR=function zR(t,e,n,r){return bs(!0),e[Oe].createComment("")};function _f(t){return Yo(function jc(){return Pe.lFrame.contextLView}(),Ke+t)}function or(t,e,n){const r=Y();return wr(r,ro(),e)&&function fi(t,e,n,r,i,s,o,a){const u=bn(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(aw(t,n,p,r,i),Xs(e)&&function Cj(t,e){const n=Lr(e,t);16&n[je]||(n[je]|=64)}(n,e.index)):3&e.type&&(r=function Tj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(nt(),xt(),r,t,e,r[Oe],n,!1),or}function gw(t,e,n,r,i){const o=i?"class":"style";aw(t,n,e.inputs[o],o,r)}function be(t,e,n,r){const i=Y(),s=nt(),o=Ke+t,a=i[Oe],u=s.firstCreatePass?function k$(t,e,n,r,i,s){const o=e.consts,u=vl(e,t,2,r,Cs(o,i));return rw(e,n,u,Cs(o,s)),null!==u.attrs&&a_(u,u.attrs,!1),null!==u.mergedAttrs&&a_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=GR(s,i,u,a,e,t);i[o]=d;const p=Pc(u);return Xr(u,!0),nS(a,d,u),32!=(32&u.flags)&&Hc()&&$m(s,i,d,u),0===function bI(){return Pe.lFrame.elementDepthCount}()&&Er(d,i),function SI(){Pe.lFrame.elementDepthCount++}(),p&&(ew(s,i,u),XE(s,u,i)),null!==r&&tw(i,u),be}function Te(){let t=yn();Ch()?function hu(){Pe.lFrame.isParent=!1}():(t=t.parent,Xr(t,!1));const e=t;(function RI(t){return Pe.skipHydrationRootTNode===t})(e)&&function PI(){Pe.skipHydrationRootTNode=null}(),function Eh(){Pe.lFrame.elementDepthCount--}();const n=nt();return n.firstCreatePass&&(zc(n,t),ou(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function mm(t){return 0!=(8&t.flags)}(e)&&gw(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Wc(t){return 0!=(16&t.flags)}(e)&&gw(n,e,Y(),e.stylesWithoutHost,!1),Te}function Rl(t,e,n,r){return be(t,e,n,r),Te(),Rl}let GR=(t,e,n,r,i,s)=>(bs(!0),Um(r,i,function hm(){return Pe.lFrame.currentNamespace}()));function yw(){return Y()}function yf(t){return!!t&&"function"==typeof t.then}function ZR(t){return!!t&&"function"==typeof t.subscribe}function Ut(t,e,n,r){const i=Y(),s=nt(),o=yn();return function QR(t,e,n,r,i,s,o){const a=Pc(r),d=t.firstCreatePass&&function gR(t){return t.cleanup||(t.cleanup=[])}(t),p=e[an],g=function pR(t){return t[$o]||(t[$o]=[])}(e);let _=!0;if(3&r.type||o){const C=bn(r,e),S=o?o(C):C,O=g.length,R=o?te=>o(Et(te[r.index])):r.index;let U=null;if(!o&&a&&(U=function j$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[$o],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,_=!1;else{s=JR(r,e,p,s,!1);const te=n.listen(S,i,s);g.push(s,te),d&&d.push(i,R,O,O+1)}}else s=JR(r,e,p,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const C=E.length;if(C)for(let S=0;S<C;S+=2){const ce=e[E[S]][E[S+1]].subscribe(s),Ue=g.length;g.push(s,ce),d&&d.push(i,r.index,Ue,-(Ue+1))}}}(s,i,i[Oe],o,t,e,r),Ut}function YR(t,e,n,r){try{return Ni(6,e,n),!1!==n(r)}catch(i){return _R(t,i),!1}finally{Ni(7,e,n)}}function JR(t,e,n,r,i){return function s(o){if(o===Function)return r;af(t.componentOffset>-1?Lr(t.index,e):e);let u=YR(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=YR(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function XR(t=1){return function OI(t){return(Pe.lFrame.contextLView=function kI(t,e){for(;t>0;)e=e[zo],t--;return e}(t,Pe.lFrame.contextLView))[an]}(t)}function g_(t,e){return t<<17|e<<2}function ua(t){return t>>17&32767}function Iw(t){return 2|t}function Pu(t){return(131068&t)>>2}function Ew(t,e){return-131069&t|e<<2}function ww(t){return 1|t}function cP(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ua(s):Pu(s),u=!1;for(;0!==a&&(!1===u||o);){const p=t[a+1];Q$(t[a],e)&&(u=!0,t[a+1]=r?ww(p):Iw(p)),a=r?ua(p):Pu(p)}u&&(t[n+1]=r?Iw(s):ww(s))}function Q$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ia(t,e)>=0}function m_(t,e){return function ts(t,e,n,r){const i=Y(),s=nt(),o=function xi(t){const e=Pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function yP(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ir()],o=function _P(t,e){return e>=t.expandoStartIndex}(t,n);(function wP(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function sH(t,e,n,r){const i=function Mh(t){const e=Pe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=vf(n=Dw(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Dw(i,t,e,n,r),null===s){let u=function oH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Pu(r))return t[ua(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Dw(null,t,e,u[1],r),u=vf(u,e.attrs,r),function aH(t,e,n,r){t[ua(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function uH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=vf(r,t[s].hostAttrs,n);return vf(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Z$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ua(o),u=Pu(o);t[r]=n;let p,d=!1;if(Array.isArray(n)?(p=n[1],(null===p||ia(n,p)>0)&&(d=!0)):p=n,i)if(0!==u){const _=ua(t[a+1]);t[r+1]=g_(_,a),0!==_&&(t[_+1]=Ew(t[_+1],r)),t[a+1]=function q$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=g_(a,0),0!==a&&(t[a+1]=Ew(t[a+1],r)),a=r;else t[r+1]=g_(u,0),0===a?a=r:t[u+1]=Ew(t[u+1],r),u=r;d&&(t[r+1]=Iw(t[r+1])),cP(t,p,r,!0),cP(t,p,r,!1),function K$(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ia(s,e)>=0&&(n[r+1]=ww(n[r+1]))}(e,p,t,r,s),o=g_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==He&&wr(i,o,e)&&function IP(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],p=function W$(t){return 1==(1&t)}(d)?EP(u,e,n,i,Pu(d),o):void 0;__(p)||(__(s)||function G$(t){return 2==(2&t)}(d)&&(s=EP(u,null,n,i,a,o)),function qU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:oa.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=oa.Important),t.setStyle(n,r,i,s))}}(r,o,Qo(ir(),n),i,s))}(s,s.data[ir()],i,i[Oe],t,i[o+1]=function hH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Dt(aa(t)))),t}(e,n),r,o)}(t,e,null,!0),m_}function Dw(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=vf(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function vf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Br(t,o,!!n||e[++s]))}return void 0===t?null:t}function EP(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),p=d?u[1]:u,g=null===p;let _=n[i+1];_===He&&(_=g?ct:void 0);let y=g?Hh(_,r):p===r?_:void 0;if(d&&!__(y)&&(y=Hh(u,r)),__(y)&&(a=y,o))return a;const E=t[i+1];i=o?ua(E):Pu(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Hh(u,r))}return a}function __(t){return void 0!==t}function Ve(t,e=""){const n=Y(),r=nt(),i=t+Ke,s=r.firstCreatePass?vl(r,i,1,e,null):r.data[i],o=DP(r,n,s,e,t);n[i]=o,Hc()&&$m(r,n,o,s),Xr(s,!1)}let DP=(t,e,n,r,i)=>(bs(!0),function Lm(t,e){return t.createText(e)}(e[Oe],r));function ca(t){return Vs("",t,""),ca}function Vs(t,e,n){const r=Y(),i=function El(t,e,n,r){return wr(t,ro(),n)?e+ye(n)+r:He}(r,t,e,n);return i!==He&&function po(t,e,n){const r=Qo(e,t);!function Hb(t,e,n){t.setValue(e,n)}(t[Oe],r,n)}(r,ir(),i),Vs}const Mu=void 0;var OH=["en",[["a","p"],["AM","PM"],Mu],[["AM","PM"],Mu,Mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mu,"{1} 'at' {0}",Mu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xH(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Ml={};function jr(t){const e=function kH(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=zP(e);if(n)return n;const r=e.split("-")[0];if(n=zP(r),n)return n;if("en"===r)return OH;throw new j(701,!1)}function zP(t){return t in Ml||(Ml[t]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[t]),Ml[t]}var Bt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Bt||{});const Nl="en-US";let GP=Nl;function Aw(t,e,n,r,i){if(t=b(t),Array.isArray(t))for(let s=0;s<t.length;s++)Aw(t[s],e,n,r,i);else{const s=nt(),o=Y(),a=yn();let u=Su(t)?t:b(t.provide);const d=DS(t),p=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Su(t)||!t.multi){const y=new gu(d,i,ne),E=Sw(u,e,i?p:p+_,g);-1===E?(Iu(Zc(a,o),s,u),bw(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{const y=Sw(u,e,p+_,g),E=Sw(u,e,p,p+_),S=E>=0&&n[E];if(i&&!S||!i&&!(y>=0&&n[y])){Iu(Zc(a,o),s,u);const O=function x4(t,e,n,r,i){const s=new gu(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,mM(s,i,r&&!n),s}(i?N4:M4,n.length,i,r,d);!i&&S&&(n[E].providerFactory=O),bw(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else bw(s,t,y>-1?y:E,mM(n[i?E:y],d,!i&&r));!i&&r&&S&&n[E].componentProviders++}}}function bw(t,e,n,r){const i=Su(e),s=function wB(t){return!!t.useClass}(e);if(i||s){const u=(s?b(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const p=d.indexOf(n);-1===p?d.push(n,[r,u]):d[p+1].push(r,u)}else d.push(n,u)}}}function mM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Sw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function M4(t,e,n,r){return Rw(this.multi,[])}function N4(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=oo(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),Rw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Rw(i,s);return s}function Rw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function rn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function P4(t,e,n){const r=nt();if(r.firstCreatePass){const i=Pi(t);Aw(n,r.data,r.blueprint,i,!0),Aw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Nu{}class _M{}class Pw extends Nu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new TR(this);const i=kr(e);this._bootstrapComponents=fo(i.bootstrap),this._r3Injector=FS(e,n,[{provide:Nu,useValue:this},{provide:n_,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Mw extends _M{constructor(e){super(),this.moduleType=e}create(e){return new Pw(this.moduleType,e,[])}}class yM extends Nu{constructor(e){super(),this.componentFactoryResolver=new TR(this),this.instance=null;const n=new dl([...e.providers,{provide:Nu,useValue:this},{provide:n_,useValue:this.componentFactoryResolver}],e.parent||Km(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Nw(t,e,n=null){return new yM({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let V4=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=vS(0,n.type),i=r.length>0?Nw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ae({token:t,providedIn:"environment",factory:()=>new t(ie(Vi))})}return t})();function vM(t){t.getStandaloneInjector=e=>e.get(V4).getOrCreateStandaloneInjector(t)}function bM(t,e,n,r,i,s,o){const a=e+n;return function Ru(t,e,n,r){const i=wr(t,e,n);return wr(t,e+1,r)||i}(t,a,i,s)?function Ns(t,e,n){return t[e]=n}(t,a+2,o?r.call(o,i,s):r(i,s)):function Cf(t,e){const n=t[e];return n===He?void 0:n}(t,a+2)}function Ow(t,e){const n=nt();let r;const i=t+Ke;n.firstCreatePass?(r=function tz(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Mi(r.type)),a=Kn(ne);try{const u=yu(!1),d=s();return yu(u),function O$(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,d),d}finally{Kn(a)}}function kw(t,e,n,r){const i=t+Ke,s=Y(),o=Yo(s,i);return function Af(t,e){return t[le].data[e].pure}(s,i)?bM(s,function Un(){const t=Pe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r)}function uz(t,e,n,r=!0){const i=e[le];if(function LU(t,e,n,r){const i=Fn+r,s=n.length;r>0&&(n[i-1][li]=e),r<s-Fn?(e[li]=n[i],el(n,Fn+r,e)):(n.push(e),e[li]=null),e[Pt]=n;const o=e[ru];null!==o&&n!==o&&function UU(t,e){const n=t[qo];e[Zt]!==e[Pt][Pt][Zt]&&(t[oh]=!0),null===n?t[qo]=[e]:n.push(e)}(o,e);const a=e[bi];null!==a&&a.insertView(t),e[je]|=128}(i,e,t,n),r){const s=yE(n,t),o=e[Oe],a=jm(o,t[Ri]);null!==a&&function kU(t,e,n,r,i,s){r[tn]=i,r[An]=e,Jh(t,r,n,1,i,s)}(i,t[An],o,e,a,s)}}Symbol;let go=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=dz}return t})();const cz=go,lz=class extends cz{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function az(t,e,n,r){const i=e.tView,a=s_(t,i,n,4096&t[je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ru]=t[e.index];const d=t[bi];return null!==d&&(a[bi]=d.createEmbeddedView(i)),uw(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new lf(i)}};function dz(){return function w_(t,e){return 4&t.type?new lz(e,t,gl(t,e)):null}(yn(),Y())}let rs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=_z}return t})();function _z(){return function FM(t,e){let n;const r=e[t.index];return Ir(r)?n=r:(n=hR(r,e,null,t),e[t.index]=n,o_(e,n)),LM(n,e,t,r),new kM(n,t,e)}(yn(),Y())}const yz=rs,kM=class extends yz{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return gl(this._hostTNode,this._hostLView)}get injector(){return new Bn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Kc(this._hostTNode,this._hostLView);if(Lh(e)){const n=_u(e,this._hostLView),r=mu(e);return new Bn(n[le].data[r+8],n)}return new Bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=VM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function $n(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}const u=o?e:new df(tt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const S=(o?d:this.parentInjector).get(Vi,null);S&&(s=S)}tt(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function em(t){return Ir(t[Pt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Pt],p=new kM(d,d[An],d[Pt]);p.detach(p.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return uz(a,i,o,!r),e.attachToViewContainerRef(),el(Fw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=VM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Bm(this._lContainer,n);r&&(ra(Fw(this._lContainer),n),pE(r[le],r))}detach(e){const n=this._adjustIndex(e,-1),r=Bm(this._lContainer,n);return r&&null!=ra(Fw(this._lContainer),n)?new lf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function VM(t){return t[8]}function Fw(t){return t[8]||(t[8]=[])}let LM=function UM(t,e,n,r){if(t[Ri])return;let i;i=8&n.type?Et(r):function vz(t,e){const n=t[Oe],r=n.createComment(""),i=bn(e,t);return bu(n,jm(n,i),r,function HU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ri]=i};const Zw=new ue("Application Initializer");let Kw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=fe(Zw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(yf(s))n.push(s);else if(ZR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lN=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const mo=new ue("LocaleId",{providedIn:"root",factory:()=>fe(mo,et.Optional|et.SkipSelf)||function Qz(){return typeof $localize<"u"&&$localize.locale||Nl}()});let dN=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Xz{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let hN=(()=>{class t{compileModuleSync(n){return new Mw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=fo(kr(n).declarations).reduce((o,a)=>{const u=tt(a);return u&&o.push(new df(u)),o},[]);return new Xz(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const mN=new ue(""),A_=new ue("");let eD,Jw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,eD||(function EG(t){eD=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(ie(wt),ie(Xw),ie(A_))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),Xw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return eD?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),la=null;const _N=new ue("AllowMultipleToken"),tD=new ue("PlatformDestroyListeners"),nD=new ue("appBootstrapListener");class vN{constructor(e,n){this.name=e,this.token=n}}function EN(t,e,n=[]){const r=`Platform: ${e}`,i=new ue(r);return(s=[])=>{let o=rD();if(!o||o.injector.get(_N,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function TG(t){if(la&&!la.get(_N,!1))throw new j(400,!1);(function yN(){!function Ko(t){Zg=t}(()=>{throw new j(600,!1)})})(),la=t;const e=t.get(DN);(function IN(t){t.get(TS,null)?.forEach(n=>n())})(t)}(function wN(t=[],e){return hi.create({name:e,providers:[{provide:PE,useValue:"platform"},{provide:tD,useValue:new Set([()=>la=null])},...t]})}(a,r))}return function AG(t){const e=rD();if(!e)throw new j(401,!1);return e}()}}function rD(){return la?.get(DN)??null}let DN=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function bG(t="zone.js",e){return"noop"===t?new rj:"zone.js"===t?new wt(e):t}(r?.ngZone,function TN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function k4(t,e,n){return new Pw(t,e,n)}(n.moduleType,this.injector,function RN(t){return[{provide:wt,useFactory:t},{provide:nf,multi:!0,useFactory:()=>{const e=fe(RG,{optional:!0});return()=>e.initialize()}},{provide:SN,useFactory:SG},{provide:$S,useFactory:HS}]}(()=>i)),o=s.injector.get(ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{b_(this._modules,s),a.unsubscribe()})}),function CN(t,e,n){try{const r=n();return yf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Kw);return a.runInitializers(),a.donePromise.then(()=>(function qP(t){_r(t,"Expected localeId to be defined"),"string"==typeof t&&(GP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(mo,Nl)||Nl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=AN({},r);return function wG(t,e,n){const r=new Mw(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(kl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new j(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(tD,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(ie(hi))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function AN(t,e){return Array.isArray(e)?e.reduce(AN,t):{...t,...e}}let kl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=fe(SN),this.zoneIsStable=fe($S),this.componentTypes=[],this.components=[],this.isStable=fe(dN).hasPendingTasks.pipe(gt(n=>n?q(!1):this.zoneIsStable),Wt(),xe()),this._injector=fe(Vi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof RS;if(!this._injector.get(Kw).done)throw!i&&function vs(t){const e=tt(t)||_n(t)||rr(t);return null!==e&&e.standalone}(n),new j(405,!1);let o;o=i?n:this._injector.get(n_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function DG(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Nu),d=o.create(hi.NULL,[],r||o.selector,a),p=d.location.nativeElement,g=d.injector.get(mN,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),b_(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;b_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(nD,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>b_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function b_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const SN=new ue("",{providedIn:"root",factory:()=>fe(ho).handleError.bind(void 0)});function SG(){const t=fe(wt),e=fe(ho);return n=>t.runOutsideAngular(()=>e.handleError(n))}let RG=(()=>{class t{constructor(){this.zone=fe(wt),this.applicationRef=fe(kl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let S_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=MG}return t})();function MG(t){return function NG(t,e,n){if(Xs(t)&&!n){const r=Lr(t.index,e);return new lf(r,r)}return 47&t.type?new lf(e[Zt],e):null}(yn(),Y(),16==(16&t))}const GG=EN(null,"core",[]);let qG=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(ie(kl))};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({})}return t})();function Vl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let cD=null;function da(){return cD}class o3{}const Li=new ue("DocumentToken");let lD=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return fe(u3)},providedIn:"platform"})}return t})();const a3=new ue("Location Initialized");let u3=(()=>{class t extends lD{constructor(){super(),this._doc=fe(Li),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return da().getBaseHref(this._doc)}onPopState(n){const r=da().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=da().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function dD(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function ZN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function _o(t){return t&&"?"!==t[0]?"?"+t:t}let Ou=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return fe(QN)},providedIn:"root"})}return t})();const KN=new ue("appBaseHref");let QN=(()=>{class t extends Ou{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??fe(Li).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return dD(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+_o(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+_o(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+_o(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(lD),ie(KN,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),c3=(()=>{class t extends Ou{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=dD(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(lD),ie(KN,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),hD=(()=>{class t{constructor(n){this._subject=new ln,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function h3(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(ZN(YN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+_o(r))}normalize(n){return t.stripTrailingSlash(function d3(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,YN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_o(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_o(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=_o;static#t=this.joinWithSlash=dD;static#n=this.stripTrailingSlash=ZN;static#r=this.\u0275fac=function(r){return new(r||t)(ie(Ou))};static#i=this.\u0275prov=Ae({token:t,factory:function(){return function l3(){return new hD(ie(Ou))}()},providedIn:"root"})}return t})();function YN(t){return t.replace(/\/index.html$/,"")}var x_=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(x_||{}),Hr=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Hr||{}),Ot=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ot||{}),pi=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(pi||{}),vn=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(vn||{});function O_(t,e){return Bi(jr(t)[Bt.DateFormat],e)}function k_(t,e){return Bi(jr(t)[Bt.TimeFormat],e)}function V_(t,e){return Bi(jr(t)[Bt.DateTimeFormat],e)}function Ui(t,e){const n=jr(t),r=n[Bt.NumberSymbols][e];if(typeof r>"u"){if(e===vn.CurrencyDecimal)return n[Bt.NumberSymbols][vn.Decimal];if(e===vn.CurrencyGroup)return n[Bt.NumberSymbols][vn.Group]}return r}function XN(t){if(!t[Bt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Bt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bi(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function pD(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const A3=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pf={},b3=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var yo=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(yo||{}),_t=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(_t||{}),yt=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(yt||{});function S3(t,e,n,r){let i=function F3(t){if(nx(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(a=>+a);return F_(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(A3))return function L3(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,d),e}(r)}const e=new Date(t);if(!nx(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=vo(n,e)||e;let a,o=[];for(;e;){if(a=b3.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const p=o.pop();if(!p)break;e=p}}let u=i.getTimezoneOffset();r&&(u=tx(r,u),i=function V3(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function k3(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(tx(e,i)-i))}(i,r,!0));let d="";return o.forEach(p=>{const g=function O3(t){if(mD[t])return mD[t];let e;switch(t){case"G":case"GG":case"GGG":e=jt(yt.Eras,Ot.Abbreviated);break;case"GGGG":e=jt(yt.Eras,Ot.Wide);break;case"GGGGG":e=jt(yt.Eras,Ot.Narrow);break;case"y":e=Sn(_t.FullYear,1,0,!1,!0);break;case"yy":e=Sn(_t.FullYear,2,0,!0,!0);break;case"yyy":e=Sn(_t.FullYear,3,0,!1,!0);break;case"yyyy":e=Sn(_t.FullYear,4,0,!1,!0);break;case"Y":e=j_(1);break;case"YY":e=j_(2,!0);break;case"YYY":e=j_(3);break;case"YYYY":e=j_(4);break;case"M":case"L":e=Sn(_t.Month,1,1);break;case"MM":case"LL":e=Sn(_t.Month,2,1);break;case"MMM":e=jt(yt.Months,Ot.Abbreviated);break;case"MMMM":e=jt(yt.Months,Ot.Wide);break;case"MMMMM":e=jt(yt.Months,Ot.Narrow);break;case"LLL":e=jt(yt.Months,Ot.Abbreviated,Hr.Standalone);break;case"LLLL":e=jt(yt.Months,Ot.Wide,Hr.Standalone);break;case"LLLLL":e=jt(yt.Months,Ot.Narrow,Hr.Standalone);break;case"w":e=gD(1);break;case"ww":e=gD(2);break;case"W":e=gD(1,!0);break;case"d":e=Sn(_t.Date,1);break;case"dd":e=Sn(_t.Date,2);break;case"c":case"cc":e=Sn(_t.Day,1);break;case"ccc":e=jt(yt.Days,Ot.Abbreviated,Hr.Standalone);break;case"cccc":e=jt(yt.Days,Ot.Wide,Hr.Standalone);break;case"ccccc":e=jt(yt.Days,Ot.Narrow,Hr.Standalone);break;case"cccccc":e=jt(yt.Days,Ot.Short,Hr.Standalone);break;case"E":case"EE":case"EEE":e=jt(yt.Days,Ot.Abbreviated);break;case"EEEE":e=jt(yt.Days,Ot.Wide);break;case"EEEEE":e=jt(yt.Days,Ot.Narrow);break;case"EEEEEE":e=jt(yt.Days,Ot.Short);break;case"a":case"aa":case"aaa":e=jt(yt.DayPeriods,Ot.Abbreviated);break;case"aaaa":e=jt(yt.DayPeriods,Ot.Wide);break;case"aaaaa":e=jt(yt.DayPeriods,Ot.Narrow);break;case"b":case"bb":case"bbb":e=jt(yt.DayPeriods,Ot.Abbreviated,Hr.Standalone,!0);break;case"bbbb":e=jt(yt.DayPeriods,Ot.Wide,Hr.Standalone,!0);break;case"bbbbb":e=jt(yt.DayPeriods,Ot.Narrow,Hr.Standalone,!0);break;case"B":case"BB":case"BBB":e=jt(yt.DayPeriods,Ot.Abbreviated,Hr.Format,!0);break;case"BBBB":e=jt(yt.DayPeriods,Ot.Wide,Hr.Format,!0);break;case"BBBBB":e=jt(yt.DayPeriods,Ot.Narrow,Hr.Format,!0);break;case"h":e=Sn(_t.Hours,1,-12);break;case"hh":e=Sn(_t.Hours,2,-12);break;case"H":e=Sn(_t.Hours,1);break;case"HH":e=Sn(_t.Hours,2);break;case"m":e=Sn(_t.Minutes,1);break;case"mm":e=Sn(_t.Minutes,2);break;case"s":e=Sn(_t.Seconds,1);break;case"ss":e=Sn(_t.Seconds,2);break;case"S":e=Sn(_t.FractionalSeconds,1);break;case"SS":e=Sn(_t.FractionalSeconds,2);break;case"SSS":e=Sn(_t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=U_(yo.Short);break;case"ZZZZZ":e=U_(yo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=U_(yo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=U_(yo.Long);break;default:return null}return mD[t]=e,e}(p);d+=g?g(i,n,u):"''"===p?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function F_(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function vo(t,e){const n=function p3(t){return jr(t)[Bt.LocaleId]}(t);if(Pf[n]=Pf[n]||{},Pf[n][e])return Pf[n][e];let r="";switch(e){case"shortDate":r=O_(t,pi.Short);break;case"mediumDate":r=O_(t,pi.Medium);break;case"longDate":r=O_(t,pi.Long);break;case"fullDate":r=O_(t,pi.Full);break;case"shortTime":r=k_(t,pi.Short);break;case"mediumTime":r=k_(t,pi.Medium);break;case"longTime":r=k_(t,pi.Long);break;case"fullTime":r=k_(t,pi.Full);break;case"short":const i=vo(t,"shortTime"),s=vo(t,"shortDate");r=L_(V_(t,pi.Short),[i,s]);break;case"medium":const o=vo(t,"mediumTime"),a=vo(t,"mediumDate");r=L_(V_(t,pi.Medium),[o,a]);break;case"long":const u=vo(t,"longTime"),d=vo(t,"longDate");r=L_(V_(t,pi.Long),[u,d]);break;case"full":const p=vo(t,"fullTime"),g=vo(t,"fullDate");r=L_(V_(t,pi.Full),[p,g])}return r&&(Pf[n][e]=r),r}function L_(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function is(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Sn(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function P3(t,e){switch(t){case _t.FullYear:return e.getFullYear();case _t.Month:return e.getMonth();case _t.Date:return e.getDate();case _t.Hours:return e.getHours();case _t.Minutes:return e.getMinutes();case _t.Seconds:return e.getSeconds();case _t.FractionalSeconds:return e.getMilliseconds();case _t.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===_t.Hours)0===a&&-12===n&&(a=12);else if(t===_t.FractionalSeconds)return function R3(t,e){return is(t,3).substring(0,e)}(a,e);const u=Ui(o,vn.MinusSign);return is(a,e,u,r,i)}}function jt(t,e,n=Hr.Format,r=!1){return function(i,s){return function M3(t,e,n,r,i,s){switch(n){case yt.Months:return function _3(t,e,n){const r=jr(t),s=Bi([r[Bt.MonthsFormat],r[Bt.MonthsStandalone]],e);return Bi(s,n)}(e,i,r)[t.getMonth()];case yt.Days:return function m3(t,e,n){const r=jr(t),s=Bi([r[Bt.DaysFormat],r[Bt.DaysStandalone]],e);return Bi(s,n)}(e,i,r)[t.getDay()];case yt.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const d=function E3(t){const e=jr(t);return XN(e),(e[Bt.ExtraData][2]||[]).map(r=>"string"==typeof r?pD(r):[pD(r[0]),pD(r[1])])}(e),p=function w3(t,e,n){const r=jr(t);XN(r);const s=Bi([r[Bt.ExtraData][0],r[Bt.ExtraData][1]],e)||[];return Bi(s,n)||[]}(e,i,r),g=d.findIndex(_=>{if(Array.isArray(_)){const[y,E]=_,C=o>=y.hours&&a>=y.minutes,S=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(C&&S)return!0}else if(C||S)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return p[g]}return function g3(t,e,n){const r=jr(t),s=Bi([r[Bt.DayPeriodsFormat],r[Bt.DayPeriodsStandalone]],e);return Bi(s,n)}(e,i,r)[o<12?0:1];case yt.Eras:return function y3(t,e){return Bi(jr(t)[Bt.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function U_(t){return function(e,n,r){const i=-1*r,s=Ui(n,vn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case yo.Short:return(i>=0?"+":"")+is(o,2,s)+is(Math.abs(i%60),2,s);case yo.ShortGMT:return"GMT"+(i>=0?"+":"")+is(o,1,s);case yo.Long:return"GMT"+(i>=0?"+":"")+is(o,2,s)+":"+is(Math.abs(i%60),2,s);case yo.Extended:return 0===r?"Z":(i>=0?"+":"")+is(o,2,s)+":"+is(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const N3=0,B_=4;function ex(t){return F_(t.getFullYear(),t.getMonth(),t.getDate()+(B_-t.getDay()))}function gD(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=ex(n),o=function x3(t){const e=F_(t,N3,1).getDay();return F_(t,0,1+(e<=B_?B_:B_+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return is(i,t,Ui(r,vn.MinusSign))}}function j_(t,e=!1){return function(n,r){return is(ex(n).getFullYear(),t,Ui(r,vn.MinusSign),e)}}const mD={};function tx(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nx(t){return t instanceof Date&&!isNaN(t.valueOf())}const U3=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ID(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}let DD=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new tq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){cx("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){cx("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ne(rs),ne(go))};static#t=this.\u0275dir=Re({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class tq{constructor(){this.$implicit=null,this.ngIf=null}}function cx(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Dt(e)}'.`)}function ss(t,e){return new j(2100,!1)}const pq=new ue("DATE_PIPE_DEFAULT_TIMEZONE"),gq=new ue("DATE_PIPE_DEFAULT_OPTIONS");let dx=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(null==n||""===n||n!=n)return null;try{return S3(n,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw ss()}}static#e=this.\u0275fac=function(r){return new(r||t)(ne(mo,16),ne(pq,24),ne(gq,24))};static#t=this.\u0275pipe=Vn({name:"date",type:t,pure:!0,standalone:!0})}return t})(),fx=(()=>{class t{constructor(n){this._locale=n}transform(n,r,i){if(!function AD(t){return!(null==t||""===t||t!=t)}(n))return null;i=i||this._locale;try{return function G3(t,e,n){return function yD(t,e,n,r,i,s,o=!1){let a="",u=!1;if(isFinite(t)){let d=function W3(t){let r,i,s,o,a,e=Math.abs(t)+"",n=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}(t);o&&(d=function q3(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(d));let p=e.minInt,g=e.minFrac,_=e.maxFrac;if(s){const R=s.match(U3);if(null===R)throw new Error(`${s} is not a valid digit info`);const U=R[1],te=R[3],ce=R[5];null!=U&&(p=ID(U)),null!=te&&(g=ID(te)),null!=ce?_=ID(ce):null!=te&&g>_&&(_=g)}!function Z3(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const s=Math.min(Math.max(e,i),n);let o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let g=o;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let g=1;g<o;g++)r[g]=0}if(a>=5)if(o-1<0){for(let g=0;g>o;g--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const d=e+t.integerLen,p=r.reduceRight(function(g,_,y,E){return E[y]=(_+=g)<10?_:_-10,u&&(0===E[y]&&y>=d?E.pop():u=!1),_>=10?1:0},0);p&&(r.unshift(p),t.integerLen++)}(d,g,_);let y=d.digits,E=d.integerLen;const C=d.exponent;let S=[];for(u=y.every(R=>!R);E<p;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?S=y.splice(E,y.length):(S=y,y=[0]);const O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(Ui(n,r)),S.length&&(a+=Ui(n,i)+S.join("")),C&&(a+=Ui(n,vn.Exponential)+"+"+C)}else a=Ui(n,vn.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function vD(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";n.posPre=a.substring(0,a.indexOf("#"));for(let p=0;p<u.length;p++){const g=u.charAt(p);"0"===g?n.minFrac=n.maxFrac=p+1:"#"===g?n.maxFrac=p+1:n.posSuf+=g}const d=a.split(",");if(n.gSize=d[1]?d[1].length:0,n.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,s){const p=i.length-n.posPre.length-n.posSuf.length,g=s.indexOf("#");n.negPre=s.substring(0,g).replace(/'/g,""),n.negSuf=s.slice(g+p).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function fD(t,e){return jr(t)[Bt.NumberFormats][e]}(e,x_.Decimal),Ui(e,vn.MinusSign)),e,vn.Group,vn.Decimal,n)}(function bD(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(n),i,r)}catch(s){throw ss()}}static#e=this.\u0275fac=function(r){return new(r||t)(ne(mo,16))};static#t=this.\u0275pipe=Vn({name:"number",type:t,pure:!0,standalone:!0})}return t})();let Tq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({})}return t})();function H_(t){return"server"===t}let Sq=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new Rq(ie(Li),window)})}return t})();class Rq{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Pq(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class e9 extends o3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class PD extends e9{static makeCurrent(){!function s3(t){cD||(cD=t)}(new PD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function t9(){return xf=xf||document.querySelector("base"),xf?xf.getAttribute("href"):null}();return null==n?null:function n9(t){q_=q_||document.createElement("a"),q_.setAttribute("href",t);const e=q_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){xf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Q3(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let q_,xf=null,i9=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const MD=new ue("EventManagerPlugins");let vx=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(ie(MD),ie(wt))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class Ix{constructor(e){this._doc=e}}const ND="ng-app-id";let Ex=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=H_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${ND}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(ND),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(ND,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Li),ie(Qm),ie(CS,8),ie(co))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const xD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},OD=/%COMP%/g,u9=new ue("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Dx(t,e){return e.map(n=>n.replace(OD,t))}let Tx=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=H_(a),this.defaultRenderer=new kD(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yr.ShadowDom&&(r={...r,encapsulation:Yr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof Ax?i.applyToHost(n):i instanceof VD&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Yr.Emulated:s=new Ax(u,d,r,this.appId,p,o,a,g);break;case Yr.ShadowDom:return new h9(u,d,n,r,o,a,this.nonce,g);default:s=new VD(u,d,r,p,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(ie(vx),ie(Ex),ie(Qm),ie(u9),ie(Li),ie(co),ie(wt),ie(CS))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class kD{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(xD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Cx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Cx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=xD[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=xD[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(oa.DashCase|oa.Important)?e.style.setProperty(n,r,i&oa.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&oa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=da().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Cx(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class h9 extends kD{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=Dx(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class VD extends kD{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Dx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ax extends VD{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function c9(t){return"_ngcontent-%COMP%".replace(OD,t)}(d),this.hostAttr=function l9(t){return"_nghost-%COMP%".replace(OD,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let f9=(()=>{class t extends Ix{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Li))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const bx=["alt","control","meta","shift"],p9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let m9=(()=>{class t extends Ix{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>da().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),bx.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=p9[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bx.forEach(o=>{o!==i&&(0,g9[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Li))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const Rx=[{provide:co,useValue:"browser"},{provide:TS,useValue:function _9(){PD.makeCurrent()},multi:!0},{provide:Li,useFactory:function v9(){return function YU(t){EE=t}(document),document},deps:[]}],I9=EN(GG,"browser",Rx),E9=new ue(""),Px=[{provide:A_,useClass:class r9{addToWindow(e){mt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new j(5103,!1);return s},mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),mt.getAllAngularRootElements=()=>e.getAllRootElements(),mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(r=>{const i=mt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?da().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:mN,useClass:Jw,deps:[wt,Xw,A_]},{provide:Jw,useClass:Jw,deps:[wt,Xw,A_]}],Mx=[{provide:PE,useValue:"root"},{provide:ho,useFactory:function y9(){return new ho},deps:[]},{provide:MD,useClass:f9,multi:!0,deps:[Li,wt,co]},{provide:MD,useClass:m9,multi:!0,deps:[Li]},Tx,Ex,vx,{provide:MS,useExisting:Tx},{provide:class Mq{},useClass:i9,deps:[]},[]];let w9=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Qm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(E9,12))};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({providers:[...Mx,...Px],imports:[Tq,qG]})}return t})(),Nx=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Li))};static#t=this.\u0275prov=Ae({token:t,factory:function(r){let i=null;return i=r?new r:function T9(){return new Nx(ie(Li))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;var Ll=Be(534);(0,Ll.registerVersion)("firebase","10.7.2","app");class M9 extends lt{constructor(e,n){super()}schedule(e,n=0){return this}}const W_={setInterval(t,e,...n){const{delegate:r}=W_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=W_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class Vx extends M9{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return W_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&W_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const LD={now:()=>(LD.delegate||Date).now(),delegate:void 0};class Of{constructor(e,n=Of.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Of.now=LD.now;class Fx extends Of{constructor(e,n=Of.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const O9=new class x9 extends Fx{}(class N9 extends Vx{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),Lx=new Fx(Vx);function ar(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?L((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(he(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):gn}const Ux=new ml("ANGULARFIRE2_VERSION");class Bx{constructor(){return((t,e)=>{const n=(0,Ll.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(V9)}}const V9="app-check";function Ul(){}class jx{zone;delegate;constructor(e,n=O9){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class F9{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ul,{},Ul,Ul)),n.pipe(ar({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $x=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new jx(Zone.current)),this.insideAngular=n.run(()=>new jx(Zone.current,Lx)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ie(wt))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gi(t){return function U9(t){return function(n){return(n=n.lift(new F9(t.ngZone))).pipe(mr(t.outsideAngular),nr(t.insideAngular))}}(function Bl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Vu=Be(106);Vu.Z.registerVersion("firebase","10.7.2","app-compat");const H9=["ngOnDestroy"];class Hx{constructor(e){return e}}const Z_=new ue("angularfire2.app.options"),K_=new ue("angularfire2.app.name");function UD(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=Vu.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Vu.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;q9("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Hx(o)}const q9=(t,...e)=>{},W9={provide:Hx,useFactory:UD,deps:[Z_,wt,[new Cu,K_]]};let Z9=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Z_,useValue:n},{provide:K_,useValue:r}]}}constructor(n){Vu.Z.registerVersion("angularfire",Ux.full,"core"),Vu.Z.registerVersion("angularfire",Ux.full,"app-compat"),Vu.Z.registerVersion("angular",NS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ie(co))};static \u0275mod=Or({type:t});static \u0275inj=Mr({providers:[W9]})}return t})();function zx(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function K9(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(Gx("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Q9?" You may need to reload as Firebase is not HMR aware.":""}`),Gx("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const Q9=typeof module<"u"&&!!module.hot,Gx=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];const{isArray:J9}=Array,{getPrototypeOf:X9,prototype:e6,keys:t6}=Object;function qx(t){if(1===t.length){const e=t[0];if(J9(e))return{args:e,keys:null};if(function n6(t){return t&&"object"==typeof t&&X9(t)===e6}(e)){const n=t6(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:r6}=Array;function Wx(t){return Ee(e=>function i6(t,e){return r6(e)?t(...e):t(e)}(t,e))}function Zx(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function BD(...t){const e=hs(t),n=ko(t),{args:r,keys:i}=qx(t);if(0===r.length)return A([],e);const s=new st(function s6(t,e,n=gn){return r=>{Kx(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Kx(e,()=>{const d=A(t[u],e);let p=!1;d.subscribe(he(r,g=>{s[u]=g,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Zx(i,o):gn));return n?s.pipe(Wx(n)):s}function Kx(t,e,n){t?Zn(n,t,e):e()}const Q_=Me(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function jD(...t){return function o6(){return ui(1)}()(A(t,hs(t)))}function Qx(t){return new st(e=>{mn(t()).subscribe(e)})}function kf(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function $D(){return L((t,e)=>{let n=null;t._refCount++;const r=he(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class Yx extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;const n=this.getSubject();e.add(this.source.subscribe(he(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return $D()(this)}}function jl(t){return t<=0?()=>Tn:L((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Y_(...t){const e=hs(t);return L((n,r)=>{(e?jD(t,n,e):jD(t,n)).subscribe(r)})}function os(t,e){return L((n,r)=>{let i=0;n.subscribe(he(r,s=>t.call(e,s,i++)&&r.next(s)))})}function J_(t){return L((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Jx(t=a6){return L((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function a6(){return new Q_}function fa(t,e){const n=arguments.length>=2;return r=>r.pipe(t?os((i,s)=>t(i,s,r)):gn,jl(1),n?J_(e):Jx(()=>new Q_))}function Vf(t,e){return I(e)?Ft(t,e,1):Ft(t,1)}function Fu(t){return L((e,n)=>{let s,r=null,i=!1;r=e.subscribe(he(n,void 0,void 0,o=>{s=mn(t(o,Fu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function X_(t,e){return L(function u6(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(he(o,p=>{const g=d++;u=a?t(u,p,g):(a=!0,p),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function HD(t){return t<=0?()=>Tn:L((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function zD(t){return L((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const We="primary",Ff=Symbol("RouteTitle");class h6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function $l(t){return new h6(t)}function f6(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Xx(t[i],e[i]))return!1;return!0}function Xx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function eO(t){return t.length>0?t[t.length-1]:null}function pa(t){return function Y9(t){return!!t&&(t instanceof st||I(t.lift)&&I(t.subscribe))}(t)?t:yf(t)?A(Promise.resolve(t)):q(t)}const g6={exact:function rO(t,e,n){if(!Lu(t.segments,e.segments)||!ey(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!rO(t.children[r],e.children[r],n))return!1;return!0},subset:iO},tO={exact:function m6(t,e){return Fs(t,e)},subset:function _6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xx(t[n],e[n]))},ignored:()=>!0};function nO(t,e,n){return g6[n.paths](t.root,e.root,n.matrixParams)&&tO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function iO(t,e,n){return sO(t,e,e.segments,n)}function sO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Lu(i,n)||e.hasChildren()||!ey(i,n,r))}if(t.segments.length===n.length){if(!Lu(t.segments,n)||!ey(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!iO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Lu(t.segments,i)&&ey(t.segments,i,r)&&t.children[We])&&sO(t.children[We],e,s,r)}}function ey(t,e,n){return e.every((r,i)=>tO[n](t[i].parameters,r.parameters))}class Hl{constructor(e=new At([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$l(this.queryParams)),this._queryParamMap}toString(){return I6.serialize(this)}}class At{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ty(this)}}class Lf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=$l(this.parameters)),this._parameterMap}toString(){return uO(this)}}function Lu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Uf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return new GD},providedIn:"root"})}return t})();class GD{parse(e){const n=new M6(e);return new Hl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Bf(e.root,!0)}`,r=function D6(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${ny(n)}=${ny(i)}`).join("&"):`${ny(n)}=${ny(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function E6(t){return encodeURI(t)}(e.fragment)}`:""}`}}const I6=new GD;function ty(t){return t.segments.map(e=>uO(e)).join("/")}function Bf(t,e){if(!t.hasChildren())return ty(t);if(e){const n=t.children[We]?Bf(t.children[We],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==We&&r.push(`${i}:${Bf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function v6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===We&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==We&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===We?[Bf(t.children[We],!1)]:[`${i}:${Bf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[We]?`${ty(t)}/${n[0]}`:`${ty(t)}/(${n.join("//")})`}}function oO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ny(t){return oO(t).replace(/%3B/gi,";")}function qD(t){return oO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ry(t){return decodeURIComponent(t)}function aO(t){return ry(t.replace(/\+/g,"%20"))}function uO(t){return`${qD(t.path)}${function w6(t){return Object.keys(t).map(e=>`;${qD(e)}=${qD(t[e])}`).join("")}(t.parameters)}`}const T6=/^[^\/()?;#]+/;function WD(t){const e=t.match(T6);return e?e[0]:""}const C6=/^[^\/()?;=#]+/,b6=/^[^=?&#]+/,R6=/^[^&#]+/;class M6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[We]=new At(e,n)),r}parseSegment(){const e=WD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Lf(ry(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function A6(t){const e=t.match(C6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=WD(this.remaining);i&&(r=i,this.capture(r))}e[ry(n)]=ry(r)}parseQueryParam(e){const n=function S6(t){const e=t.match(b6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function P6(t){const e=t.match(R6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=aO(n),s=aO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=WD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=We);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[We]:new At([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}}function cO(t){return t.segments.length>0?new At([],{[We]:t}):t}function lO(t){const e={};for(const r of Object.keys(t.children)){const s=lO(t.children[r]);if(r===We&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function N6(t){if(1===t.numberOfChildren&&t.children[We]){const e=t.children[We];return new At(t.segments.concat(e.segments),e.children)}return t}(new At(t.segments,e))}function Uu(t){return t instanceof Hl}function dO(t){let e;const i=cO(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new At(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function hO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return ZD(i,i,i,n,r);const s=function O6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new pO(n,e,r)}(e);if(s.toRoot())return ZD(i,i,new At([],{}),n,r);const o=function k6(t,e,n){if(t.isAbsolute)return new sy(e,!0,0);if(!n)return new sy(e,!1,NaN);if(null===n.parent)return new sy(n,!0,0);const r=iy(t.commands[0])?0:1;return function V6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new sy(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?$f(o.segmentGroup,o.index,s.commands):gO(o.segmentGroup,o.index,s.commands);return ZD(i,o.segmentGroup,a,n,r)}function iy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function jf(t){return"object"==typeof t&&null!=t&&t.outlets}function ZD(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),o=t===e?n:fO(t,e,n);const a=cO(lO(o));return new Hl(a,s,i)}function fO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:fO(s,e,n)}),new At(t.segments,r)}class pO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&iy(r[0]))throw new j(4003,!1);const i=r.find(jf);if(i&&i!==eO(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function gO(t,e,n){if(t||(t=new At([],{})),0===t.segments.length&&t.hasChildren())return $f(t,e,n);const r=function L6(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(jf(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!_O(u,d,o))return s;r+=2}else{if(!_O(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new At(t.segments.slice(0,r.pathIndex),{});return s.children[We]=new At(t.segments.slice(r.pathIndex),t.children),$f(s,0,i)}return r.match&&0===i.length?new At(t.segments,{}):r.match&&!t.hasChildren()?KD(t,e,n):r.match?$f(t,0,i):KD(t,e,n)}function $f(t,e,n){if(0===n.length)return new At(t.segments,{});{const r=function F6(t){return jf(t[0])?t[0].outlets:{[We]:t}}(n),i={};if(Object.keys(r).some(s=>s!==We)&&t.children[We]&&1===t.numberOfChildren&&0===t.children[We].segments.length){const s=$f(t.children[We],e,n);return new At(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=gO(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new At(t.segments,i)}}function KD(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(jf(s)){const u=U6(s.outlets);return new At(r,u)}if(0===i&&iy(n[0])){r.push(new Lf(t.segments[e].path,mO(n[0]))),i++;continue}const o=jf(s)?s.outlets[We]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&iy(a)?(r.push(new Lf(o,mO(a))),i+=2):(r.push(new Lf(o,{})),i++)}return new At(r,{})}function U6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=KD(new At([],{}),0,r))}),e}function mO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function _O(t,e,n){return t==n.path&&Fs(e,n.parameters)}const Hf="imperative";class Ls{constructor(e,n){this.id=e,this.url=n}}class oy extends Ls{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ga extends Ls{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zf extends Ls{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zl extends Ls{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class ay extends Ls{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yO extends Ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B6 extends Ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j6 extends Ls{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $6 extends Ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H6 extends Ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class G6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class QD{}class YD{constructor(e){this.url=e}}class Q6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Gf,this.attachRef=null}}let Gf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Q6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class IO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=JD(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=JD(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=XD(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return XD(e,this._root).map(n=>n.value)}}function JD(t,e){if(t===e.value)return e;for(const n of e.children){const r=JD(t,n);if(r)return r}return null}function XD(t,e){if(t===e.value)return[e];for(const n of e.children){const r=XD(t,n);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Gl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class EO extends IO{constructor(e,n){super(e),this.snapshot=n,eT(this,e)}toString(){return this.snapshot.toString()}}function wO(t,e){const n=function Y6(t,e){const o=new uy([],{},{},"",{},We,e,null,{});return new TO("",new Io(o,[]))}(0,e),r=new M([new Lf("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new ql(r,i,o,a,s,We,e,n.root);return u.snapshot=n.root,new EO(new Io(u,[]),n)}class ql{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ee(d=>d[Ff]))??q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ee(e=>$l(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ee(e=>$l(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function J6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class uy{get title(){return this.data?.[Ff]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$l(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$l(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TO extends IO{constructor(e,n){super(n),this.url=e,eT(this,n)}toString(){return CO(this._root)}}function eT(t,e){e.value._routerState=t,e.children.forEach(n=>eT(t,n))}function CO(t){const e=t.children.length>0?` { ${t.children.map(CO).join(", ")} } `:"";return`${t.value}${e}`}function tT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Fs(e.params,n.params)||t.paramsSubject.next(n.params),function p6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Fs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nT(t,e){const n=Fs(t.params,e.params)&&function y6(t,e){return Lu(t,e)&&t.every((n,r)=>Fs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||nT(t.parent,e.parent))}let cy=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=We,this.activateEvents=new ln,this.deactivateEvents=new ln,this.attachEvents=new ln,this.detachEvents=new ln,this.parentContexts=fe(Gf),this.location=fe(rs),this.changeDetector=fe(S_),this.environmentInjector=fe(Vi),this.inputBinder=fe(ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new X6(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Re({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fr]})}return t})();class X6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ql?this.route:e===Gf?this.childContexts:this.parent.get(e,n)}}const ly=new ue("");let AO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=BD([r.queryParams,r.params,r.data]).pipe(gt(([s,o,a],u)=>(a={...s,...o,...a},0===u?q(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function i3(t){const e=tt(t);if(!e)return null;const n=new df(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function qf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function t5(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qf(t,r,i);return qf(t,r)})}(t,e,n);return new Io(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qf(t,a)),o}}const r=function n5(t){return new ql(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>qf(t,s));return new Io(r,i)}}const rT="ngNavigationCancelingError";function bO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Uu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function SO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[rT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function RO(t){return t&&t[rT]}let PO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ys({type:t,selectors:[["ng-component"]],standalone:!0,features:[vM],decls:1,vars:0,template:function(r,i){1&r&&Rl(0,"router-outlet")},dependencies:[cy],encapsulation:2})}return t})();function iT(t){const e=t.children&&t.children.map(iT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==We&&(n.component=PO),n}function as(t){return t.outlet||We}function Wf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class l5{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Gl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Gl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Gl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Gl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new K6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new W6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(tT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Wf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class MO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dy{constructor(e,n){this.component=e,this.route=n}}function d5(t,e,n){const r=t._root;return Zf(r,e?e._root:null,n,[r.value])}function Wl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function aI(t){return null!==Ga(t)}(t)?e.get(t):t:r}function Zf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Gl(e);return t.children.forEach(o=>{(function f5(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function p5(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Lu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Lu(t.url,e.url)||!Fs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nT(t,e)||!Fs(t.queryParams,e.queryParams);default:return!nT(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new MO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Zf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dy(a.outlet.component,o))}else o&&Kf(e,a,i),i.canActivateChecks.push(new MO(r)),Zf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Kf(a,n.getContext(o),i)),i}function Kf(t,e,n){const r=Gl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Kf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new dy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Qf(t){return"function"==typeof t}function NO(t){return t instanceof Q_||"EmptyError"===t?.name}const hy=Symbol("INITIAL_VALUE");function Zl(){return gt(t=>BD(t.map(e=>e.pipe(jl(1),Y_(hy)))).pipe(Ee(e=>{for(const n of e)if(!0!==n){if(n===hy)return hy;if(!1===n||n instanceof Hl)return n}return!0}),os(e=>e!==hy),jl(1)))}function xO(t){return function vi(...t){return Ii(t)}(ar(e=>{if(Uu(e))throw bO(0,e)}),Ee(e=>!0===e))}class fy{constructor(e){this.segmentGroup=e||null}}class OO{constructor(e){this.urlTree=e}}function Kl(t){return kf(new fy(t))}function kO(t){return kf(new OO(t))}class O5{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new j(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return q(r);if(i.numberOfChildren>1||!i.children[We])return kf(new j(4e3,!1));i=i.children[We]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Hl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new At(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const sT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k5(t,e,n,r,i){const s=oT(t,e,n);return s.matched?(r=function i5(t,e){return t.providers&&!t._injector&&(t._injector=Nw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function M5(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?q(i.map(o=>{const a=Wl(o,t);return pa(function I5(t){return t&&Qf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Zl(),xO()):q(!0)}(r,e,n).pipe(Ee(o=>!0===o?s:{...sT}))):q(s)}function oT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...sT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||f6)(n,t,e);if(!i)return{...sT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function VO(t,e,n,r){return n.length>0&&function L5(t,e,n){return n.some(r=>py(t,e,r)&&as(r)!==We)}(t,n,r)?{segmentGroup:new At(e,F5(r,new At(n,t.children))),slicedSegments:[]}:0===n.length&&function U5(t,e,n){return n.some(r=>py(t,e,r))}(t,n,r)?{segmentGroup:new At(t.segments,V5(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new At(t.segments,t.children),slicedSegments:n}}function V5(t,e,n,r,i){const s={};for(const o of r)if(py(t,n,o)&&!i[as(o)]){const a=new At([],{});s[as(o)]=a}return{...i,...s}}function F5(t,e){const n={};n[We]=e;for(const r of t)if(""===r.path&&as(r)!==We){const i=new At([],{});n[as(r)]=i}return n}function py(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class H5{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new O5(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,!1)}recognize(){const e=VO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,We).pipe(Fu(n=>{if(n instanceof OO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof fy?this.noMatchError(n):n}),Ee(n=>{const r=new uy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},We,this.rootComponentType,null,{}),i=new Io(r,n),s=new TO("",i),o=function x6(t,e,n=null,r=null){return hO(dO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,We).pipe(Fu(r=>{throw r instanceof fy?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=DO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(Vf(s=>{const o=r.children[s],a=function u5(t,e){const n=t.filter(r=>as(r)===e);return n.push(...t.filter(r=>as(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),X_((s,o)=>(s.push(...o),s)),J_(null),function c6(t,e){const n=arguments.length>=2;return r=>r.pipe(t?os((i,s)=>t(i,s,r)):gn,HD(1),n?J_(e):Jx(()=>new Q_))}(),Ft(s=>{if(null===s)return Kl(r);const o=FO(s);return function z5(t){t.sort((e,n)=>e.value.outlet===We?-1:n.value.outlet===We?1:e.value.outlet.localeCompare(n.value.outlet))}(o),q(o)}))}processSegment(e,n,r,i,s,o){return A(n).pipe(Vf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Fu(u=>{if(u instanceof fy)return q(null);throw u}))),fa(a=>!!a),Fu(a=>{if(NO(a))return function j5(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?q([]):Kl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function B5(t,e,n,r){return!!(as(t)===r||r!==We&&py(e,n,t))&&("**"===t.path||oT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Kl(i):Kl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?kO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Ft(o=>{const a=new At(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:p}=oT(n,i,s);if(!a)return Kl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?kO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Ft(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?eO(i).parameters:{};a=q({snapshot:new uy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LO(r),as(r),r.component??r._loadedComponent??null,r,UO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=k5(n,r,i,e).pipe(Ee(({matched:u,consumedSegments:d,remainingSegments:p,parameters:g})=>u?{snapshot:new uy(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LO(r),as(r),r.component??r._loadedComponent??null,r,UO(r)),consumedSegments:d,remainingSegments:p}:null));return a.pipe(gt(u=>null===u?Kl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(gt(({routes:d})=>{const p=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:C}=VO(n,_,y,d);if(0===C.length&&E.hasChildren())return this.processChildren(p,d,E).pipe(Ee(O=>null===O?null:[new Io(g,O)]));if(0===d.length&&0===C.length)return q([new Io(g,[])]);const S=as(r)===s;return this.processSegment(p,d,E,C,S?We:s,!0).pipe(Ee(O=>[new Io(g,O)]))}))))}getChildConfig(e,n,r){return n.children?q({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?q({routes:n._loadedRoutes,injector:n._loadedInjector}):function P5(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?q(!0):q(i.map(o=>{const a=Wl(o,t);return pa(function m5(t){return t&&Qf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Zl(),xO())}(e,n,r).pipe(Ft(i=>i?this.configLoader.loadChildren(e,n).pipe(ar(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function x5(t){return kf(SO(!1,3))}())):q({routes:[],injector:e})}}function G5(t){const e=t.value.routeConfig;return e&&""===e.path}function FO(t){const e=[],n=new Set;for(const r of t){if(!G5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=FO(r.children);e.push(new Io(r.value,i))}return e.filter(r=>!n.has(r))}function LO(t){return t.data||{}}function UO(t){return t.resolve||{}}function BO(t){return"string"==typeof t.title||null===t.title}function aT(t){return gt(e=>{const n=t(e);return n?A(n).pipe(Ee(()=>e)):q(e)})}const Ql=new ue("ROUTES");let uT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=fe(hN)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=pa(n.loadComponent()).pipe(Ee(jO),ar(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),zD(()=>{this.componentLoaders.delete(n)})),i=new Yx(r,()=>new $).pipe($D());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function J5(t,e,n,r){return pa(t.loadChildren()).pipe(Ee(jO),Ft(i=>i instanceof _M||Array.isArray(i)?q(i):A(e.compileModuleAsync(i))),Ee(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Ql,[],{optional:!0,self:!0}).flat()),{routes:o.map(iT),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(zD(()=>{this.childrenLoaders.delete(r)})),o=new Yx(s,()=>new $).pipe($D());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jO(t){return function X5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let gy=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=fe(uT),this.environmentInjector=fe(Vi),this.urlSerializer=fe(Uf),this.rootContexts=fe(Gf),this.inputBindingEnabled=null!==fe(ly,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new G6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new z6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(os(s=>0!==s.id),Ee(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),gt(s=>{this.currentTransition=s;let o=!1,a=!1;return q(s).pipe(ar(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gt(u=>{const d=u.currentBrowserUrl.toString(),p=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new zl(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),Tn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(gt(_=>{const y=this.transitions?.getValue();return this.events.next(new oy(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?Tn:Promise.resolve(_)}),function q5(t,e,n,r,i,s){return Ft(o=>function $5(t,e,n,r,i,s,o="emptyOnly"){return new H5(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(Ee(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ar(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new yO(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(p&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:C,extras:S}=u,O=new oy(_,this.urlSerializer.serialize(y),E,C);this.events.next(O);const R=wO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},q(s)}{const _="";return this.events.next(new zl(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),Tn}}),ar(u=>{const d=new B6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ee(u=>(this.currentTransition=s={...u,guards:d5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function w5(t,e){return Ft(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?q({...n,guardsResult:!0}):function D5(t,e,n,r){return A(t).pipe(Ft(i=>function R5(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?q(s.map(a=>{const u=Wf(e)??i,d=Wl(a,u);return pa(function v5(t){return t&&Qf(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(fa())})).pipe(Zl()):q(!0)}(i.component,i.route,n,e,r)),fa(i=>!0!==i,!0))}(o,r,i,t).pipe(Ft(a=>a&&function g5(t){return"boolean"==typeof t}(a)?function T5(t,e,n,r){return A(e).pipe(Vf(i=>jD(function A5(t,e){return null!==t&&e&&e(new q6(t)),q(!0)}(i.route.parent,r),function C5(t,e){return null!==t&&e&&e(new Z6(t)),q(!0)}(i.route,r),function S5(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function h5(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Qx(()=>q(o.guards.map(u=>{const d=Wf(o.node)??n,p=Wl(u,d);return pa(function y5(t){return t&&Qf(t.canActivateChild)}(p)?p.canActivateChild(r,t):d.runInContext(()=>p(r,t))).pipe(fa())})).pipe(Zl())));return q(s).pipe(Zl())}(t,i.path,n),function b5(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return q(!0);const i=r.map(s=>Qx(()=>{const o=Wf(e)??n,a=Wl(s,o);return pa(function _5(t){return t&&Qf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(fa())}));return q(i).pipe(Zl())}(t,i.route,n))),fa(i=>!0!==i,!0))}(r,s,t,e):q(a)),Ee(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),ar(u=>{if(s.guardsResult=u.guardsResult,Uu(u.guardsResult))throw bO(0,u.guardsResult);const d=new j6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),os(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),aT(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(ar(d=>{const p=new $6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),gt(d=>{let p=!1;return q(d).pipe(function W5(t,e){return Ft(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return q(n);let s=0;return A(i).pipe(Vf(o=>function Z5(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!BO(i)&&(s[Ff]=i.title),function K5(t,e,n,r){const i=function Q5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return q({});const s={};return A(i).pipe(Ft(o=>function Y5(t,e,n,r){const i=Wf(e)??r,s=Wl(t,i);return pa(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(fa(),ar(a=>{s[o]=a}))),HD(1),function l6(t){return Ee(()=>t)}(s),Fu(o=>NO(o)?Tn:kf(o)))}(s,t,e,r).pipe(Ee(o=>(t._resolvedData=o,t.data=DO(t,n).resolve,i&&BO(i)&&(t.data[Ff]=i.title),null)))}(o.route,r,t,e)),ar(()=>s++),HD(1),Ft(o=>s===i.length?q(n):Tn))})}(n.paramsInheritanceStrategy,this.environmentInjector),ar({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",2)}}))}),ar(d=>{const p=new H6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),aT(u=>{const d=p=>{const g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ar(_=>{p.component=_}),Ee(()=>{})));for(const _ of p.children)g.push(...d(_));return g};return BD(d(u.targetSnapshot.root)).pipe(J_(),jl(1))}),aT(()=>this.afterPreactivation()),Ee(u=>{const d=function e5(t,e,n){const r=qf(t,e._root,n?n._root:void 0);return new EO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),ar(()=>{this.events.next(new QD)}),((t,e,n,r)=>Ee(i=>(new l5(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),jl(1),ar({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ga(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function d6(t){return L((e,n)=>{mn(t).subscribe(he(n,()=>n.complete(),Ie)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(ar(u=>{throw u}))),zD(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Fu(u=>{if(a=!0,RO(u))this.events.next(new zf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function r5(t){return RO(t)&&Uu(t.url)}(u)?this.events.next(new YD(u.url)):s.resolve(!1);else{this.events.next(new ay(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return Tn}))}))}cancelNavigationTransition(n,r,i){const s=new zf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $O(t){return t!==Hf}let HO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===We);return r}getResolvedTitleForRoute(n){return n.data[Ff]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return fe(e8)},providedIn:"root"})}return t})(),e8=(()=>{class t extends HO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Nx))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),t8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return fe(r8)},providedIn:"root"})}return t})();class n8{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let r8=(()=>{class t extends n8{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const my=new ue("",{providedIn:"root",factory:()=>({})});let i8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return fe(s8)},providedIn:"root"})}return t})(),s8=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Yf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Yf||{});function zO(t,e){t.events.pipe(os(n=>n instanceof ga||n instanceof zf||n instanceof ay||n instanceof zl),Ee(n=>n instanceof ga||n instanceof zl?Yf.COMPLETE:n instanceof zf&&(0===n.code||1===n.code)?Yf.REDIRECTING:Yf.FAILED),os(n=>n!==Yf.REDIRECTING),jl(1)).subscribe(()=>{e()})}function o8(t){throw t}function a8(t,e,n){return e.parse("/")}const u8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ji=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=fe(lN),this.isNgZoneEnabled=!1,this._events=new $,this.options=fe(my,{optional:!0})||{},this.pendingTasks=fe(dN),this.errorHandler=this.options.errorHandler||o8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||a8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=fe(i8),this.routeReuseStrategy=fe(t8),this.titleStrategy=fe(HO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=fe(Ql,{optional:!0})?.flat()??[],this.navigationTransitions=fe(gy),this.urlSerializer=fe(Uf),this.location=fe(hD),this.componentInputBindingEnabled=!!fe(ly,{optional:!0}),this.eventsSubscription=new lt,this.isNgZoneEnabled=fe(wt)instanceof wt&&wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Hl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(GO(r)&&this._events.next(r));if(r instanceof oy)$O(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof zl)this.rawUrlTree=i.rawUrl;else if(r instanceof yO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof QD)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof zf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof YD){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$O(i.source)};this.scheduleNavigation(s,Hf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof ay&&this.restoreHistory(i,!0),r instanceof ga&&(this.navigated=!0),GO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(iT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{g=dO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return hO(g,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Uu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Hf,null,r)}navigate(n,r={skipLocationChange:!1}){return function l8(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new j(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...u8}:!1===r?{...c8}:r,Uu(n))return nO(this.currentUrlTree,n,i);const s=this.parseUrl(n);return nO(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const p=this.pendingTasks.add();return zO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GO(t){return!(t instanceof QD||t instanceof YD)}let _y=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof ga&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function gS(t,e,n){return function vB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?pS:fS}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(ne(ji),ne(ql),function Xc(t){return function WI(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Pg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(yn(),t)}("tabindex"),ne(lo),ne(ti),ne(Ou))};static#t=this.\u0275dir=Re({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ut("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&xs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Vl],skipLocationChange:["skipLocationChange","skipLocationChange",Vl],replaceUrl:["replaceUrl","replaceUrl",Vl],routerLink:"routerLink"},standalone:!0,features:[PR,Fr]})}return t})();class qO{}let f8=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(os(n=>n instanceof ga),Vf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Nw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(ui())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):q(null);const s=i.pipe(Ft(o=>null===o?q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(ui()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(ji),ie(hN),ie(Vi),ie(qO),ie(uT))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cT=new ue("");let WO=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof oy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ga?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof zl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof vO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function rR(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function Eo(t,e){return{\u0275kind:t,\u0275providers:e}}function KO(){const t=fe(hi);return e=>{const n=t.get(kl);if(e!==n.components[0])return;const r=t.get(ji),i=t.get(QO);1===t.get(lT)&&r.initialNavigation(),t.get(YO,null,et.Optional)?.setUpPreloading(),t.get(cT,null,et.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const QO=new ue("",{factory:()=>new $}),lT=new ue("",{providedIn:"root",factory:()=>1}),YO=new ue("");function _8(t){return Eo(0,[{provide:YO,useExisting:f8},{provide:qO,useExisting:t}])}const JO=new ue("ROUTER_FORROOT_GUARD"),v8=[hD,{provide:Uf,useClass:GD},ji,Gf,{provide:ql,useFactory:function ZO(t){return t.routerState.root},deps:[ji]},uT,[]];function I8(){return new vN("Router",ji)}let XO=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[v8,[],{provide:Ql,multi:!0,useValue:n},{provide:JO,useFactory:T8,deps:[[ji,new Cu,new rl]]},{provide:my,useValue:r||{}},r?.useHash?{provide:Ou,useClass:c3}:{provide:Ou,useClass:QN},{provide:cT,useFactory:()=>{const t=fe(Sq),e=fe(wt),n=fe(my),r=fe(gy),i=fe(Uf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new WO(i,r,t,e,n)}},r?.preloadingStrategy?_8(r.preloadingStrategy).\u0275providers:[],{provide:vN,multi:!0,useFactory:I8},r?.initialNavigation?C8(r):[],r?.bindToComponentInputs?Eo(8,[AO,{provide:ly,useExisting:AO}]).\u0275providers:[],[{provide:e1,useFactory:KO},{provide:nD,multi:!0,useExisting:e1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ql,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(JO,8))};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({})}return t})();function T8(t){return"guarded"}function C8(t){return["disabled"===t.initialNavigation?Eo(3,[{provide:Zw,multi:!0,useFactory:()=>{const e=fe(ji);return()=>{e.setUpLocationChangeListener()}}},{provide:lT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Eo(2,[{provide:lT,useValue:0},{provide:Zw,multi:!0,deps:[hi],useFactory:e=>{const n=e.get(a3,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(ji),s=e.get(QO);zO(i,()=>{r(!0)}),e.get(gy).afterPreactivation=()=>(r(!0),s.closed?q(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const e1=new ue("");let b8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ys({type:t,selectors:[["app-dashboard"]],decls:9,vars:0,consts:[[1,"h-16","w-full","bg-teal-500","rounded-md","mt-1","mx-1"],[1,"flex","flex-row","mx-4","mt-1"],["href","#","routerLink","student_information"],[1,"px-3","py-2","rounded-lg","bg-purple-800","mx-3","mt-2","text-xl","text-white"],["href","#","routerLink","get_information"]],template:function(r,i){1&r&&(be(0,"nav",0)(1,"div",1)(2,"a",2)(3,"button",3),Ve(4,"Collect Student Info "),Te()(),be(5,"a",4)(6,"button",3),Ve(7,"Get Student Info "),Te()()()(),Rl(8,"router-outlet"))},dependencies:[cy,_y]})}return t})();Be(230);class S8 extends ${constructor(e=1/0,n=1/0,r=LD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function t1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,xe({connector:()=>new S8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function n1(t,e){return I(e)?gt(()=>t,e):gt(()=>t)}const r1=new ue("angularfire2.auth.use-emulator"),i1=new ue("angularfire2.auth.settings"),s1=new ue("angularfire2.auth.tenant-id"),o1=new ue("angularfire2.auth.langugage-code"),a1=new ue("angularfire2.auth.use-device-language"),u1=new ue("angularfire.auth.persistence"),c1=(t,e,n,r,i,s,o,a)=>zx(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))u.settings[d]=p;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let l1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,p,g,_,y){const E=new $,C=q(void 0).pipe(nr(o.outsideAngular),gt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Be.bind(Be,230)))),Ee(()=>UD(n,s,r)),Ee(S=>c1(S,s,a,d,p,g,u,_)),t1({bufferSize:1,refCount:!1}));if(H_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=q(null);else{C.pipe(fa()).subscribe();const S=C.pipe(gt(U=>U.getRedirectResult().then(te=>te,()=>null)),gi,t1({bufferSize:1,refCount:!1})),O=C.pipe(gt(U=>new st(te=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(ce=>te.next(ce),ce=>te.error(ce),()=>te.complete()))})))),R=C.pipe(gt(U=>new st(te=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(ce=>te.next(ce),ce=>te.error(ce),()=>te.complete()))}))));this.authState=S.pipe(n1(O),mr(o.outsideAngular),nr(o.insideAngular)),this.user=S.pipe(n1(R),mr(o.outsideAngular),nr(o.insideAngular)),this.idToken=this.user.pipe(gt(U=>U?A(U.getIdToken()):q(null))),this.idTokenResult=this.user.pipe(gt(U=>U?A(U.getIdTokenResult()):q(null))),this.credential=G(S,E,this.authState.pipe(os(U=>!U))).pipe(Ee(U=>U?.user?U:null),mr(o.outsideAngular),nr(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(H9.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,C,s,{spy:{apply:(S,O,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(U=>E.next(U))}}})}static \u0275fac=function(r){return new(r||t)(ie(Z_),ie(K_,8),ie(co),ie(wt),ie($x),ie(r1,8),ie(i1,8),ie(s1,8),ie(o1,8),ie(a1,8),ie(u1,8),ie(Bx,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function dT(){return L((t,e)=>{let n,r=!1;t.subscribe(he(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var de,W=Be(861),d1=Be(537),Us=Be(879),vt=Be(58),P8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},us={},hT=hT||{},$e=P8||self;function yy(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Jf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var fT="closure_uid_"+(1e9*Math.random()>>>0),N8=0;function x8(t,e,n){return t.call.apply(t.bind,arguments)}function O8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dr(t,e,n){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?x8:O8).apply(null,arguments)}function vy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Qn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ma(){this.s=this.s,this.o=this.o}ma.prototype.s=!1,ma.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function M8(t){Object.prototype.hasOwnProperty.call(t,fT)&&t[fT]||(t[fT]=++N8)}(this)},ma.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const h1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function pT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function f1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(yy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Tr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tr.prototype.h=function(){this.defaultPrevented=!0};var V8=function(){if(!$e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};$e.addEventListener("test",n,e),$e.removeEventListener("test",n,e)}catch{}return t}();function Xf(t){return/^[\s\xa0]*$/.test(t)}function Iy(){var t=$e.navigator;return t&&(t=t.userAgent)?t:""}function Bs(t){return-1!=Iy().indexOf(t)}function gT(t){return gT[" "](t),t}gT[" "]=function(){};var _T,t,L8=Bs("Opera"),Yl=Bs("Trident")||Bs("MSIE"),p1=Bs("Edge"),mT=p1||Yl,g1=Bs("Gecko")&&!(-1!=Iy().toLowerCase().indexOf("webkit")&&!Bs("Edge"))&&!(Bs("Trident")||Bs("MSIE"))&&!Bs("Edge"),U8=-1!=Iy().toLowerCase().indexOf("webkit")&&!Bs("Edge");function m1(){var t=$e.document;return t?t.documentMode:void 0}e:{var yT="",vT=(t=Iy(),g1?/rv:([^\);]+)(\)|;)/.exec(t):p1?/Edge\/([\d\.]+)/.exec(t):Yl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):U8?/WebKit\/(\S+)/.exec(t):L8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(vT&&(yT=vT?vT[1]:""),Yl){var IT=m1();if(null!=IT&&IT>parseFloat(yT)){_T=String(IT);break e}}_T=yT}var B8=$e.document&&Yl&&(m1()||parseInt(_T,10))||void 0;function ep(t,e){if(Tr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(g1){e:{try{gT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:j8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ep.$.h.call(this)}}Qn(ep,Tr);var j8={2:"touch",3:"pen",4:"mouse"};ep.prototype.h=function(){ep.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tp="closure_listenable_"+(1e6*Math.random()|0),$8=0;function H8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++$8,this.fa=this.ia=!1}function Ey(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function wT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function y1(t){const e={};for(const n in t)e[n]=t[n];return e}const v1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<v1.length;s++)n=v1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wy(t){this.src=t,this.g={},this.h=0}function DT(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=h1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ey(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function TT(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}wy.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=TT(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new H8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var CT="closure_lm_"+(1e6*Math.random()|0),AT={};function E1(t,e,n,r,i){if(r&&r.once)return D1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)E1(t,e[s],n,r,i);return null}return n=PT(n),t&&t[tp]?t.O(e,n,Jf(r)?!!r.capture:!!r,i):w1(t,e,n,!1,r,i)}function w1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Jf(i)?!!i.capture:!!i,a=ST(t);if(a||(t[CT]=a=new wy(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function G8(){const e=q8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)V8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(C1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function D1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)D1(t,e[s],n,r,i);return null}return n=PT(n),t&&t[tp]?t.P(e,n,Jf(r)?!!r.capture:!!r,i):w1(t,e,n,!0,r,i)}function T1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)T1(t,e[s],n,r,i);else r=Jf(r)?!!r.capture:!!r,n=PT(n),t&&t[tp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=TT(s=t.g[e],n,r,i))&&(Ey(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=ST(t))&&(e=t.g[e.toString()],t=-1,e&&(t=TT(e,n,r,i)),(n=-1<t?e[t]:null)&&bT(n))}function bT(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[tp])DT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(C1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ST(e))?(DT(n,t),0==n.h&&(n.src=null,e[CT]=null)):Ey(t)}}}function C1(t){return t in AT?AT[t]:AT[t]="on"+t}function q8(t,e){if(t.fa)t=!0;else{e=new ep(e,this);var n=t.listener,r=t.la||t.src;t.ia&&bT(t),t=n.call(r,e)}return t}function ST(t){return(t=t[CT])instanceof wy?t:null}var RT="__closure_events_fn_"+(1e9*Math.random()>>>0);function PT(t){return"function"==typeof t?t:(t[RT]||(t[RT]=function(e){return t.handleEvent(e)}),t[RT])}function Yn(){ma.call(this),this.i=new wy(this),this.S=this,this.J=null}function ur(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Tr(e,t);else if(e instanceof Tr)e.target=e.target||t;else{var i=e;I1(e=new Tr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Dy(o,r,!0,e)&&i}if(i=Dy(o=e.g=t,r,!0,e)&&i,i=Dy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Dy(o=e.g=n[s],r,!1,e)&&i}function Dy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&DT(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Qn(Yn,ma),Yn.prototype[tp]=!0,Yn.prototype.removeEventListener=function(t,e,n,r){T1(this,t,e,n,r)},Yn.prototype.N=function(){if(Yn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ey(n[r]);delete t.g[e],t.h--}}this.J=null},Yn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Yn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var MT=$e.JSON.stringify;function Z8(){var t=NT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var A1=new class W8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Q8,t=>t.reset());class Q8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Y8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function J8(t){$e.setTimeout(()=>{throw t},0)}let np,rp=!1,NT=new class K8{constructor(){this.h=this.g=null}add(e,n){const r=A1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},b1=()=>{const t=$e.Promise.resolve(void 0);np=()=>{t.then(X8)}};var X8=()=>{for(var t;t=Z8();){try{t.h.call(t.g)}catch(n){J8(n)}var e=A1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rp=!1};function Ty(t,e){Yn.call(this),this.h=t||1,this.g=e||$e,this.j=Dr(this.qb,this),this.l=Date.now()}function xT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function OT(t,e,n){if("function"==typeof t)n&&(t=Dr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Dr(t.handleEvent,t)}return 2147483647<Number(e)?-1:$e.setTimeout(t,e||0)}function S1(t){t.g=OT(()=>{t.g=null,t.i&&(t.i=!1,S1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Qn(Ty,Yn),(de=Ty.prototype).ga=!1,de.T=null,de.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ur(this,"tick"),this.ga&&(xT(this),this.start()))}},de.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},de.N=function(){Ty.$.N.call(this),xT(this),delete this.g};class eW extends ma{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:S1(this)}N(){super.N(),this.g&&($e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ip(t){ma.call(this),this.h=t,this.g={}}Qn(ip,ma);var R1=[];function P1(t,e,n,r){Array.isArray(n)||(n&&(R1[0]=n.toString()),n=R1);for(var i=0;i<n.length;i++){var s=E1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function M1(t){wT(t.g,function(e,n){this.g.hasOwnProperty(n)&&bT(e)},t),t.g={}}function Cy(){this.g=!0}function Jl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function iW(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return MT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}ip.prototype.N=function(){ip.$.N.call(this),M1(this)},ip.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cy.prototype.Ea=function(){this.g=!1},Cy.prototype.info=function(){};var Bu={},N1=null;function Ay(){return N1=N1||new Yn}function x1(t){Tr.call(this,Bu.Ta,t)}function sp(t){const e=Ay();ur(e,new x1(e))}function O1(t,e){Tr.call(this,Bu.STAT_EVENT,t),this.stat=e}function zr(t){const e=Ay();ur(e,new O1(e,t))}function k1(t,e){Tr.call(this,Bu.Ua,t),this.size=e}function op(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $e.setTimeout(function(){t()},e)}Bu.Ta="serverreachability",Qn(x1,Tr),Bu.STAT_EVENT="statevent",Qn(O1,Tr),Bu.Ua="timingevent",Qn(k1,Tr);var by={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},V1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kT(){}function L1(){}kT.prototype.h=null;var LT,ap={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function VT(){Tr.call(this,"d")}function FT(){Tr.call(this,"c")}function Sy(){}function up(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ip(this),this.P=sW,this.V=new Ty(t=mT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new U1}function U1(){this.i=null,this.g="",this.h=!1}Qn(VT,Tr),Qn(FT,Tr),Qn(Sy,kT),Sy.prototype.g=function(){return new XMLHttpRequest},Sy.prototype.i=function(){return{}},LT=new Sy;var sW=45e3,B1={},UT={};function BT(t,e,n){t.L=1,t.A=Ny(wo(e)),t.u=n,t.S=!0,j1(t,null)}function j1(t,e){t.G=Date.now(),cp(t),t.B=wo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Y1(n.i,"t",r),t.o=0,n=t.l.J,t.h=new U1,t.g=Ek(t.l,n?e:null,!t.u),0<t.O&&(t.M=new eW(Dr(t.Pa,t,t.g),t.O)),P1(t.U,t.g,"readystatechange",t.nb),e=t.I?y1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),sp(),function tW(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");o=2<=g.length&&"type"==g[1]?o+(p+"=")+d+"&":o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function $1(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function H1(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=oW(t,n),i==UT){4==e&&(t.s=4,zr(14),r=!1),Jl(t.j,t.m,null,"[Incomplete Response]");break}if(i==B1){t.s=4,zr(15),Jl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Jl(t.j,t.m,i,null),jT(t,i)}$1(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,zr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ZT(e),e.M=!0,zr(11))):(Jl(t.j,t.m,n,"[Invalid Chunked Response]"),ju(t),lp(t))}function oW(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?UT:(n=Number(e.substring(n,r)),isNaN(n)?B1:(r+=1)+n>e.length?UT:(e=e.slice(r,r+n),t.o=r+n,e))}function cp(t){t.Y=Date.now()+t.P,z1(t,t.P)}function z1(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=op(Dr(t.lb,t),e)}function Ry(t){t.C&&($e.clearTimeout(t.C),t.C=null)}function lp(t){0==t.l.H||t.J||_k(t.l,t)}function ju(t){Ry(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,xT(t.V),M1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function jT(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||$T(n.i,t)))if(!t.K&&$T(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Ly(n),Vy(n)}WT(n),zr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=op(Dr(n.ib,n),6e3));if(1>=ek(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hu(n,11)}else if((t.K||n.g==t)&&Ly(n),!Xf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const p=d[3];null!=p&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(HT(s,s.h),s.h=null))}if(r.F){const C=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,Kt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Ik(r,r.J?r.pa:null,r.Y),o.K){tk(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Ry(a),cp(a)),r.g=o}else gk(r);0<n.j.length&&Fy(n)}else"stop"!=d[0]&&"close"!=d[0]||Hu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Hu(n,7):qT(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}sp()}catch{}}function G1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yy(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function uW(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(yy(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function aW(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(yy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(de=up.prototype).setTimeout=function(t){this.P=t},de.nb=function(t){t=t.target;const e=this.M;e&&3==js(t)?e.l():this.Pa(t)},de.Pa=function(t){try{if(t==this.g)e:{const p=js(this.g);var e=this.g.Ia();if(this.g.da(),!(3>p)&&(3!=p||mT||this.g&&(this.h.h||this.g.ja()||ck(this.g)))){this.J||4!=p||7==e||sp(),Ry(this);var n=this.g.da();this.ca=n;t:if($1(this)){var r=ck(this.g);t="";var i=r.length,s=4==js(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ju(this),lp(this);var o="";break t}this.h.i=new $e.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function nW(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xf(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,zr(12),ju(this),lp(this);break e}Jl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jT(this,n)}this.S?(H1(this,p,o),mT&&this.i&&3==p&&(P1(this.U,this.V,"tick",this.mb),this.V.start())):(Jl(this.j,this.m,o,null),jT(this,o)),4==p&&ju(this),this.i&&!this.J&&(4==p?_k(this.l,this):(this.i=!1,cp(this)))}else(function AW(t){const e={};t=(t.g&&2<=js(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Xf(t[r]))continue;var n=Y8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function z8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,zr(12)):(this.s=0,zr(13)),ju(this),lp(this)}}}catch{}},de.mb=function(){if(this.g){var t=js(this.g),e=this.g.ja();this.o<e.length&&(Ry(this),H1(this,t,e),this.i&&4!=t&&cp(this))}},de.cancel=function(){this.J=!0,ju(this)},de.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function rW(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(sp(),zr(17)),ju(this),this.s=2,lp(this)):z1(this,this.Y-t)};var q1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $u(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $u){this.h=t.h,Py(this,t.j),this.s=t.s,this.g=t.g,My(this,t.m),this.l=t.l;var e=t.i,n=new fp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),W1(this,n),this.o=t.o}else t&&(e=String(t).match(q1))?(this.h=!1,Py(this,e[1]||"",!0),this.s=dp(e[2]||""),this.g=dp(e[3]||"",!0),My(this,e[4]),this.l=dp(e[5]||"",!0),W1(this,e[6]||"",!0),this.o=dp(e[7]||"")):(this.h=!1,this.i=new fp(null,this.h))}function wo(t){return new $u(t)}function Py(t,e,n){t.j=n?dp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function My(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function W1(t,e,n){e instanceof fp?(t.i=e,function gW(t,e){e&&!t.j&&(_a(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(K1(this,r),Y1(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=hp(e,fW)),t.i=new fp(e,t.h))}function Kt(t,e,n){t.i.set(e,n)}function Ny(t){return Kt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function dp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,lW),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lW(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$u.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hp(e,Z1,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(hp(e,Z1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(hp(n,"/"==n.charAt(0)?hW:dW,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hp(n,pW)),t.join("")};var Z1=/[#\/\?@]/g,dW=/[#\?:]/g,hW=/[#\?]/g,fW=/[#\?@]/g,pW=/#/g;function fp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _a(t){t.g||(t.g=new Map,t.h=0,t.i&&function cW(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function K1(t,e){_a(t),e=Xl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Q1(t,e){return _a(t),e=Xl(t,e),t.g.has(e)}function Y1(t,e,n){K1(t,e),0<n.length&&(t.i=null,t.g.set(Xl(t,e),pT(n)),t.h+=n.length)}function Xl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function J1(t){this.l=t||_W,t=$e.PerformanceNavigationTiming?0<(t=$e.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($e.g&&$e.g.Ka&&$e.g.Ka()&&$e.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(de=fp.prototype).add=function(t,e){_a(this),this.i=null,t=Xl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},de.forEach=function(t,e){_a(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},de.ta=function(){_a(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},de.Z=function(t){_a(this);let e=[];if("string"==typeof t)Q1(this,t)&&(e=e.concat(this.g.get(Xl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},de.set=function(t,e){return _a(this),this.i=null,Q1(this,t=Xl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},de.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},de.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var _W=10;function X1(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ek(t){return t.h?1:t.g?t.g.size:0}function $T(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function HT(t,e){t.g?t.g.add(e):t.h=e}function tk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function nk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return pT(t.i)}J1.prototype.cancel=function(){if(this.i=nk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var yW=class{stringify(t){return $e.JSON.stringify(t,void 0)}parse(t){return $e.JSON.parse(t,void 0)}};function vW(){this.g=new yW}function IW(t,e,n){const r=n||"";try{G1(t,function(i,s){let o=i;Jf(i)&&(o=MT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pp(t){this.l=t.ec||null,this.j=t.ob||!1}function Oy(t,e){Yn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qn(pp,kT),pp.prototype.g=function(){return new Oy(this.l,this.j)},pp.prototype.i=function(t){return function(){return t}}({}),Qn(Oy,Yn);var zT=0;function rk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function gp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mp(t)}function mp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(de=Oy.prototype).open=function(t,e){if(this.readyState!=zT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mp(this)},de.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||$e).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},de.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gp(this)),this.readyState=zT},de.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mp(this)),this.g&&(this.readyState=3,mp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $e.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},de.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gp(this):mp(this),3==this.readyState&&rk(this)}},de.Za=function(t){this.g&&(this.response=this.responseText=t,gp(this))},de.Ya=function(t){this.g&&(this.response=t,gp(this))},de.ka=function(){this.g&&gp(this)},de.setRequestHeader=function(t,e){this.v.append(t,e)},de.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},de.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Oy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var wW=$e.JSON.parse;function hn(t){Yn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ik,this.L=this.M=!1}Qn(hn,Yn);var ik="",DW=/^https?$/i,TW=["POST","PUT"];function sk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ok(t),ky(t)}function ok(t){t.F||(t.F=!0,ur(t,"complete"),ur(t,"error"))}function ak(t){if(t.h&&typeof hT<"u"&&(!t.C[1]||4!=js(t)||2!=t.da()))if(t.v&&4==js(t))OT(t.La,0,t);else if(ur(t,"readystatechange"),4==js(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(q1)[1]||null;!i&&$e.self&&$e.self.location&&(i=$e.self.location.protocol.slice(0,-1)),r=!DW.test(i?i.toLowerCase():"")}n=r}if(n)ur(t,"complete"),ur(t,"success");else{t.m=6;try{var s=2<js(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ok(t)}}finally{ky(t)}}}function ky(t,e){if(t.g){uk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ur(t,"ready");try{n.onreadystatechange=r}catch{}}}function uk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&($e.clearTimeout(t.A),t.A=null)}function js(t){return t.g?t.g.readyState:0}function ck(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ik:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function lk(t){let e="";return wT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function GT(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=lk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Kt(t,e,n))}function _p(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dk(t){this.Ga=0,this.j=[],this.l=new Cy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_p("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_p("baseRetryDelayMs",5e3,t),this.hb=_p("retryDelaySeedMs",1e4,t),this.eb=_p("forwardChannelMaxRetries",2,t),this.xa=_p("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new J1(t&&t.concurrentRequestLimit),this.Ja=new vW,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qT(t){if(hk(t),3==t.H){var e=t.W++,n=wo(t.I);if(Kt(n,"SID",t.K),Kt(n,"RID",e),Kt(n,"TYPE","terminate"),yp(t,n),(e=new up(t,t.l,e)).L=2,e.A=Ny(wo(n)),n=!1,$e.navigator&&$e.navigator.sendBeacon)try{n=$e.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&$e.Image&&((new Image).src=e.A,n=!0),n||(e.g=Ek(e.l,null),e.g.ha(e.A)),e.G=Date.now(),cp(e)}vk(t)}function Vy(t){t.g&&(ZT(t),t.g.cancel(),t.g=null)}function hk(t){Vy(t),t.u&&($e.clearTimeout(t.u),t.u=null),Ly(t),t.i.cancel(),t.m&&("number"==typeof t.m&&$e.clearTimeout(t.m),t.m=null)}function Fy(t){if(!X1(t.i)&&!t.m){t.m=!0;var e=t.Na;np||b1(),rp||(np(),rp=!0),NT.add(e,t),t.C=0}}function fk(t,e){var n;n=e?e.m:t.W++;const r=wo(t.I);Kt(r,"SID",t.K),Kt(r,"RID",n),Kt(r,"AID",t.V),yp(t,r),t.o&&t.s&&GT(r,t.o,t.s),n=new up(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=pk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),HT(t.i,n),BT(n,r,e)}function yp(t,e){t.na&&wT(t.na,function(n,r){Kt(e,r,n)}),t.h&&G1({},function(n,r){Kt(e,r,n)})}function pk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const p=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{IW(p,o,"req"+d+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function gk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;np||b1(),rp||(np(),rp=!0),NT.add(e,t),t.A=0}}function WT(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=op(Dr(t.Ma,t),yk(t,t.A)),t.A++,0))}function ZT(t){null!=t.B&&($e.clearTimeout(t.B),t.B=null)}function mk(t){t.g=new up(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=wo(t.wa);Kt(e,"RID","rpc"),Kt(e,"SID",t.K),Kt(e,"AID",t.V),Kt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Kt(e,"TO",t.qa),Kt(e,"TYPE","xmlhttp"),yp(t,e),t.o&&t.s&&GT(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ny(wo(e)),n.u=null,n.S=!0,j1(n,t)}function Ly(t){null!=t.v&&($e.clearTimeout(t.v),t.v=null)}function _k(t,e){var n=null;if(t.g==e){Ly(t),ZT(t),t.g=null;var r=2}else{if(!$T(t.i,e))return;n=e.F,tk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;ur(r=Ay(),new k1(r,n)),Fy(t)}else gk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function bW(t,e){return!(ek(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=op(Dr(t.Na,t,e),yk(t,t.C)),t.C++,0)))}(t,e)||2==r&&WT(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hu(t,5);break;case 4:Hu(t,10);break;case 3:Hu(t,6);break;default:Hu(t,2)}}function yk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Dr(t.pb,t);n||(n=new $u("//www.google.com/images/cleardot.gif"),$e.location&&"http"==$e.location.protocol||Py(n,"https"),Ny(n)),function EW(t,e){const n=new Cy;if($e.Image){const r=new Image;r.onload=vy(xy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vy(xy,n,r,"TestLoadImage: error",!1,e),r.onabort=vy(xy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vy(xy,n,r,"TestLoadImage: timeout",!1,e),$e.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else zr(2);t.H=0,t.h&&t.h.za(e),vk(t),hk(t)}function vk(t){if(t.H=0,t.ma=[],t.h){const e=nk(t.i);(0!=e.length||0!=t.j.length)&&(f1(t.ma,e),f1(t.ma,t.j),t.i.i.length=0,pT(t.j),t.j.length=0),t.h.ya()}}function Ik(t,e,n){var r=n instanceof $u?wo(n):new $u(n);if(""!=r.g)e&&(r.g=e+"."+r.g),My(r,r.m);else{var i=$e.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new $u(null);r&&Py(s,r),e&&(s.g=e),i&&My(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Kt(r,n,e),Kt(r,"VER",t.ra),yp(t,r),r}function Ek(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hn(t.Ha&&!t.va?new pp({ob:n}):t.va)).Oa(t.J),e}function wk(){}function Uy(){if(Yl&&!(10<=Number(B8)))throw Error("Environmental error: no available transport.")}function mi(t,e){Yn.call(this),this.g=new dk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Xf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ed(this)}function Dk(t){VT.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Tk(){FT.call(this),this.status=1}function ed(t){this.g=t}function cs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function KT(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function bt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(de=hn.prototype).Oa=function(t){this.M=t},de.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():LT.g(),this.C=function F1(t){return t.h||(t.h=t.i())}(this.u?this.u:LT),this.g.onreadystatechange=Dr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void sk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=$e.FormData&&t instanceof $e.FormData,!(0<=h1(TW,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uk(this),0<this.B&&((this.L=function CW(t){return Yl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.ua,this)):this.A=OT(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){sk(this,s)}},de.ua=function(){typeof hT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},de.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ur(this,"complete"),ur(this,"abort"),ky(this))},de.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ky(this,!0)),hn.$.N.call(this)},de.La=function(){this.s||(this.G||this.v||this.l?ak(this):this.kb())},de.kb=function(){ak(this)},de.isActive=function(){return!!this.g},de.da=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},de.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},de.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wW(e)}},de.Ia=function(){return this.m},de.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(de=dk.prototype).ra=8,de.H=1,de.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new up(this,this.l,t);let s=this.s;if(this.U&&(s?(s=y1(s),I1(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=pk(this,i,e),Kt(n=wo(this.I),"RID",t),Kt(n,"CVER",22),this.F&&Kt(n,"X-HTTP-Session-Id",this.F),yp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(lk(s)))+"&"+e:this.o&&GT(n,this.o,s)),HT(this.i,i),this.bb&&Kt(n,"TYPE","init"),this.P?(Kt(n,"$req",e),Kt(n,"SID","null"),i.aa=!0,BT(i,n,null)):BT(i,n,e),this.H=2}}else 3==this.H&&(t?fk(this,t):0==this.j.length||X1(this.i)||fk(this))},de.Ma=function(){if(this.u=null,mk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=op(Dr(this.jb,this),t)}},de.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zr(10),Vy(this),mk(this))},de.ib=function(){null!=this.v&&(this.v=null,Vy(this),WT(this),zr(19))},de.pb=function(t){t?(this.l.info("Successfully pinged google.com"),zr(2)):(this.l.info("Failed to ping google.com"),zr(1))},de.isActive=function(){return!!this.h&&this.h.isActive(this)},(de=wk.prototype).Ba=function(){},de.Aa=function(){},de.za=function(){},de.ya=function(){},de.isActive=function(){return!0},de.Va=function(){},Uy.prototype.g=function(t,e){return new mi(t,e)},Qn(mi,Yn),mi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;zr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ik(t,null,t.Y),Fy(t)},mi.prototype.close=function(){qT(this.g)},mi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=MT(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Fy(e)},mi.prototype.N=function(){this.g.h=null,delete this.j,qT(this.g),delete this.g,mi.$.N.call(this)},Qn(Dk,VT),Qn(Tk,FT),Qn(ed,wk),ed.prototype.Ba=function(){ur(this.g,"a")},ed.prototype.Aa=function(t){ur(this.g,new Dk(t))},ed.prototype.za=function(t){ur(this.g,new Tk)},ed.prototype.ya=function(){ur(this.g,"b")},Qn(cs,function SW(){this.blockSize=-1}),cs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},cs.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)KT(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){KT(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){KT(this,r),i=0;break}}this.h=i,this.i+=e},cs.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var RW={};function QT(t){return-128<=t&&128>t?function F8(t,e){var n=RW;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bt([0|e],0>e?-1:0)}):new bt([0|t],0>t?-1:0)}function $s(t){if(isNaN(t)||!isFinite(t))return td;if(0>t)return cr($s(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=YT;return new bt(e,0)}var YT=4294967296,td=QT(0),JT=QT(1),Ak=QT(16777216);function Do(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function $i(t){return-1==t.h}function cr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bt(n,~t.h).add(JT)}function By(t,e){return t.add(cr(e))}function jy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vp(t,e){this.g=t,this.h=e}function $y(t,e){if(Do(e))throw Error("division by zero");if(Do(t))return new vp(td,td);if($i(t))return e=$y(cr(t),e),new vp(cr(e.g),cr(e.h));if($i(e))return e=$y(t,cr(e)),new vp(cr(e.g),e.h);if(30<t.g.length){if($i(t)||$i(e))throw Error("slowDivide_ only works with positive integers.");for(var n=JT,r=e;0>=r.X(t);)n=bk(n),r=bk(r);var i=nd(n,1),s=nd(r,1);for(r=nd(r,2),n=nd(n,2);!Do(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=nd(r,1),n=nd(n,1)}return e=By(t,i.R(e)),new vp(i,e)}for(i=td;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=$s(n)).R(e);$i(o)||0<o.X(t);)o=(s=$s(n-=r)).R(e);Do(s)&&(s=JT),i=i.add(s),t=By(t,o)}return new vp(i,t)}function bk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bt(n,t.h)}function nd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new bt(i,t.h)}(de=bt.prototype).ea=function(){if($i(this))return-cr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:YT+r)*e,e*=YT}return t},de.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Do(this))return"0";if($i(this))return"-"+cr(this).toString(t);for(var e=$s(Math.pow(t,6)),n=this,r="";;){var i=$y(n,e).g,s=((0<(n=By(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Do(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},de.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},de.X=function(t){return $i(t=By(this,t))?-1:Do(t)?0:1},de.abs=function(){return $i(this)?cr(this):this},de.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new bt(n,-2147483648&n[n.length-1]?-1:0)},de.R=function(t){if(Do(this)||Do(t))return td;if($i(this))return $i(t)?cr(this).R(cr(t)):cr(cr(this).R(t));if($i(t))return cr(this.R(cr(t)));if(0>this.X(Ak)&&0>t.X(Ak))return $s(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,jy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,jy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,jy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,jy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bt(n,0)},de.gb=function(t){return $y(this,t).h},de.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bt(n,this.h&t.h)},de.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bt(n,this.h|t.h)},de.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bt(n,this.h^t.h)},Uy.prototype.createWebChannel=Uy.prototype.g,mi.prototype.send=mi.prototype.u,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,by.NO_ERROR=0,by.TIMEOUT=8,by.HTTP_ERROR=6,V1.COMPLETE="complete",L1.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",Yn.prototype.listen=Yn.prototype.O,hn.prototype.listenOnce=hn.prototype.P,hn.prototype.getLastError=hn.prototype.Sa,hn.prototype.getLastErrorCode=hn.prototype.Ia,hn.prototype.getStatus=hn.prototype.da,hn.prototype.getResponseJson=hn.prototype.Wa,hn.prototype.getResponseText=hn.prototype.ja,hn.prototype.send=hn.prototype.ha,hn.prototype.setWithCredentials=hn.prototype.Oa,cs.prototype.digest=cs.prototype.l,cs.prototype.reset=cs.prototype.reset,cs.prototype.update=cs.prototype.j,bt.prototype.add=bt.prototype.add,bt.prototype.multiply=bt.prototype.R,bt.prototype.modulo=bt.prototype.gb,bt.prototype.compare=bt.prototype.X,bt.prototype.toNumber=bt.prototype.ea,bt.prototype.toString=bt.prototype.toString,bt.prototype.getBits=bt.prototype.D,bt.fromNumber=$s,bt.fromString=function Ck(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return cr(Ck(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=$s(Math.pow(e,8)),r=td,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=$s(Math.pow(e,s)),r=r.R(s).add($s(o))):r=(r=r.R(n)).add($s(o))}return r};var PW=us.createWebChannelTransport=function(){return new Uy},MW=us.getStatEventTarget=function(){return Ay()},XT=us.ErrorCode=by,NW=us.EventType=V1,xW=us.Event=Bu,Sk=us.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hy=(us.FetchXmlHttpFactory=pp,us.WebChannel=L1),OW=us.XhrIo=hn,kW=us.Md5=cs,rd=us.Integer=bt;const Rk="@firebase/firestore";class Jn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let id="10.7.2";const ya=new Us.Yd("@firebase/firestore");function sd(){return ya.logLevel}function ee(t,...e){if(ya.logLevel<=Us.in.DEBUG){const n=e.map(eC);ya.debug(`Firestore (${id}): ${t}`,...n)}}function In(t,...e){if(ya.logLevel<=Us.in.ERROR){const n=e.map(eC);ya.error(`Firestore (${id}): ${t}`,...n)}}function ii(t,...e){if(ya.logLevel<=Us.in.WARN){const n=e.map(eC);ya.warn(`Firestore (${id}): ${t}`,...n)}}function eC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ge(t="Unexpected state"){const e=`FIRESTORE (${id}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function De(t,e){t||ge()}function se(t,e){return t}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends vt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Pk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class UW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BW{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,W.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De("string"==typeof r.accessToken),new Pk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(null===e||"string"==typeof e),new Jn(e)}}class jW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $W{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De("string"==typeof n.token),this.R=n.token,new Mk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Nk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=zW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function od(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function xk(t){return t+"\0"}class sn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new sn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new sn(0,0))}static max(){return new Ce(new sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ip{constructor(e,n,r){void 0===n?n=0:n>e.length&&ge(),void 0===r?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Ip.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ip?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ot extends Ip{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const GW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ip{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return GW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(ot.fromString(e))}static fromName(e){return new ae(ot.fromString(e).popFirst(5))}static empty(){return new ae(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ot.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new ot(e.slice()))}}class ad{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function tC(t){return t.fields.find(e=>2===e.kind)}function zu(t){return t.fields.filter(e=>2!==e.kind)}ad.UNKNOWN_ID=-1;class Gu{constructor(e,n){this.fieldPath=e,this.kind=n}}class ud{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ud(0,_i.min())}}function Ok(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(1e9===r?new sn(n+1,0):new sn(n,r));return new _i(i,ae.empty(),e)}function kk(t){return new _i(t.readTime,t.key,-1)}class _i{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _i(Ce.min(),ae.empty(),-1)}static max(){return new _i(Ce.max(),ae.empty(),-1)}}function nC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ae.comparator(t.documentKey,e.documentKey),0!==n?n:Le(t.largestBatchId,e.largestBatchId))}const Vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function va(t){return rC.apply(this,arguments)}function rC(){return rC=(0,W.Z)(function*(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Vk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}),rC.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class zy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ep(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=iC(r.target.error);this.V.reject(new Ep(e,i))}}static open(e,n,r,i){try{return new zy(n,e.transaction(i,r))}catch(s){throw new Ep(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KW(n)}}class Hi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Hi.S((0,vt.z$)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),qu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,vt.hl)())return!1;if(Hi.C())return!0;const e=(0,vt.z$)(),n=Hi.S(e),r=0<n&&n<10,i=Hi.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,W.Z)(function*(){return n.db||(ee("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Ep(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Ep(e,a))},s.onupgradeneeded=o=>{ee("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ee("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,W.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=zy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),N.reject(p))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,p="FirebaseError"!==d.name&&a<3;if(ee("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),s.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZW{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return qu(this.k.delete())}}class Ep extends J{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ia(t){return"IndexedDbTransactionError"===t.name}class KW{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qu(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),qu(this.store.add(e))}get(e){return qu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),qu(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),qu(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new N((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=iC(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new ZW(a),d=n(a.primaryKey,a.value,u);if(d instanceof N){const p=d.catch(g=>(u.done(),N.reject(g)));r.push(p)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function qu(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=iC(r.target.error);n(i)}})}let Lk=!1;function iC(t){const e=Hi.S((0,vt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lk||(Lk=!0,setTimeout(()=>{throw r},0)),r}}return t}class QW{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ee("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){n.task=null;try{ee("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){Ia(r)?ee("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield va(r)}yield n.ee(6e4)}))}}class YW{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,W.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ee("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ee("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=kk(s);nC(o,r)>0&&(r=o)}),new _i(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let yi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function wp(t){return null==t}function Dp(t){return 0===t&&1/t==-1/0}function Uk(t){return"number"==typeof t&&Number.isInteger(t)&&!Dp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Cr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Bk(e)),e=JW(t.get(n),e);return Bk(e)}function JW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Bk(t){return t+"\x01\x01"}function Hs(t){const e=t.length;if(De(e>=2),2===e)return De("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ot.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ge(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ge()}s=o+2}return new ot(r)}const jk=["userId","batchId"];function Gy(t,e){return[t,Cr(e)]}function $k(t,e,n){return[t,Cr(e),n]}const XW={},e7=["prefixPath","collectionGroup","readTime","documentId"],t7=["prefixPath","collectionGroup","documentId"],n7=["collectionGroup","readTime","prefixPath","documentId"],r7=["canonicalId","targetId"],i7=["targetId","path"],s7=["path","targetId"],o7=["collectionId","parent"],a7=["indexId","uid"],u7=["uid","sequenceNumber"],c7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],l7=["indexId","uid","orderedDocumentKey"],d7=["userId","collectionPath","documentId"],h7=["userId","collectionPath","largestBatchId"],f7=["userId","collectionGroup","largestBatchId"],Hk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p7=[...Hk,"documentOverlays"],zk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gk=zk,g7=[...Gk,"indexConfiguration","indexState","indexEntries"];class sC extends Fk{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Xn(t,e){const n=se(t);return Hi.M(n.ae,e)}function qk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ea(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class $t{constructor(e,n){this.comparator=e,this.root=n||lr.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qy(this.root,e,this.comparator,!1)}getReverseIterator(){return new qy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qy(this.root,e,this.comparator,!0)}}class qy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??lr.RED,this.left=i??lr.EMPTY,this.right=s??lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new lr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return lr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1,lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,i,s){return this}insert(e,n,r){return new lr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zk(this.data.getIterator())}getIteratorFrom(e){return new Zk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Zk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cd(t){return t.hasNext()?t.getNext():void 0}class si{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new si([])}unionWith(e){let n=new Mt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Kk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Kk("Invalid base64 string: "+s):s}}(e);return new Gn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const _7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wa(t){if(De(!!t),"string"==typeof t){let e=0;const n=_7.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function To(t){return"string"==typeof t?Gn.fromBase64String(t):Gn.fromUint8Array(t)}function Wy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zy(t){const e=t.mapValue.fields.__previous_value__;return Wy(e)?Zy(e):e}function Tp(t){const e=wa(t.mapValue.fields.__local_write_time__.timestampValue);return new sn(e.seconds,e.nanos)}class y7{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Da{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}const Ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ky={nullValue:"NULL_VALUE"};function Ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wy(t)?4:Xk(t)?9007199254740991:10:ge()}function zs(t,e){if(t===e)return!0;const n=Ca(t);if(n!==Ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tp(t).isEqual(Tp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=wa(i.timestampValue),a=wa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,To(t.bytesValue).isEqual(To(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return fn(i.geoPointValue.latitude)===fn(s.geoPointValue.latitude)&&fn(i.geoPointValue.longitude)===fn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return fn(i.integerValue)===fn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=fn(i.doubleValue),a=fn(s.doubleValue);return o===a?Dp(o)===Dp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return od(t.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qk(o)!==qk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!zs(o[u],a[u])))return!1;return!0}(t,e);default:return ge()}var s}function Cp(t,e){return void 0!==(t.values||[]).find(n=>zs(n,e))}function Aa(t,e){if(t===e)return 0;const n=Ca(t),r=Ca(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=fn(s.integerValue||s.doubleValue),u=fn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Qk(t.timestampValue,e.timestampValue);case 4:return Qk(Tp(t),Tp(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=To(s),u=To(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const p=Le(a[d],u[d]);if(0!==p)return p}return Le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(fn(s.latitude),fn(o.latitude));return 0!==a?a:Le(fn(s.longitude),fn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const p=Aa(a[d],u[d]);if(p)return p}return Le(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ta.mapValue&&o===Ta.mapValue)return 0;if(s===Ta.mapValue)return 1;if(o===Ta.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Le(u[g],p[g]);if(0!==_)return _;const y=Aa(a[u[g]],d[p[g]]);if(0!==y)return y}return Le(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ge()}}function Qk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Le(t,e);const n=wa(t),r=wa(e),i=Le(n.seconds,r.seconds);return 0!==i?i:Le(n.nanos,r.nanos)}function ld(t){return oC(t)}function oC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?To(t.bytesValue).toBase64():"referenceValue"in t?ae.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=oC(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${oC(n.fields[o])}`;return i+"}"}(t.mapValue):ge()}function Wu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function aC(t){return!!t&&"integerValue"in t}function Ap(t){return!!t&&"arrayValue"in t}function Yk(t){return!!t&&"nullValue"in t}function Jk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yy(t){return!!t&&"mapValue"in t}function bp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ea(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xk(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function v7(t){return"nullValue"in t?Ky:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wu(Da.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ge()}function I7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wu(Da.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ta:ge()}function eV(t,e){const n=Aa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tV(t,e){const n=Aa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bp(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ea(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dr(bp(this.value))}}function nV(t){const e=[];return Ea(t.fields,(n,r)=>{const i=new Qt([n]);if(Yy(r)){const s=nV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new si(e)}class Yt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yt(e,0,Ce.min(),Ce.min(),Ce.min(),dr.empty(),0)}static newFoundDocument(e,n,r,i){return new Yt(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new Yt(e,2,n,Ce.min(),Ce.min(),dr.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,Ce.min(),Ce.min(),dr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ba{constructor(e,n){this.position=e,this.inclusive=n}}function rV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(o.referenceValue),n.key):Aa(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function iV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zs(t.position[n],e.position[n]))return!1;return!0}class Sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function E7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class sV{}class at extends sV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new w7(e,n,r):"array-contains"===n?new C7(e,r):"in"===n?new dV(e,r):"not-in"===n?new A7(e,r):"array-contains-any"===n?new b7(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new D7(e,r):new T7(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Aa(n,this.value)):null!==n&&Ca(this.value)===Ca(n)&&this.matchesComparison(Aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends sV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new St(e,n)}matches(e){return dd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function dd(t){return"and"===t.op}function uC(t){return"or"===t.op}function cC(t){return oV(t)&&dd(t)}function oV(t){for(const e of t.filters)if(e instanceof St)return!1;return!0}function lC(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+ld(t.value);if(cC(t))return t.filters.map(e=>lC(e)).join(",");{const e=t.filters.map(n=>lC(n)).join(",");return`${t.op}(${e})`}}function aV(t,e){return t instanceof at?(r=t,(i=e)instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&zs(r.value,i.value)):t instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&aV(o,i.filters[a]),!0)}(t,e):void ge();var r,i}function uV(t,e){const n=t.filters.concat(e);return St.create(n,t.op)}function cV(t){return t instanceof at?`${(n=t).field.canonicalString()} ${n.op} ${ld(n.value)}`:t instanceof St?function(n){return n.op.toString()+" {"+n.getFilters().map(cV).join(" ,")+"}"}(t):"Filter";var n}class w7 extends at{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class D7 extends at{constructor(e,n){super(e,"in",n),this.keys=lV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T7 extends at{constructor(e,n){super(e,"not-in",n),this.keys=lV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class C7 extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ap(n)&&Cp(n.arrayValue,this.value)}}class dV extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Cp(this.value.arrayValue,n)}}class A7 extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Cp(this.value.arrayValue,n)}}class b7 extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cp(this.value.arrayValue,r))}}class S7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function dC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new S7(t,e,n,r,i,s,o)}function Zu(t){const e=se(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ld(r)).join(",")),e.ce=n}return e.ce}function Rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iV(t.startAt,e.startAt)&&iV(t.endAt,e.endAt)}function Jy(t){return ae.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Xy(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function hV(t,e,n){let r=Ky,i=!0;for(const s of Xy(t,e)){let o=Ky,a=!0;switch(s.op){case"<":case"<=":o=v7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ky}eV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];eV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function fV(t,e,n){let r=Ta,i=!0;for(const s of Xy(t,e)){let o=Ta,a=!0;switch(s.op){case">=":case">":o=I7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ta}tV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];tV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Co{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function pV(t,e,n,r,i,s,o,a){return new Co(t,e,n,r,i,s,o,a)}function hd(t){return new Co(t)}function gV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function hC(t){return null!==t.collectionGroup}function fd(t){const e=se(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(Qt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Sp(s,r))}),n.has(Qt.keyField().canonicalString())||e.le.push(new Sp(Qt.keyField(),r))}return e.le}function Gr(t){const e=se(t);return e.he||(e.he=function mV(t,e){if("F"===t.limitType)return dC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Sp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new ba(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ba(t.startAt.position,t.startAt.inclusive):null;return dC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,fd(t))),e.he}function fC(t,e){const n=t.filters.concat([e]);return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ev(t,e,n){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pp(t,e){return Rp(Gr(t),Gr(e))&&t.limitType===e.limitType}function _V(t){return`${Zu(Gr(t))}|lt:${t.limitType}`}function pd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cV(i)).join(", ")}]`),wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ld(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ld(i)).join(",")),`Target(${r})`}(Gr(t))}; limitType=${t.limitType})`}function Mp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=rV(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,fd(r),i)||r.endAt&&!function(o,a,u){const d=rV(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,fd(r),i)));var r,i}function yV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vV(t){return(e,n)=>{let r=!1;for(const i of fd(t)){const s=R7(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function R7(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Aa(u,d):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Wk(this.inner)}size(){return this.innerSize}}const P7=new $t(ae.comparator);function oi(){return P7}const IV=new $t(ae.comparator);function Np(...t){let e=IV;for(const n of t)e=e.insert(n.key,n);return e}function EV(t){let e=IV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return xp()}function wV(){return xp()}function xp(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const M7=new $t(ae.comparator),N7=new Mt(ae.comparator);function Ze(...t){let e=N7;for(const n of t)e=e.add(n);return e}const x7=new Mt(Le);function pC(){return x7}function DV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dp(e)?"-0":e}}function TV(t){return{integerValue:""+t}}function CV(t,e){return Uk(e)?TV(e):DV(t,e)}class tv{constructor(){this._=void 0}}function O7(t,e,n){return t instanceof gd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wy(s)&&(s=Zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ku?bV(t,e):t instanceof Qu?SV(t,e):function(i,s){const o=AV(i,s),a=RV(o)+RV(i.Ie);return aC(o)&&aC(i.Ie)?TV(a):DV(i.serializer,a)}(t,e)}function k7(t,e,n){return t instanceof Ku?bV(t,e):t instanceof Qu?SV(t,e):n}function AV(t,e){return t instanceof md?aC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class gd extends tv{}class Ku extends tv{constructor(e){super(),this.elements=e}}function bV(t,e){const n=PV(e);for(const r of t.elements)n.some(i=>zs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qu extends tv{constructor(e){super(),this.elements=e}}function SV(t,e){let n=PV(e);for(const r of t.elements)n=n.filter(i=>!zs(i,r));return{arrayValue:{values:n}}}class md extends tv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function RV(t){return fn(t.integerValue||t.doubleValue)}function PV(t){return Ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Op{constructor(e,n){this.field=e,this.transform=n}}class F7{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class rv{}function MV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new yd(t.key,on.none()):new _d(t.key,t.data,on.none());{const n=t.data,r=dr.empty();let i=new Mt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new bo(t.key,r,new si(i.toArray()),on.none())}}function L7(t,e,n){t instanceof _d?function(i,s,o){const a=i.value.clone(),u=OV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bo?function(i,s,o){if(!nv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=OV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function kp(t,e,n,r){return t instanceof _d?function(s,o,a,u){if(!nv(s.precondition,o))return a;const d=s.value.clone(),p=kV(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof bo?function(s,o,a,u){if(!nv(s.precondition,o))return a;const d=kV(s.fieldTransforms,u,o),p=o.data;return p.setAll(xV(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,nv(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function U7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=AV(r.transform,i||null);null!=s&&(null===n&&(n=dr.empty()),n.set(r.field,s))}return n||null}function NV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&od(r,i,(s,o)=>function V7(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Ku&&i instanceof Ku||r instanceof Qu&&i instanceof Qu?od(r.elements,i.elements,zs):r instanceof md&&i instanceof md?zs(r.Ie,i.Ie):r instanceof gd&&i instanceof gd);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class _d extends rv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bo extends rv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OV(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,k7(o,a,n[i]))}return r}function kV(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,O7(s,o,e))}return r}class yd extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gC extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&L7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=MV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(n,r)=>NV(n,r))&&od(this.baseMutations,e.baseMutations,(n,r)=>NV(n,r))}}class _C{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=M7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _C(e,n,r,i)}}class yC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class j7{constructor(e,n){this.count=e,this.unchangedNames=n}}var Rn,ht;function VV(t){switch(t){default:return ge();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function FV(t){if(void 0===t)return In("GRPC error has no .code"),V.UNKNOWN;switch(t){case Rn.OK:return V.OK;case Rn.CANCELLED:return V.CANCELLED;case Rn.UNKNOWN:return V.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return V.INTERNAL;case Rn.UNAVAILABLE:return V.UNAVAILABLE;case Rn.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Rn.NOT_FOUND:return V.NOT_FOUND;case Rn.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Rn.ABORTED:return V.ABORTED;case Rn.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Rn.DATA_LOSS:return V.DATA_LOSS;default:return ge()}}(ht=Rn||(Rn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";function LV(){return new TextEncoder}const $7=new rd([4294967295,4294967295],0);function UV(t){const e=LV().encode(t),n=new kW;return n.update(e),new Uint8Array(n.digest())}function BV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rd([n,r],0),new rd([i,s],0)]}class vC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vp(`Invalid padding: ${n}`);if(r<0)throw new Vp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Vp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Vp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=rd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(rd.fromNumber(r)));return 1===i.compare($7)&&(i=new rd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=UV(e),[r,i]=BV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vC(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=UV(e),[r,i]=BV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Vp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Lp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fp(Ce.min(),i,new $t(Le),oi(),Ze())}}class Lp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lp(r,n,Ze(),Ze(),Ze())}}class sv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class jV{constructor(e,n){this.targetId=e,this.fe=n}}class $V{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HV{constructor(){this.ge=0,this.pe=GV(),this.ye=Gn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new Lp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=GV()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,De(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class H7{constructor(e){this.Le=e,this.ke=new Map,this.qe=oi(),this.Qe=zV(),this.Ke=new $t(Le)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Jy(s))if(0===r){const o=new ae(s.path);this.We(n,o,Yt.newNoDocument(o,Ce.min()))}else De(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=To(r).toUint8Array()}catch(u){if(u instanceof Kk)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vC(o,i,s)}catch(u){return ii(u instanceof Vp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Jy(a.target)){const u=new ae(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Yt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Fp(e,n,this.Ke,this.qe,r);return this.qe=oi(),this.Qe=zV(),this.Ke=new $t(Le),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new HV,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Mt(Le),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new HV),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zV(){return new $t(ae.comparator)}function GV(){return new $t(ae.comparator)}const z7={asc:"ASCENDING",desc:"DESCENDING"},G7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q7={and:"AND",or:"OR"};class W7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function IC(t,e){return t.useProto3Json||wp(e)?e:{value:e}}function vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z7(t,e){return vd(t,e.toTimestamp())}function En(t){return De(!!t),Ce.fromTimestamp(function(n){const r=wa(n);return new sn(r.seconds,r.nanos)}(t))}function EC(t,e){return wC(t,e).canonicalString()}function wC(t,e){const n=(i=t,new ot(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function WV(t){const e=ot.fromString(t);return De(rF(e)),e}function Up(t,e){return EC(t.databaseId,e.path)}function qs(t,e){const n=WV(e);if(n.get(1)!==t.databaseId.projectId)throw new J(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(QV(n))}function ZV(t,e){return EC(t.databaseId,e)}function KV(t){const e=WV(t);return 4===e.length?ot.emptyPath():QV(e)}function DC(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QV(t){return De(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function YV(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function JV(t,e,n){const r=qs(t,e.name),i=En(e.updateTime),s=e.createTime?En(e.createTime):Ce.min(),o=new dr({mapValue:{fields:e.fields}}),a=Yt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Bp(t,e){let n;if(e instanceof _d)n={update:YV(t,e.key,e.value)};else if(e instanceof yd)n={delete:Up(t,e.key)};else if(e instanceof bo)n={update:YV(t,e.key,e.data),updateMask:nZ(e.fieldMask)};else{if(!(e instanceof gC))return ge();n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof gd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof md)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Z7(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ge()),n;var s}function TC(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?on.updateTime(En(s.updateTime)):void 0!==s.exists?on.exists(s.exists):on.none():on.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(De("REQUEST_TIME"===a.setToServerValue),u=new gd):"appendMissingElements"in a?u=new Ku(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Qu(a.removeAllFromArray.values||[]):"increment"in a?u=new md(o,a.increment):ge();const d=Qt.fromServerFormat(a.fieldPath);return new Op(d,u)}(t,i)):[];var s;if(e.update){const i=qs(t,e.update.name),s=new dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new si((e.updateMask.fieldPaths||[]).map(p=>Qt.fromServerFormat(p)));return new bo(i,s,o,n,r)}return new _d(i,s,n,r)}if(e.delete){const i=qs(t,e.delete);return new yd(i,n)}if(e.verify){const i=qs(t,e.verify);return new gC(i,n)}return ge()}function XV(t,e){return{documents:[ZV(t,e.path)]}}function CC(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZV(t,i);const s=function(d){if(0!==d.length)return nF(St.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(p=>{return{field:Sa((_=p).field),direction:X7(_.dir)};var _})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=IC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ut:n,parent:i};var d}function eF(t){let e=KV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=tF(g);return _ instanceof St&&cC(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new Sp(Id((E=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,wp(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new ba((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new ba(g.values||[],!g.before)}(n.endAt)),pV(e,i,o,s,a,"F",u,d)}function tF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Id(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Id(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Id(n.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Id(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):void 0!==t.fieldFilter?at.create(Id((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return St.create(n.compositeFilter.filters.map(r=>tF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge();var n}function X7(t){return z7[t]}function eZ(t){return G7[t]}function tZ(t){return q7[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Id(t){return Qt.fromServerFormat(t.fieldPath)}function nF(t){return t instanceof at?function(n){if("=="===n.op){if(Jk(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(Yk(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Jk(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(Yk(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:eZ(n.op),value:n.value}}}(t):t instanceof St?function(n){const r=n.getFilters().map(i=>nF(i));return 1===r.length?r[0]:{compositeFilter:{op:tZ(n.op),filters:r}}}(t):ge()}function nZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class So{constructor(e,n,r,i,s=Ce.min(),o=Ce.min(),a=Gn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iF{constructor(e){this.ct=e}}function sF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ov(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Up(s=t.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:vd(s,o.version.toTimestamp()),createTime:vd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yu(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:n.path.toArray(),version:Yu(e.version)}}var s,o;return r}function ov(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ju(t){const e=new sn(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function Xu(t,e){const n=(e.baseMutations||[]).map(s=>TC(t.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>TC(t.ct,s)),i=sn.fromMillis(e.localWriteTimeMs);return new mC(e.batchId,i,n,r)}function jp(t){const e=Ju(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Ju(t.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=void 0!==t.query.documents?(De(1===(s=t.query).documents.length),Gr(hd(KV(s.documents[0])))):function(s){return Gr(eF(s))}(t.query),new So(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gn.fromBase64String(t.resumeToken));var s}function oF(t,e){const n=Yu(e.snapshotVersion),r=Yu(e.lastLimboFreeSnapshotVersion);let i;i=Jy(e.target)?XV(t.ct,e.target):CC(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AC(t){const e=eF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ev(e,e.limit,"L"):e}function bC(t,e){return new yC(e.largestBatchId,TC(t.ct,e.overlayMutation))}function aF(t,e){const n=e.path.lastSegment();return[t,Cr(e.path.popLast()),n]}function uF(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Yu(r.readTime),documentKey:Cr(r.documentKey.path),largestBatchId:r.largestBatchId}}class iZ{getBundleMetadata(e,n){return cF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ju(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return cF(e).put({bundleId:(i=n).id,createTime:Yu(En(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return lF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:AC(s.bundledQuery),readTime:Ju(s.readTime)};var s})}saveNamedQuery(e,n){return lF(e).put({name:(i=n).name,readTime:Yu(En(i.readTime)),bundledQuery:i.bundledQuery});var i}}function cF(t){return Xn(t,"bundles")}function lF(t){return Xn(t,"namedQueries")}class av{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new av(e,n.uid||"")}getOverlay(e,n){return $p(e).get(aF(this.userId,n)).next(r=>r?bC(this.serializer,r):null)}getOverlays(e,n){const r=Gs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new yC(n,o);i.push(this.ht(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Cr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push($p(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Gs(),s=Cr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return $p(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=bC(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Gs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $p(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,p)=>{const g=bC(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>s)}ht(e,n){return $p(e).put(function(i,s,o){const[a,u,d]=aF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bp(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function $p(t){return Xn(t,"documentOverlays")}class ec{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(fn(e.integerValue));else if("doubleValue"in e){const r=fn(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Dp(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(To(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Xk(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ge()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ae.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function sZ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function dF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=sZ(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}ec.bt=new ec;class oZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const n=this.Lt(e),r=dF(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Lt(e),r=dF(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aZ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class uZ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Hp{constructor(){this.Gt=new oZ,this.zt=new aZ(this.Gt),this.jt=new uZ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class tc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ra(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=hF(t.arrayValue,e.arrayValue),0!==n?n:(n=hF(t.directionalValue,e.directionalValue),0!==n?n:ae.comparator(t.documentKey,e.documentKey)))}function hF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class fF{constructor(e){this.Yt=new Mt((n,r)=>Qt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(De(e.collectionGroup===this.collectionId),this.en)return!1;const n=tC(e);if(void 0!==n&&!this.nn(n))return!1;const r=zu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Mt(Qt.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Gu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gu(r.field,"asc"===r.dir?0:1)));return new ad(ad.UNKNOWN_ID,this.collectionId,n,ud.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function pF(t){var e,n;if(De(t instanceof at||t instanceof St),t instanceof at){if(t instanceof dV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>at.create(t.field,"==",s)))||[];return St.create(i,"or")}return t}const r=t.filters.map(i=>pF(i));return St.create(r,t.op)}function cZ(t){if(0===t.getFilters().length)return[];const e=PC(pF(t));return De(gF(e)),SC(e)||RC(e)?[e]:e.getFilters()}function SC(t){return t instanceof at}function RC(t){return t instanceof St&&cC(t)}function gF(t){return SC(t)||RC(t)||function(n){if(n instanceof St&&uC(n)){for(const r of n.getFilters())if(!SC(r)&&!RC(r))return!1;return!0}return!1}(t)}function PC(t){if(De(t instanceof at||t instanceof St),t instanceof at)return t;if(1===t.filters.length)return PC(t.filters[0]);const e=t.filters.map(r=>PC(r));let n=St.create(e,t.op);return n=uv(n),gF(n)?n:(De(n instanceof St),De(dd(n)),De(n.filters.length>1),n.filters.reduce((r,i)=>MC(r,i)))}function MC(t,e){let n;return De(t instanceof at||t instanceof St),De(e instanceof at||e instanceof St),n=t instanceof at?e instanceof at?St.create([t,e],"and"):mF(t,e):e instanceof at?mF(e,t):function(i,s){if(De(i.filters.length>0&&s.filters.length>0),dd(i)&&dd(s))return uV(i,s.getFilters());const o=uC(i)?i:s,a=uC(i)?s:i,u=o.filters.map(d=>MC(d,a));return St.create(u,"or")}(t,e),uv(n)}function mF(t,e){if(dd(e))return uV(e,t.getFilters());{const n=e.filters.map(r=>MC(t,r));return St.create(n,"or")}}function uv(t){if(De(t instanceof at||t instanceof St),t instanceof at)return t;const e=t.getFilters();if(1===e.length)return uv(e[0]);if(oV(t))return t;const n=e.map(i=>uv(i)),r=[];return n.forEach(i=>{i instanceof at?r.push(i):i instanceof St&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:St.create(r,t.op)}class lZ{constructor(){this._n=new NC}addToCollectionParentIndex(e,n){return this._n.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(_i.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class NC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(ot.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ot.comparator)).toArray()}}const cv=new Uint8Array(0);class dZ{constructor(e,n){this.databaseId=n,this.an=new NC,this.un=new Ao(r=>Zu(r),(r,i)=>Rp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:Cr(i)};return _F(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[xk(n),""],!1,!0);return _F(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Hs(o.parent))}return r})}addFieldIndex(e,n){const r=zp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=wd(e);return s.next(a=>{o.put(uF(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=zp(e),i=wd(e),s=Ed(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=zp(e),r=Ed(e),i=wd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new fF(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Ed(e);let i=!0;const s=new Map;return N.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ze();const a=[];return N.forEach(s,(u,d)=>{var U;ee("IndexedDbIndexManager",`Using index ${U=u,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${Zu(n)}`);const p=function(U,te){const ce=tC(te);if(void 0===ce)return null;for(const Ue of Xy(U,ce.fieldPath))switch(Ue.op){case"array-contains-any":return Ue.value.arrayValue.values||[];case"array-contains":return[Ue.value]}return null}(d,u),g=function(U,te){const ce=new Map;for(const Ue of zu(te))for(const It of Xy(U,Ue.fieldPath))switch(It.op){case"==":case"in":ce.set(Ue.fieldPath.canonicalString(),It.value);break;case"not-in":case"!=":return ce.set(Ue.fieldPath.canonicalString(),It.value),Array.from(ce.values())}return null}(d,u),_=function(U,te){const ce=[];let Ue=!0;for(const It of zu(te)){const qn=0===It.kind?hV(U,It.fieldPath,U.startAt):fV(U,It.fieldPath,U.startAt);ce.push(qn.value),Ue&&(Ue=qn.inclusive)}return new ba(ce,Ue)}(d,u),y=function(U,te){const ce=[];let Ue=!0;for(const It of zu(te)){const qn=0===It.kind?fV(U,It.fieldPath,U.endAt):hV(U,It.fieldPath,U.endAt);ce.push(qn.value),Ue&&(Ue=qn.inclusive)}return new ba(ce,Ue)}(d,u),E=this.hn(u,d,_),C=this.hn(u,d,y),S=this.Pn(u,d,g),O=this.In(u.indexId,p,E,_.inclusive,C,y.inclusive,S);return N.forEach(O,R=>r.j(R,n.limit).next(U=>{U.forEach(te=>{const ce=ae.fromSegments(te.documentKey);o.has(ce)||(o=o.add(ce),a.push(ce))})}))}).next(()=>a)}return N.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:cZ(St.create(e.filters,"and")).map(r=>dC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),p=[];for(let g=0;g<u;++g){const _=n?this.Tn(n[g/d]):cv,y=this.En(e,_,r[g%d],i),E=this.dn(e,_,s[g%d],o),C=a.map(S=>this.En(e,_,S,!0));p.push(...this.createRange(y,E,C))}return p}En(e,n,r,i){const s=new tc(e,ae.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new tc(e,ae.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new fF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return N.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Mt(Qt.comparator),p=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?p=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new Hp;for(const i of zu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);ec.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new Hp;return ec.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Hp;return ec.bt.Pt(Wu(this.databaseId,n),r.Ht(function(s){const o=zu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new Hp);let s=0;for(const o of zu(e)){const a=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&Ap(a))i=this.mn(i,o,a);else{const d=u.Ht(o.kind);ec.bt.Pt(a,d)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Hp;u.seed(a.Wt()),ec.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=zp(e),i=wd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(p,g){const _=g?new ud(g.sequenceNumber,new _i(Ju(g.readTime),new ae(Hs(g.documentKey)),g.largestBatchId)):ud.empty(),y=p.fields.map(([E,C])=>new Gu(Qt.fromServerFormat(E),C));return new ad(p.indexId,p.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=zp(e),s=wd(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put(uF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this.pn(e,i,u).next(d=>{const p=this.yn(s,u);return d.isEqual(p)?N.resolve():this.wn(e,s,u,d,p)}))))})}Sn(e,n,r,i){return Ed(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ed(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Ed(e);let s=new Mt(Ra);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new tc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Mt(Ra);const i=this.An(n,e);if(null==i)return r;const s=tC(n);if(null!=s){const o=e.data.field(s.fieldPath);if(Ap(o))for(const a of o.arrayValue.values||[])r=r.add(new tc(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new tc(n.indexId,e.key,cv,i));return r}wn(e,n,r,i,s){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,p,g,_){const y=u.getIterator(),E=d.getIterator();let C=cd(y),S=cd(E);for(;C||S;){let O=!1,R=!1;if(C&&S){const U=p(C,S);U<0?R=!0:U>0&&(O=!0)}else null!=C?R=!0:O=!0;O?(g(S),S=cd(E)):R?(_(C),C=cd(y)):(C=cd(y),S=cd(E))}}(i,s,Ra,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),N.waitFor(o)}gn(e){let n=1;return wd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ra(o,a)).filter((o,a,u)=>!a||0!==Ra(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ra(o,e),u=Ra(o,n);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,cv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,cv,[]]))}return s}Dn(e,n){return Ra(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yF)}getMinOffset(e,n){return N.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ge())).next(yF)}}function _F(t){return Xn(t,"collectionParents")}function Ed(t){return Xn(t,"indexEntries")}function zp(t){return Xn(t,"indexConfiguration")}function wd(t){return Xn(t,"indexState")}function yF(t){De(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;nC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _i(e.readTime,e.documentKey,n)}const vF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ar{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function IF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(p,g,_)=>(a++,_.delete()));s.push(u.next(()=>{De(1===a)}));const d=[];for(const p of n.mutations){const g=$k(e,p.key.path,n.batchId);s.push(i.delete(g)),d.push(p.key)}return N.waitFor(s).next(()=>d)}function lv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ge();e=t.noDocument}return JSON.stringify(e).length}Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class dv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){De(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Dd(e),o=Pa(e);return o.add({}).next(a=>{De("number"==typeof a);const u=new mC(a,n,r,i),d=function(y,E,C){const S=C.baseMutations.map(R=>Bp(y.ct,R)),O=C.mutations.map(R=>Bp(y.ct,R));return{userId:E,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:O}}(this.serializer,this.userId,u),p=[];let g=new Mt((_,y)=>Le(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=$k(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),p.push(o.put(d)),p.push(s.put(y,XW))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),N.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Pa(e).get(n).next(r=>r?(De(r.userId===this.userId),Xu(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?N.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Pa(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(De(a.batchId>=r),s=Xu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Pa(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).W("userMutationsIndex",n).next(r=>r.map(i=>Xu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Dd(e).Y({range:i},(o,a,u)=>{const[d,p,g]=o,_=Hs(p);if(d===this.userId&&n.path.isEqual(_))return Pa(e).get(g).next(y=>{if(!y)throw ge();De(y.userId===this.userId),s.push(Xu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Le);const i=[];return n.forEach(s=>{const o=Gy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Dd(e).Y({range:a},(d,p,g)=>{const[_,y,E]=d,C=Hs(y);_===this.userId&&s.path.isEqual(C)?r=r.add(E):g.done()});i.push(u)}),N.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Gy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Mt(Le);return Dd(e).Y({range:o},(u,d,p)=>{const[g,_,y]=u,E=Hs(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):p.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Pa(e).get(s).next(o=>{if(null===o)throw ge();De(o.userId===this.userId),r.push(Xu(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return IF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Hs(s[1]);i.push(u)}else a.done()}).next(()=>{De(0===i.length)})})}containsKey(e,n){return EF(e,this.userId,n)}xn(e){return wF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EF(t,e,n){const r=Gy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Dd(t).Y({range:s,J:!0},(a,u,d)=>{const[p,g,_]=a;p===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Pa(t){return Xn(t,"mutations")}function Dd(t){return Xn(t,"documentMutations")}function wF(t){return Xn(t,"mutationQueues")}class nc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new nc(0)}static Bn(){return new nc(-1)}}class hZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const r=new nc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>Ce.fromTimestamp(new sn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Td(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Td(e).Y((o,a)=>{const u=jp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Td(e).Y((r,i)=>{const s=jp(i);n(s)})}Ln(e){return DF(e).get("targetGlobalKey").next(n=>(De(null!==n),n))}kn(e,n){return DF(e).put("targetGlobalKey",n)}qn(e,n){return Td(e).put(oF(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Zu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Td(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=jp(a);Rp(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ma(e);return n.forEach(o=>{const a=Cr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ma(e);return N.forEach(n,s=>{const o=Cr(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ma(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ma(e);let s=Ze();return i.Y({range:r,J:!0},(o,a,u)=>{const d=Hs(o[1]),p=new ae(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=Cr(n.path),i=IDBKeyRange.bound([r],[xk(r)],!1,!0);let s=0;return Ma(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return Td(e).get(n).next(r=>r?jp(r):null)}}function Td(t){return Xn(t,"targets")}function DF(t){return Xn(t,"targetGlobal")}function Ma(t){return Xn(t,"targetDocuments")}function TF([t,e],[n,r]){const i=Le(t,n);return 0===i?Le(e,r):i}class fZ{constructor(e){this.Kn=e,this.buffer=new Mt(TF),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();TF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Ia(r)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield va(r)}yield n.zn(3e5)}))}}class pZ{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(yi._e);const r=new fZ(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(vF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vF):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),sd()<=Us.in.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-p}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class gZ{constructor(e,n){this.db=e,this.garbageCollector=function AF(t,e){return new pZ(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return hv(e,r)}removeReference(e,n,r){return hv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return hv(e,n)}er(e,n){return function(i,s){let o=!1;return wF(i).Z(a=>EF(i,a,s).next(u=>(u&&(o=!0),N.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const u=this.er(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),Ma(e).delete([0,Cr(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return hv(e,n)}Xn(e,n){const r=Ma(e);let i,s=yi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==yi._e&&n(new ae(Hs(i)),s),s=d,i=u):s=yi._e}).next(()=>{s!==yi._e&&n(new ae(Hs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hv(t,e){return Ma(t).put((i=t.currentSequenceNumber,{targetId:0,path:Cr(e.path),sequenceNumber:i}));var i}class bF{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return rc(e).put(r)}removeEntry(e,n,r){return rc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ov(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Yt.newInvalidDocument(n);return rc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Gp(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Yt.newInvalidDocument(n)};return rc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Gp(n))},(i,s)=>{r={document:this.nr(n,s),size:lv(s)}}).next(()=>r)}getEntries(e,n){let r=oi();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=oi(),i=new $t(ae.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,lv(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return N.resolve();let i=new Mt(MF);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Gp(i.first()),Gp(i.last())),o=i.getIterator();let a=o.getNext();return rc(e).Y({index:"documentKeyIndex",range:s},(u,d,p)=>{const g=ae.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&MF(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?p.U(Gp(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ov(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=oi();for(const g of d){const _=this.nr(ae.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(Mp(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=oi();const o=PF(n,r),a=PF(n,_i.max());return rc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,p)=>{const g=this.nr(ae.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new _Z(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return RF(e).get("remoteDocumentGlobalKey").next(n=>(De(!!n),n))}tr(e,n){return RF(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function rZ(t,e){let n;if(e.document)n=JV(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),i=Ju(e.noDocument.readTime);n=Yt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=ae.fromSegments(e.unknownDocument.path),i=Ju(e.unknownDocument.version);n=Yt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new sn(i[0],i[1]);return Ce.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ce.min()))return r}return Yt.newInvalidDocument(e)}}function SF(t){return new mZ(t)}class _Z extends bF{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Ao(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Mt((s,o)=>Le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=sF(this.ar.serializer,o);i=i.add(s.path.popLast());const d=lv(u);r+=d-a.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=sF(this.ar.serializer,o.convertToNoDocument(Ce.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function RF(t){return Xn(t,"remoteDocumentGlobal")}function rc(t){return Xn(t,"remoteDocumentsV14")}function Gp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PF(t,e){const n=e.documentKey.path.toArray();return[t,ov(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function MF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Le(n[s],r[s]),i)return i;return i=Le(n.length,r.length),i||(i=Le(n[n.length-2],r[r.length-2]),i||Le(n[n.length-1],r[r.length-1]))}class yZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class NF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&kp(r.mutation,i,si.empty(),sn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Np();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=oi();const o=xp(),a=xp();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof bo)?s=s.insert(d.key,d):void 0!==p?(o.set(d.key,p.mutation.getFieldMask()),kp(p.mutation,d,p.mutation.getFieldMask(),sn.now())):o.set(d.key,si.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return a.set(d,new yZ(p,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=xp();let i=new $t((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let p=r.get(u)||si.empty();p=a.applyToLocalView(d,p),r.set(u,p);const g=(i.get(a.batchId)||Ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,p=u.value,g=wV();p.forEach(_=>{if(!s.has(_)){const y=MV(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ae.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):hC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Gs());let a=-1,u=s;return o.next(d=>N.forEach(d,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(p)?N.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Ze())).next(p=>({batchId:a,changes:EV(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Np();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Np();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,u=>{const d=(g=n,_=u.child(s),new Co(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();null===o.get(p)&&(o=o.insert(p,Yt.newInvalidDocument(p)))});let a=Np();return o.forEach((u,d)=>{const p=s.get(u);void 0!==p&&kp(p.mutation,d,si.empty(),sn.now()),Mp(n,d)&&(a=a.insert(u,d))}),a})}}class vZ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return N.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:En(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:AC(i.bundledQuery),readTime:En(i.readTime)}),N.resolve();var i}}class IZ{constructor(){this.overlays=new $t(ae.comparator),this.hr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Gs(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $t((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);null===p&&(p=Gs(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=Gs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return N.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yC(n,r));let s=this.hr.get(n);void 0===s&&(s=Ze(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}class xC{constructor(){this.Pr=new Mt(er.Ir),this.Tr=new Mt(er.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new er(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new er(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ae(new ot([])),r=new er(n,e),i=new er(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ae(new ot([])),r=new er(n,e),i=new er(n,e+1);let s=Ze();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new er(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class er{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ae.comparator(e.key,n.key)||Le(e.pr,n.pr)}static Er(e,n){return Le(e.pr,n.pr)||ae.comparator(e.key,n.key)}}class EZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mt(er.Ir)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++;const o=new mC(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new er(n,0),i=new er(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Le);return n.forEach(i=>{const s=new er(i,0),o=new er(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),N.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new er(new ae(s),0);let a=new Mt(Le);return this.wr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.pr)),!0)},o),N.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){De(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return N.forEach(n.mutations,i=>{const s=new er(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new er(n,0),i=this.wr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class wZ{constructor(e){this.vr=e,this.docs=new $t(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=oi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oi();const o=n.path,a=new ae(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||nC(kk(p),r)<=0||(i.has(p.key)||Mp(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ge()}Fr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DZ(this)}getSize(e){return N.resolve(this.size)}}class DZ extends bF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class TZ{constructor(e){this.persistence=e,this.Mr=new Ao(n=>Zu(n),Rp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xC,this.targetCount=0,this.Br=nc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),N.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new nc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.qn(n),N.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Nr.containsKey(n))}}class OC{constructor(e,n){this.Lr={},this.overlays={},this.kr=new yi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new TZ(this),this.indexManager=new lZ,this.remoteDocumentCache=new wZ(r=>this.referenceDelegate.Kr(r)),this.serializer=new iF(n),this.$r=new vZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new EZ(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new CZ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return N.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class CZ extends Fk{constructor(e){super(),this.currentSequenceNumber=e}}class fv{constructor(e){this.persistence=e,this.zr=new xC,this.jr=null}static Hr(e){return new fv(e)}get Jr(){if(this.jr)return this.jr;throw ge()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),N.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,r=>{const i=ae.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return N.or([()=>N.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class AZ{constructor(e){this.serializer=e}N(e,n,r,i){const s=new zy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jk,{unique:!0}),u.createObjectStore("documentMutations"),xF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),xF(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jk,{unique:!0});const g=d.store("mutations"),_=p.map(y=>g.put(y));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:d7});d.createIndex("collectionPathOverlayIndex",h7,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",f7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:e7});d.createIndex("documentKeyIndex",t7),d.createIndex("collectionGroupIndex",n7)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:a7}).createIndex("sequenceNumberIndex",u7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:c7}).createIndex("documentKeyIndex",l7,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=lv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{De(u.userId===s.userId);const d=Xu(this.serializer,u);return IF(e,s.userId,d).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new ot(o),d=[0,Cr(u)];s.push(n.get(d).next(p=>p?N.resolve():n.put({targetId:0,path:Cr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:o7});const r=n.store("collectionParents"),i=new NC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Cr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new ot(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const p=Hs(a);return s(p.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=jp(i),o=oF(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ae(ot.fromString(g.document.name).popFirst(5)):g.noDocument?ae.fromSegments(g.noDocument.path):g.unknownDocument?ae.fromSegments(g.unknownDocument.path):ge()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}si(e,n){const r=n.store("mutations"),i=SF(this.serializer),s=new OC(fv.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let p=null!==(d=a.get(u.userId))&&void 0!==d?d:Ze();Xu(this.serializer,u).keys().forEach(g=>p=p.add(g)),a.set(u.userId,p)}),N.forEach(a,(u,d)=>{const p=new Jn(d),g=av.lt(this.serializer,p),_=s.getIndexManager(p),y=dv.lt(p,this.serializer,_,s.referenceDelegate);return new NF(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new sC(n,yi._e),u).next()})})}}function xF(t){t.createObjectStore("targetDocuments",{keyPath:i7}).createIndex("documentTargetsIndex",s7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",r7,{unique:!0}),t.createObjectStore("targetGlobal")}const kC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VC{constructor(e,n,r,i,s,o,a,u,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=d,this.ai=p,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!VC.D())throw new J(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gZ(this,i),this.Ti=n+"main",this.serializer=new iF(u),this.Ei=new Hi(this.Ti,this.ui,new AZ(this.serializer)),this.Qr=new hZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SF(this.serializer),this.$r=new iZ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===p&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(V.FAILED_PRECONDITION,kC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new yi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,W.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,W.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ia(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return qp(e).get("owner").next(n=>N.resolve(this.Si(n)))}bi(e){return gv(e).delete(this.clientId)}Di(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Xn(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return N.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?N.resolve(!0):qp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new J(V.FAILED_PRECONDITION,kC);return!1}}return!(!this.networkEnabled||!this.inForeground)||gv(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,W.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new sC(n,yi._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>gv(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return dv.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dZ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return av.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ui)?g7:14===u?Gk:13===u?zk:12===u?p7:11===u?Hk:void ge();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new sC(a,this.kr?this.kr.next():yi._e),"readwrite-primary"===n?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw In(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new J(V.FAILED_PRECONDITION,Vk);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return qp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(V.FAILED_PRECONDITION,kC)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qp(e).put("owner",n)}static D(){return Hi.D()}yi(e){const n=qp(e);return n.get("owner").next(r=>this.Si(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(In(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,vt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return In("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){In("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qp(t){return Xn(t,"owner")}function gv(t){return Xn(t,"clientMetadata")}function FC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class LC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ze(),i=Ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LC(e,n.fromCache,r,i)}}class bZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,vt.G6)()?8:Hi.v((0,vt.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bZ;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(sd()<=Us.in.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",pd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):(sd()<=Us.in.DEBUG&&ee("QueryEngine","Query:",pd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(sd()<=Us.in.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",pd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(n))):N.resolve())}ji(e,n){if(gV(n))return N.resolve(null);let r=Gr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=ev(n,null,"F"),r=Gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ze(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Zi(n,a);return this.Xi(n,d,o,u.readTime)?this.ji(e,ev(n,null,"F")):this.es(e,d,n,u)}))})))}Hi(e,n,r,i){return gV(n)||i.isEqual(Ce.min())?N.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?N.resolve(null):(sd()<=Us.in.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pd(n)),this.es(e,o,n,Ok(i,-1)).next(a=>a))})}Zi(e,n){let r=new Mt(vV(e));return n.forEach((i,s)=>{Mp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return sd()<=Us.in.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",pd(n)),this.zi.getDocumentsMatchingQuery(e,n,_i.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class SZ{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new $t(Le),this.rs=new Ao(s=>Zu(s),Rp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function kF(t,e,n,r){return new SZ(t,e,n,r)}function VF(t,e){return UC.apply(this,arguments)}function UC(){return UC=(0,W.Z)(function*(t,e){const n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ze();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:a}))})})}),UC.apply(this,arguments)}function FF(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function LF(t,e,n){let r=Ze(),i=Ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=oi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ce.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function MZ(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cd(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new So(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Ad(t,e,n){return BC.apply(this,arguments)}function BC(){return BC=(0,W.Z)(function*(t,e,n){const r=se(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ia(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),BC.apply(this,arguments)}function mv(t,e,n){const r=se(t);let i=Ce.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const g=se(u),_=g.rs.get(p);return void 0!==_?N.resolve(g.ns.get(_)):g.Qr.getTargetData(d,p)}(r,o,Gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?s:Ze())).next(a=>(jF(r,yV(e),a),{documents:a,hs:s})))}function UF(t,e){const n=se(t),r=se(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function BF(t,e){const n=se(t),r=n.ss.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Ok(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jF(n,e,i),i))}function jF(t,e,n){let r=t.ss.get(e)||Ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function jC(){return jC=(0,W.Z)(function*(t,e,n,r){const i=se(t);let s=Ze(),o=oi();for(const d of n){const p=e.Ps(d.metadata.name);d.document&&(s=s.add(p));const g=e.Is(d);g.setReadTime(e.Ts(d.metadata.readTime)),o=o.insert(p,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Cd(i,(p=r,Gr(hd(ot.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>LF(d,a,o).next(p=>(a.apply(d),p)).next(p=>i.Qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.cs,p.ls)).next(()=>p.cs)))}),jC.apply(this,arguments)}function xZ(t,e){return $C.apply(this,arguments)}function $C(){return $C=(0,W.Z)(function*(t,e,n=Ze()){const r=yield Cd(t,Gr(AC(e.bundledQuery))),i=se(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=En(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Gn.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),$C.apply(this,arguments)}function $F(t,e){return`firestore_clients_${t}_${e}`}function HF(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HC(t,e){return`firestore_targets_${t}_${e}`}class _v{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new _v(e,n,i.state,s):(In("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Wp(e,r.state,i):(In("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=pC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Uk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new yv(e,s):(In("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zC{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new zC(n.clientId,n.onlineState):(In("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GC{constructor(){this.activeTargetIds=pC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qC{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new $t(Le),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=$F(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new GC),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const n=yield e.syncEngine.Li();for(const i of n){if(i===e.Vs)continue;const s=e.getItem($F(e.persistenceKey,i));if(s){const o=yv.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HC(this.persistenceKey,e));if(r){const i=Wp.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HC(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ee("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,W.Z)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(o){let a=yi._e;if(null!=o)try{const u=JSON.parse(o);De("number"==typeof u),a=u}catch(u){In("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==yi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Ys(s)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){const i=new _v(this.currentUser,e,n,r),s=HF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const n=HF(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=HC(this.persistenceKey,e),s=new Wp(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return yv.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return _v.Es(new Jn(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Wp.Es(i,n)}xs(e){return zC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,W.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=pC();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class zF{constructor(){this.no=new GC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new GC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OZ{io(e){}shutdown(){}}class GF{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vv=null;function WC(){return null===vv?vv=268435456+Math.round(2147483648*Math.random()):vv++,"0x"+vv.toString(16)}const kZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VZ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const br="WebChannelConnection";class FZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=WC(),u=this.bo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(d,s,o),this.Co(n,u,d,i).then(p=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw ii("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+id,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){return`${this.fo}/v1/${r}:${kZ[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=WC();return new Promise((o,a)=>{const u=new OW;u.setWithCredentials(!0),u.listenOnce(NW.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case XT.NO_ERROR:const p=u.getResponseJson();ee(br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case XT.TIMEOUT:ee(br,`RPC '${e}' ${s} timed out`),a(new J(V.DEADLINE_EXCEEDED,"Request time out"));break;case XT.HTTP_ERROR:const g=u.getStatus();if(ee(br,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(S){const O=S.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(O)>=0?O:V.UNKNOWN}(y.status);a(new J(E,y.message))}else a(new J(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(V.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ee(br,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ee(br,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Fo(e,n,r){const i=WC(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PW(),a=MW(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");ee(br,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let _=!1,y=!1;const E=new VZ({lo:S=>{y?ee(br,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ee(br,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ee(br,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},ho:()=>g.close()}),C=(S,O,R)=>{S.listen(O,U=>{try{R(U)}catch(te){setTimeout(()=>{throw te},0)}})};return C(g,Hy.EventType.OPEN,()=>{y||ee(br,`RPC '${e}' stream ${i} transport opened.`)}),C(g,Hy.EventType.CLOSE,()=>{y||(y=!0,ee(br,`RPC '${e}' stream ${i} transport closed`),E.Vo())}),C(g,Hy.EventType.ERROR,S=>{y||(y=!0,ii(br,`RPC '${e}' stream ${i} transport errored:`,S),E.Vo(new J(V.UNAVAILABLE,"The operation could not be completed")))}),C(g,Hy.EventType.MESSAGE,S=>{var O;if(!y){const R=S.data[0];De(!!R);const te=R.error||(null===(O=R[0])||void 0===O?void 0:O.error);if(te){ee(br,`RPC '${e}' stream ${i} received error:`,te);const ce=te.status;let Ue=function(mg){const tI=Rn[mg];if(void 0!==tI)return FV(tI)}(ce),It=te.message;void 0===Ue&&(Ue=V.INTERNAL,It="Unknown error status: "+ce+" with message "+te.message),y=!0,E.Vo(new J(Ue,It)),g.close()}else ee(br,`RPC '${e}' stream ${i} received:`,R),E.mo(R)}}),C(a,xW.STAT_EVENT,S=>{S.stat===Sk.PROXY?ee(br,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Sk.NOPROXY&&ee(br,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}}function qF(){return typeof window<"u"?window:null}function Iv(){return typeof document<"u"?document:null}function Zp(t){return new W7(t,!0)}class ZC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class WF{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ZC(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,W.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,W.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,W.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(In(n.toString()),In("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===V.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new J(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,W.Z)(function*(){e.state=0,e.start()}))}__(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LZ extends WF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function Q7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:ge(),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(De(void 0===p||"string"==typeof p),Gn.fromBase64String(p||"")):(De(void 0===p||p instanceof Uint8Array),Gn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const p=void 0===d.code?V.UNKNOWN:FV(d.code);return new J(p,d.message||"")}(o);n=new $V(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=qs(t,r.document.name),s=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):Ce.min(),a=new dr({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(i,s,o,a);n=new sv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=qs(t,r.document),s=r.readTime?En(r.readTime):Ce.min(),o=Yt.newNoDocument(i,s);n=new sv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=qs(t,r.document);n=new sv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ge();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new j7(i,s);n=new jV(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?En(o.readTime):Ce.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=DC(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Jy(u)?{documents:XV(s,u)}:{query:CC(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qV(s,o.resumeToken);const d=IC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=vd(s,o.snapshotVersion.toTimestamp());const d=IC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function J7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=DC(this.serializer),n.removeTarget=e,this.t_(n)}}class UZ extends WF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Y7(t,e){return t&&t.length>0?(De(void 0!==e),t.map(n=>function(i,s){let o=En(i.updateTime?i.updateTime:s);return o.isEqual(Ce.min())&&(o=En(s)),new F7(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.T_(r,n)}return De(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=DC(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bp(this.serializer,r))};this.t_(n)}}class BZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new J(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,wC(n,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(V.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,wC(n,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(V.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class $Z{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(In(n),this.g_=!1):ee("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class HZ{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,W.Z)(function*(){var u;Na(o)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,W.Z)(function*(p){const g=se(p);g.v_.add(4),yield bd(g),g.x_.set("Unknown"),g.v_.delete(4),yield Kp(g)}),function d(p){return u.apply(this,arguments)})(o))}))}),this.x_=new $Z(r,i)}}function Kp(t){return QC.apply(this,arguments)}function QC(){return QC=(0,W.Z)(function*(t){if(Na(t))for(const e of t.F_)yield e(!0)}),QC.apply(this,arguments)}function bd(t){return YC.apply(this,arguments)}function YC(){return YC=(0,W.Z)(function*(t){for(const e of t.F_)yield e(!1)}),YC.apply(this,arguments)}function Ev(t,e){const n=se(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),eA(n)?XC(n):Rd(n).Jo()&&JC(n,e))}function Qp(t,e){const n=se(t),r=Rd(n);n.C_.delete(e),r.Jo()&&ZF(n,e),0===n.C_.size&&(r.Jo()?r.Xo():Na(n)&&n.x_.set("Unknown"))}function JC(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rd(t).c_(e)}function ZF(t,e){t.O_.Oe(e),Rd(t).l_(e)}function XC(t){t.O_=new H7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Rd(t).start(),t.x_.p_()}function eA(t){return Na(t)&&!Rd(t).Ho()&&t.C_.size>0}function Na(t){return 0===se(t).v_.size}function KF(t){t.O_=void 0}function zZ(t){return tA.apply(this,arguments)}function tA(){return tA=(0,W.Z)(function*(t){t.C_.forEach((e,n)=>{JC(t,e)})}),tA.apply(this,arguments)}function GZ(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,W.Z)(function*(t,e){KF(t),eA(t)?(t.x_.S_(e),XC(t)):t.x_.set("Unknown")}),nA.apply(this,arguments)}function qZ(t,e,n){return rA.apply(this,arguments)}function rA(){return rA=(0,W.Z)(function*(t,e,n){if(t.x_.set("Online"),e instanceof $V&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wv(t,r)}else if(e instanceof sv?t.O_.$e(e):e instanceof jV?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ce.min()))try{const r=yield FF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.C_.get(d);p&&s.C_.set(d,p.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const p=s.C_.get(u);if(!p)return;s.C_.set(u,p.withResumeToken(Gn.EMPTY_BYTE_STRING,p.snapshotVersion)),ZF(s,u);const g=new So(p.target,u,d,p.sequenceNumber);JC(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield wv(t,r)}var r}),rA.apply(this,arguments)}function wv(t,e,n){return iA.apply(this,arguments)}function iA(){return iA=(0,W.Z)(function*(t,e,n){if(!Ia(e))throw e;t.v_.add(1),yield bd(t),t.x_.set("Offline"),n||(n=()=>FF(t.localStore)),t.asyncQueue.enqueueRetryable((0,W.Z)(function*(){ee("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Kp(t)}))}),iA.apply(this,arguments)}function QF(t,e){return e().catch(n=>wv(t,n,e))}function Sd(t){return sA.apply(this,arguments)}function sA(){return sA=(0,W.Z)(function*(t){const e=se(t),n=xa(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;WZ(e);)try{const i=yield MZ(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,ZZ(e,i)}catch(i){yield wv(e,i)}YF(e)&&JF(e)}),sA.apply(this,arguments)}function WZ(t){return Na(t)&&t.D_.length<10}function ZZ(t,e){t.D_.push(e);const n=xa(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function YF(t){return Na(t)&&!xa(t).Ho()&&t.D_.length>0}function JF(t){xa(t).start()}function KZ(t){return oA.apply(this,arguments)}function oA(){return oA=(0,W.Z)(function*(t){xa(t).d_()}),oA.apply(this,arguments)}function QZ(t){return aA.apply(this,arguments)}function aA(){return aA=(0,W.Z)(function*(t){const e=xa(t);for(const n of t.D_)e.I_(n.mutations)}),aA.apply(this,arguments)}function YZ(t,e,n){return uA.apply(this,arguments)}function uA(){return uA=(0,W.Z)(function*(t,e,n){const r=t.D_.shift(),i=_C.from(r,e,n);yield QF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Sd(t)}),uA.apply(this,arguments)}function JZ(t,e){return cA.apply(this,arguments)}function cA(){return cA=(0,W.Z)(function*(t,e){var n;e&&xa(t).P_&&(yield(n=(0,W.Z)(function*(i,s){if(VV(a=s.code)&&a!==V.ABORTED){const o=i.D_.shift();xa(i).Zo(),yield QF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Sd(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),YF(t)&&JF(t)}),cA.apply(this,arguments)}function XF(t,e){return lA.apply(this,arguments)}function lA(){return lA=(0,W.Z)(function*(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Na(n);n.v_.add(3),yield bd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Kp(n)}),lA.apply(this,arguments)}function dA(t,e){return hA.apply(this,arguments)}function hA(){return hA=(0,W.Z)(function*(t,e){const n=se(t);e?(n.v_.delete(2),yield Kp(n)):e||(n.v_.add(2),yield bd(n),n.x_.set("Unknown"))}),hA.apply(this,arguments)}function Rd(t){return t.N_||(t.N_=function(n,r,i){const s=se(n);return s.R_(),new LZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:zZ.bind(null,t),To:GZ.bind(null,t),u_:qZ.bind(null,t)}),t.F_.push(function(){var e=(0,W.Z)(function*(n){n?(t.N_.Zo(),eA(t)?XC(t):t.x_.set("Unknown")):(yield t.N_.stop(),KF(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function xa(t){return t.B_||(t.B_=function(n,r,i){const s=se(n);return s.R_(),new UZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:KZ.bind(null,t),To:JZ.bind(null,t),E_:QZ.bind(null,t),T_:YZ.bind(null,t)}),t.F_.push(function(){var e=(0,W.Z)(function*(n){n?(t.B_.Zo(),yield Sd(t)):(yield t.B_.stop(),t.D_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.B_}class fA{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fA(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pd(t,e){if(In("AsyncQueue",`${e}: ${t}`),Ia(t))return new J(V.UNAVAILABLE,`${e}: ${t}`);throw t}class Md{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Np(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class eL{constructor(){this.L_=new $t(ae.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(n):1===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):ge():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nd{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nd(e,n,Md.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class XZ{constructor(){this.q_=void 0,this.Q_=[]}}class eK{constructor(){this.queries=new Ao(e=>_V(e),Pp),this.onlineState="Unknown",this.K_=new Set}}function pA(t,e){return gA.apply(this,arguments)}function gA(){return gA=(0,W.Z)(function*(t,e){const n=se(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new XZ),i)try{s.q_=yield n.onListen(r)}catch(o){const a=Pd(o,`Initialization of query '${pd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&yA(n)}),gA.apply(this,arguments)}function mA(t,e){return _A.apply(this,arguments)}function _A(){return _A=(0,W.Z)(function*(t,e){const n=se(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),_A.apply(this,arguments)}function tK(t,e){const n=se(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&yA(n)}function nK(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function yA(t){t.K_.forEach(e=>{e.next()})}class vA{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class rK{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class tL{constructor(e){this.serializer=e}Ps(e){return qs(this.serializer,e)}Is(e){return e.metadata.exists?JV(this.serializer,e.document,!1):Yt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return En(e)}}class iK{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nL(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=ot.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new tL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,W.Z)(function*(){const n=yield function NZ(t,e,n,r){return jC.apply(this,arguments)}(e.localStore,new tL(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield xZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function nL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class rL{constructor(e){this.key=e}}class iL{constructor(e){this.key=e}}class sL{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Ze(),this.mutatedKeys=Ze(),this.ua=vV(e),this.ca=new Md(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new eL,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),y=Mp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;_&&y?_.data.isEqual(y.data)?E!==C&&(r.track({type:3,doc:y}),S=!0):this.Ia(_,y)||(r.track({type:2,doc:y}),S=!0,(u&&this.ua(y,u)>0||d&&this.ua(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),S=!0):_&&!y&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(y?(o=o.add(y),s=C?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((p,g)=>function(y,E){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return C(y)-C(E)}(p.type,g.type)||this.ua(p.doc,g.doc)),this.Ta(r),i=null!=i&&i;const a=n&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,d=u!==this._a;return this._a=u,0!==o.length||d?{snapshot:new Nd(this.query,e.ca,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new eL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Ze(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new iL(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new rL(r))}),n}Ra(e){this.oa=e.hs,this.aa=Ze();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Nd.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class sK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oK{constructor(e){this.key=e,this.ma=!1}}class aK{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ao(a=>_V(a),Pp),this.pa=new Map,this.ya=new Set,this.wa=new $t(ae.comparator),this.Sa=new Map,this.ba=new xC,this.Da={},this.Ca=new Map,this.va=nc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function uK(t,e){return IA.apply(this,arguments)}function IA(){return IA=(0,W.Z)(function*(t,e){const n=HA(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield Cd(n.localStore,Gr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield EA(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Ev(n.remoteStore,o)}return i}),IA.apply(this,arguments)}function EA(t,e,n,r,i){return wA.apply(this,arguments)}function wA(){return wA=(0,W.Z)(function*(t,e,n,r,i){t.Ma=(g,_,y)=>{return(E=(0,W.Z)(function*(S,O,R,U){let te=O.view.ha(R);te.Xi&&(te=yield mv(S.localStore,O.query,!1).then(({documents:qn})=>O.view.ha(qn,te)));const ce=U&&U.targetChanges.get(O.targetId),Ue=U&&null!=U.targetMismatches.get(O.targetId),It=O.view.applyChanges(te,S.isPrimaryClient,ce,Ue);return NA(S,O.targetId,It.da),It.snapshot}),function C(S,O,R,U){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield mv(t.localStore,e,!0),o=new sL(e,s.hs),a=o.ha(s.documents),u=Lp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);NA(t,n,d.da);const p=new sK(e,n,o);return t.ga.set(e,p),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),d.snapshot}),wA.apply(this,arguments)}function cK(t,e){return DA.apply(this,arguments)}function DA(){return DA=(0,W.Z)(function*(t,e){const n=se(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Pp(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ad(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Qp(n.remoteStore,r.targetId),xd(n,r.targetId)}).catch(va))):(xd(n,r.targetId),yield Ad(n.localStore,r.targetId,!0))}),DA.apply(this,arguments)}function TA(){return TA=(0,W.Z)(function*(t,e,n){const r=zA(t);try{const i=yield function(o,a){const u=se(o),d=sn.now(),p=a.reduce((y,E)=>y.add(E.key),Ze());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=oi(),C=Ze();return u.os.getEntries(y,p).next(S=>{E=S,E.forEach((O,R)=>{R.isValidDocument()||(C=C.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(S=>{g=S;const O=[];for(const R of a){const U=U7(R,g.get(R.key).overlayedDocument);null!=U&&O.push(new bo(R.key,U,nV(U.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,O,a)}).next(S=>{_=S;const O=S.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(y,S.batchId,O)})}).then(()=>({batchId:_.batchId,changes:EV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Da[o.currentUser.toKey()];d||(d=new $t(Le)),d=d.insert(a,u),o.Da[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Ro(r,i.changes),yield Sd(r.remoteStore)}catch(i){const s=Pd(i,"Failed to persist write");n.reject(s)}}),TA.apply(this,arguments)}function oL(t,e){return CA.apply(this,arguments)}function CA(){return CA=(0,W.Z)(function*(t,e){const n=se(t);try{const r=yield function PZ(t,e){const n=se(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;a.push(n.Qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(s,p.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var C,S,O;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Gn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,r)),i=i.insert(g,y),S=y,O=p,(0===(C=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(s,y))});let u=oi(),d=Ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(LF(s,o,e.documentUpdates).next(p=>{u=p.cs,d=p.ls})),!r.isEqual(Ce.min())){const p=n.Qr.getLastRemoteSnapshotVersion(s).next(g=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ns=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?De(o.ma):i.removedDocuments.size>0&&(De(o.ma),o.ma=!1))}),yield Ro(n,r,e)}catch(r){yield va(r)}}),CA.apply(this,arguments)}function aL(t,e,n){const r=se(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=se(o);u.onlineState=a;let d=!1;u.queries.forEach((p,g)=>{for(const _ of g.Q_)_.U_(a)&&(d=!0)}),d&&yA(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dK(t,e,n){return AA.apply(this,arguments)}function AA(){return AA=(0,W.Z)(function*(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new $t(ae.comparator);o=o.insert(s,Yt.newNoDocument(s,Ce.min()));const a=Ze().add(s),u=new Fp(Ce.min(),new Map,new $t(Le),o,a);yield oL(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),xA(r)}else yield Ad(r.localStore,e,!1).then(()=>xd(r,e,n)).catch(va)}),AA.apply(this,arguments)}function hK(t,e){return bA.apply(this,arguments)}function bA(){return bA=(0,W.Z)(function*(t,e){const n=se(t),r=e.batch.batchId;try{const i=yield function RZ(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){const g=d.batch,_=g.keys();let y=N.resolve();return _.forEach(E=>{y=y.next(()=>p.getEntry(u,E)).next(C=>{const S=d.docVersions.get(E);De(null!==S),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ze();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);MA(n,r,null),PA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ro(n,i)}catch(i){yield va(i)}}),bA.apply(this,arguments)}function fK(t,e,n){return SA.apply(this,arguments)}function SA(){return SA=(0,W.Z)(function*(t,e,n){const r=se(t);try{const i=yield function(o,a){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(De(null!==g),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);MA(r,e,n),PA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ro(r,i)}catch(i){yield va(i)}}),SA.apply(this,arguments)}function RA(){return RA=(0,W.Z)(function*(t,e){const n=se(t);Na(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=se(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=Pd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RA.apply(this,arguments)}function PA(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function MA(t,e,n){const r=se(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||uL(t,r)})}function uL(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Qp(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),xA(t))}function NA(t,e,n){for(const r of n)r instanceof rL?(t.ba.addReference(r.key,e),gK(t,r)):r instanceof iL?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||uL(t,r.key)):ge()}function gK(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ya.add(r),xA(t))}function xA(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new ae(ot.fromString(e)),r=t.va.next();t.Sa.set(r,new oK(n)),t.wa=t.wa.insert(n,r),Ev(t.remoteStore,new So(Gr(hd(n.path)),r,"TargetPurposeLimboResolution",yi._e))}}function Ro(t,e,n){return OA.apply(this,arguments)}function OA(){return OA=(0,W.Z)(function*(t,e,n){const r=se(t),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const p=LC.Ki(u.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,W.Z)(function*(d,p){const g=se(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(p,y=>N.forEach(y.qi,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>N.forEach(y.Qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!Ia(_))throw _;ee("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const y=_.targetId;if(!_.fromCache){const E=g.ns.get(y),S=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ns=g.ns.insert(y,S)}}}),function u(d,p){return a.apply(this,arguments)})(r.localStore,s))}),OA.apply(this,arguments)}function mK(t,e){return kA.apply(this,arguments)}function kA(){return kA=(0,W.Z)(function*(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=yield VF(n.localStore,e);n.currentUser=e,(s=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new J(V.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ro(n,r.us)}var s}),kA.apply(this,arguments)}function _K(t,e){const n=se(t),r=n.Sa.get(e);if(r&&r.ma)return Ze().add(r.key);{let i=Ze();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function yK(t,e){return VA.apply(this,arguments)}function VA(){return VA=(0,W.Z)(function*(t,e){const n=se(t),r=yield mv(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&NA(n,e.targetId,i.da),i}),VA.apply(this,arguments)}function vK(t,e){return FA.apply(this,arguments)}function FA(){return FA=(0,W.Z)(function*(t,e){const n=se(t);return BF(n.localStore,e).then(r=>Ro(n,r))}),FA.apply(this,arguments)}function IK(t,e,n,r){return LA.apply(this,arguments)}function LA(){return LA=(0,W.Z)(function*(t,e,n,r){const i=se(t),s=yield function(a,u){const d=se(a),p=se(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.vn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield Sd(i.remoteStore):"acknowledged"===n||"rejected"===n?(MA(i,e,r||null),PA(i,e),u=e,se(se(i.localStore).mutationQueue).Mn(u)):ge(),yield Ro(i,s)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),LA.apply(this,arguments)}function UA(){return UA=(0,W.Z)(function*(t,e){const n=se(t);if(HA(n),zA(n),!0===e&&!0!==n.Fa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield cL(n,r.toArray());n.Fa=!0,yield dA(n.remoteStore,!0);for(const s of i)Ev(n.remoteStore,s)}else if(!1===e&&!1!==n.Fa){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(xd(n,o),Ad(n.localStore,o,!0))),Qp(n.remoteStore,o)}),yield i,yield cL(n,r),function(o){const a=se(o);a.Sa.forEach((u,d)=>{Qp(a.remoteStore,d)}),a.ba.mr(),a.Sa=new Map,a.wa=new $t(ae.comparator)}(n),n.Fa=!1,yield dA(n.remoteStore,!1)}}),UA.apply(this,arguments)}function cL(t,e,n){return BA.apply(this,arguments)}function BA(){return BA=(0,W.Z)(function*(t,e,n){const r=se(t),i=[],s=[];for(const o of e){let a;const u=r.pa.get(o);if(u&&0!==u.length){a=yield Cd(r.localStore,Gr(u[0]));for(const d of u){const p=r.ga.get(d),g=yield yK(r,p);g.snapshot&&s.push(g.snapshot)}}else{const d=yield UF(r.localStore,o);a=yield Cd(r.localStore,d),yield EA(r,lL(d),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),BA.apply(this,arguments)}function lL(t){return pV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wK(t){return n=se(t).localStore,se(se(n).persistence).Li();var n}function DK(t,e,n,r){return jA.apply(this,arguments)}function jA(){return jA=(0,W.Z)(function*(t,e,n,r){const i=se(t);if(i.Fa)return void ee("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield BF(i.localStore,yV(s[0])),a=Fp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Gn.EMPTY_BYTE_STRING);yield Ro(i,o,a);break}case"rejected":yield Ad(i.localStore,e,!0),xd(i,e,r);break;default:ge()}}),jA.apply(this,arguments)}function TK(t,e,n){return $A.apply(this,arguments)}function $A(){return $A=(0,W.Z)(function*(t,e,n){const r=HA(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const s=yield UF(r.localStore,i),o=yield Cd(r.localStore,s);yield EA(r,lL(s),o.targetId,!1,o.resumeToken),Ev(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&(yield Ad(r.localStore,i,!1).then(()=>{Qp(r.remoteStore,i),xd(r,i)}).catch(va))}}),$A.apply(this,arguments)}function HA(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_K.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dK.bind(null,e),e.fa.u_=tK.bind(null,e.eventManager),e.fa.xa=nK.bind(null,e.eventManager),e}function zA(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fK.bind(null,e),e}class Yp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,W.Z)(function*(){n.serializer=Zp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kF(this.persistence,new OF,e.initialUser,this.serializer)}createPersistence(e){return new OC(fv.Hr,this.serializer)}createSharedClientState(e){return new zF}terminate(){var e=this;return(0,W.Z)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GA extends Yp{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e),yield r.Na.initialize(r,e),yield zA(r.Na.syncEngine),yield Sd(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return kF(this.persistence,new OF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new CF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new YW(n,this.persistence);return new QW(e.asyncQueue,r)}createPersistence(e){const n=FC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new VC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qF(),Iv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zF}}class dL extends GA{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof qC&&(r.sharedClientState.syncEngine={Zs:IK.bind(null,i),Xs:DK.bind(null,i),eo:TK.bind(null,i),Li:wK.bind(null,i),Ys:vK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,W.Z)(function*(o){yield function EK(t,e){return UA.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=qF();if(!qC.D(n))throw new J(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qC(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Od{initialize(e,n){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>aL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=mK.bind(null,r.syncEngine),yield dA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eK}createDatastore(e){const n=Zp(e.databaseInfo.databaseId),r=new FZ(e.databaseInfo);return new BZ(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>aL(this.syncEngine,n,0),a=GF.D()?new GF:new OZ,new HZ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,p){const g=new aK(i,s,o,a,u,d);return p&&(g.Fa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,W.Z)(function*(){var n,r;yield(r=(0,W.Z)(function*(s){const o=se(s);ee("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield bd(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function hL(t,e=10240){let n=0;return{read:()=>(0,W.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class bK{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new zn,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,W.Z)(function*(){const n=yield e.Ka();if(null===n)return null;const r=e.qa.decode(n),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new rK(JSON.parse(s),n.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,W.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ua(e){var n=this;return(0,W.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const r=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,W.Z)(function*(){const n=yield e.ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class SK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,W.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new J(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,W.Z)(function*(o,a){const u=se(o),d={documents:a.map(y=>Up(u.serializer,y))},p=yield u.vo("BatchGetDocuments",u.serializer.databaseId,ot.emptyPath(),d,a.length),g=new Map;p.forEach(y=>{const E=function K7(t,e){return"found"in e?function(r,i){De(!!i.found);const s=qs(r,i.found.name),o=En(i.found.updateTime),a=i.found.createTime?En(i.found.createTime):Ce.min(),u=new dr({mapValue:{fields:i.found.fields}});return Yt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){De(!!i.missing),De(!!i.readTime);const s=qs(r,i.missing),o=En(i.readTime);return Yt.newNoDocument(s,o)}(t,e):ge()}(u.serializer,y);g.set(E.key.toString(),E)});const _=[];return a.forEach(y=>{const E=g.get(y.toString());De(!!E),_.push(E)}),_}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ae.fromPath(i);e.mutations.push(new gC(s,e.precondition(s)))}),yield(r=(0,W.Z)(function*(s,o){const a=se(s),u={writes:o.map(d=>Bp(a.serializer,d))};yield a.So("Commit",a.serializer.databaseId,ot.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ge();n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new J(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RK{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new ZC(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,W.Z)(function*(){const n=new SK(e.datastore),r=e.Ja(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const n=this.updateFunction(e);return!wp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!VV(n)}return!1}}class PK{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jn.UNAUTHENTICATED,this.clientId=Nk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,W.Z)(function*(a){ee("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Pd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Tv(t,e){return qA.apply(this,arguments)}function qA(){return qA=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(s){r.isEqual(s)||(yield VF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),qA.apply(this,arguments)}function WA(t,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield KA(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>XF(e.remoteStore,i)),t._onlineComponents=e}),ZA.apply(this,arguments)}function fL(t){return"FirebaseError"===t.name?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function KA(t){return QA.apply(this,arguments)}function QA(){return QA=(0,W.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!fL(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),yield Tv(t,new Yp)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield Tv(t,new Yp);return t._offlineComponents}),QA.apply(this,arguments)}function Cv(t){return YA.apply(this,arguments)}function YA(){return YA=(0,W.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield WA(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield WA(t,new Od))),t._onlineComponents}),YA.apply(this,arguments)}function pL(t){return KA(t).then(e=>e.persistence)}function kd(t){return KA(t).then(e=>e.localStore)}function gL(t){return Cv(t).then(e=>e.remoteStore)}function JA(t){return Cv(t).then(e=>e.syncEngine)}function Vd(t){return XA.apply(this,arguments)}function XA(){return XA=(0,W.Z)(function*(t){const e=yield Cv(t),n=e.eventManager;return n.onListen=uK.bind(null,e.syncEngine),n.onUnlisten=cK.bind(null,e.syncEngine),n}),XA.apply(this,arguments)}function _L(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const p=new Dv({next:_=>{o.enqueueAndForget(()=>mA(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new J(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new J(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new vA(hd(a.path),p,{includeMetadataChanges:!0,Z_:!0});return pA(s,g)}(yield Vd(t),t.asyncQueue,e,n,r)})),r.promise}function yL(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const p=new Dv({next:_=>{o.enqueueAndForget(()=>mA(s,g)),_.fromCache&&"server"===u.source?d.reject(new J(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new vA(a,p,{includeMetadataChanges:!0,Z_:!0});return pA(s,g)}(yield Vd(t),t.asyncQueue,e,n,r)})),r.promise}function vL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const IL=new Map;function e0(t,e,n){if(!n)throw new J(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EL(t,e,n,r){if(!0===e&&!0===r)throw new J(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wL(t){if(!ae.isDocumentKey(t))throw new J(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DL(t){if(ae.isDocumentKey(t))throw new J(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Av(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ge()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Av(t);throw new J(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TL(t,e){if(e<=0)throw new J(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class CL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new LW;switch(r.type){case"firstParty":return new $W(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IL.get(n);r&&(ee("ComponentProvider","Removing Datastore"),IL.delete(n),r.terminate())}(this),Promise.resolve()}}class hr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hr(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Ws extends hr{constructor(e,n,r){super(e,n,hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ae(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function bL(t,e,...n){if(t=(0,vt.m9)(t),e0("collection","path",e),t instanceof Jp){const r=ot.fromString(e,...n);return DL(r),new Ws(t,null,r)}{if(!(t instanceof Jt||t instanceof Ws))throw new J(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return DL(r),new Ws(t.firestore,null,r)}}function bv(t,e,...n){if(t=(0,vt.m9)(t),1===arguments.length&&(e=Nk.newId()),e0("doc","path",e),t instanceof Jp){const r=ot.fromString(e,...n);return wL(r),new Jt(t,null,new ae(r))}{if(!(t instanceof Jt||t instanceof Ws))throw new J(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return wL(r),new Jt(t.firestore,t instanceof Ws?t.converter:null,new ae(r))}}function SL(t,e){return t=(0,vt.m9)(t),e=(0,vt.m9)(e),(t instanceof Jt||t instanceof Ws)&&(e instanceof Jt||e instanceof Ws)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function t0(t,e){return t=(0,vt.m9)(t),e=(0,vt.m9)(e),t instanceof hr&&e instanceof hr&&t.firestore===e.firestore&&Pp(t._query,e._query)&&t.converter===e.converter}class $K{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ZC(this,"async_queue_retry"),this._u=()=>{const n=Iv();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Iv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Iv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new zn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,W.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!Ia(n))throw n;ee("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,In("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=fA.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&ge()}verifyOperationInProgress(){}hu(){var e=this;return(0,W.Z)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function n0(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class HK{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ht extends Jp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $K,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RL(this),this._firestoreClient.terminate()}}function pn(t){return t._firestoreClient||RL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function RL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new y7(t._databaseId,u,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,vL(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;t._firestoreClient=new PK(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function PL(t,e,n){const r=new zn;return t.asyncQueue.enqueue((0,W.Z)(function*(){try{yield Tv(t,n),yield WA(t,e),r.resolve()}catch(i){const s=i;if(!fL(s))throw s;ii("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function ML(t){if(t._initialized||t._terminated)throw new J(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Gn.fromBase64String(e))}catch(n){throw new J(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Po{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ic{constructor(e){this._methodName=e}}class Sv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}const eQ=/^__.*__$/;class tQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new _d(e,this.data,n,this.fieldTransforms)}}class NL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Rv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Rv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Nv(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(xL(this.du)&&eQ.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class nQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zp(e)}Su(e,n,r,i=!1){return new Rv({du:e,methodName:n,wu:r,path:Qt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sc(t){const e=t._freezeSettings(),n=Zp(t._databaseId);return new nQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pv(t,e,n,r,i,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);l0("Data must be an object, but it was:",o,r);const a=VL(r,o);let u,d;if(s.merge)u=new si(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=tg(e,g,n);if(!o.contains(_))throw new J(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);LL(p,_)||p.push(_)}u=new si(p),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new tQ(new dr(a),u,d)}class eg extends ic{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function OL(t,e,n){return new Rv({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class r0 extends ic{_toFieldTransform(e){return new Op(e.path,new gd)}isEqual(e){return e instanceof r0}}class s0 extends ic{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=OL(this,e,!0),r=this.bu.map(s=>oc(s,n)),i=new Ku(r);return new Op(e.path,i)}isEqual(e){return e instanceof s0&&(0,vt.vZ)(this.bu,e.bu)}}class o0 extends ic{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=OL(this,e,!0),r=this.bu.map(s=>oc(s,n)),i=new Qu(r);return new Op(e.path,i)}isEqual(e){return e instanceof o0&&(0,vt.vZ)(this.bu,e.bu)}}class a0 extends ic{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new md(e.serializer,CV(e.serializer,this.Du));return new Op(e.path,n)}isEqual(e){return e instanceof a0&&this.Du===e.Du}}function u0(t,e,n,r){const i=t.Su(1,e,n);l0("Data must be an object, but it was:",i,r);const s=[],o=dr.empty();Ea(r,(u,d)=>{const p=Mv(e,u,n);d=(0,vt.m9)(d);const g=i.fu(p);if(d instanceof eg)s.push(p);else{const _=oc(d,g);null!=_&&(s.push(p),o.set(p,_))}});const a=new si(s);return new NL(o,a,i.fieldTransforms)}function c0(t,e,n,r,i,s){const o=t.Su(1,e,n),a=[tg(e,r,n)],u=[i];if(s.length%2!=0)throw new J(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(tg(e,s[_])),u.push(s[_+1]);const d=[],p=dr.empty();for(let _=a.length-1;_>=0;--_)if(!LL(d,a[_])){const y=a[_];let E=u[_];E=(0,vt.m9)(E);const C=o.fu(y);if(E instanceof eg)d.push(y);else{const S=oc(E,C);null!=S&&(d.push(y),p.set(y,S))}}const g=new si(d);return new NL(p,g,o.fieldTransforms)}function kL(t,e,n,r=!1){return oc(n,t.Su(r?4:3,e))}function oc(t,e){if(FL(t=(0,vt.m9)(t)))return l0("Unsupported field value:",e,t),VL(t,e);if(t instanceof ic)return function(r,i){if(!xL(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=oc(a,i.gu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,vt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return CV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=sn.fromDate(r);return{timestampValue:vd(i.serializer,s)}}if(r instanceof sn){const s=new sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vd(i.serializer,s)}}if(r instanceof Sv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zs)return{bytesValue:qV(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:EC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Av(r)}`)}(t,e)}function VL(t,e){const n={};return Wk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(t,(r,i)=>{const s=oc(i,e.Ru(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function FL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sn||t instanceof Sv||t instanceof Zs||t instanceof Jt||t instanceof ic)}function l0(t,e,n){if(!FL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Av(n);throw e.pu("an object"===r?t+" a custom object":t+" "+r)}var i}function tg(t,e,n){if((e=(0,vt.m9)(e))instanceof Po)return e._internalPath;if("string"==typeof e)return Mv(t,e);throw Nv("Field path arguments must be of type string or ",t,!1,void 0,n)}const rQ=new RegExp("[~\\*/\\[\\]]");function Mv(t,e,n){if(e.search(rQ)>=0)throw Nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Po(...e.split("."))._internalPath}catch{throw Nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(V.INVALID_ARGUMENT,a+t+u)}function LL(t,e){return t.some(n=>n.isEqual(e))}class ng{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class iQ extends ng{data(){return super.data()}}function xv(t,e){return"string"==typeof e?Mv(t,e):e instanceof Po?e._internalPath:e._delegate._internalPath}function UL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d0{}class rg extends d0{}function Oa(t,e,...n){let r=[];e instanceof d0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Fd).length,a=s.filter(u=>u instanceof ig).length;if(o>1||o>0&&a>0)throw new J(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ig extends rg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ig(e,n,r)}_apply(e){const n=this._parse(e);return HL(e._query,n),new hr(e.firestore,e.converter,fC(e._query,n))}_parse(e){const n=sc(e.firestore);return function(s,o,a,u,d,p,g){let _;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new J(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){$L(g,p);const y=[];for(const E of g)y.push(jL(u,s,E));_={arrayValue:{values:y}}}else _=jL(u,s,g)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||$L(g,p),_=kL(a,"where",g,"in"===p||"not-in"===p);return at.create(d,p,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Fd extends d0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:St.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)HL(o,u),o=fC(o,u)}(e._query,n),new hr(e.firestore,e.converter,fC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class h0 extends rg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new h0(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sp(s,o)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Co(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Ov extends rg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ov(e,n,r)}_apply(e){return new hr(e.firestore,e.converter,ev(e._query,this._limit,this._limitType))}}class kv extends rg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new kv(e,n,r)}_apply(e){const n=BL(e,this.type,this._docOrFields,this._inclusive);return new hr(e.firestore,e.converter,(s=n,new Co((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Vv extends rg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vv(e,n,r)}_apply(e){const n=BL(e,this.type,this._docOrFields,this._inclusive);return new hr(e.firestore,e.converter,(s=n,new Co((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function BL(t,e,n,r){if(n[0]=(0,vt.m9)(n[0]),n[0]instanceof ng)return function(s,o,a,u,d){if(!u)throw new J(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const g of fd(s))if(g.field.isKeyField())p.push(Wu(o,u.key));else{const _=u.data.field(g.field);if(Wy(_))throw new J(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new J(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}p.push(_)}return new ba(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=sc(t.firestore);return function(o,a,u,d,p,g){const _=o.explicitOrderBy;if(p.length>_.length)throw new J(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<p.length;E++){const C=p[E];if(_[E].field.isKeyField()){if("string"!=typeof C)throw new J(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!hC(o)&&-1!==C.indexOf("/"))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const S=o.path.child(ot.fromString(C));if(!ae.isDocumentKey(S))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const O=new ae(S);y.push(Wu(a,O))}else{const S=kL(u,d,C);y.push(S)}}return new ba(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function jL(t,e,n){if("string"==typeof(n=(0,vt.m9)(n))){if(""===n)throw new J(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hC(e)&&-1!==n.indexOf("/"))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!ae.isDocumentKey(r))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wu(t,new ae(r))}if(n instanceof Jt)return Wu(t,n._key);throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Av(n)}.`)}function $L(t,e){if(!Array.isArray(t)||0===t.length)throw new J(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HL(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(V.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f0{convertValue(e,n="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(To(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ea(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Sv(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tp(e));default:return null}}convertTimestamp(e){const n=wa(e);return new sn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);De(rF(r));const i=new Da(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||In(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Fv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fQ extends f0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends ng{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sg extends Mo{data(e={}){return super.data(e)}}class ka{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ac(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sg(this._firestore,this._userDataWriter,r.key,r,new ac(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new sg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ac(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new sg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ac(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:gQ(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function GL(t,e){return t instanceof Mo&&e instanceof Mo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ka&&e instanceof ka&&t._firestore===e._firestore&&t0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Va extends f0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function qL(t,e,n){t=it(t,Jt);const r=it(t.firestore,Ht),i=Fv(t.converter,e,n);return Ld(r,[Pv(sc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,on.none())])}function WL(t,e,n,...r){t=it(t,Jt);const i=it(t.firestore,Ht),s=sc(i);let o;return o="string"==typeof(e=(0,vt.m9)(e))||e instanceof Po?c0(s,"updateDoc",t._key,e,n,r):u0(s,"updateDoc",t._key,e),Ld(i,[o.toMutation(t._key,on.exists(!0))])}function ZL(t,...e){var n,r,i;t=(0,vt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||n0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(n0(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,p;if(t instanceof Jt)d=it(t.firestore,Ht),p=hd(t._key.path),u={next:g=>{e[o]&&e[o](p0(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=it(t,hr);d=it(g.firestore,Ht),p=g._query;const _=new Va(d);u={next:y=>{e[o]&&e[o](new ka(d,_,g,y))},error:e[o+1],complete:e[o+2]},UL(t._query)}return function(_,y,E,C){const S=new Dv(C),O=new vA(y,S,E);return _.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return pA(yield Vd(_),O)})),()=>{S.La(),_.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return mA(yield Vd(_),O)}))}}(pn(d),p,a,u)}function Ld(t,e){return function(r,i){const s=new zn;return r.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function lK(t,e,n){return TA.apply(this,arguments)}(yield JA(r),i,s)})),s.promise}(pn(t),e)}function p0(t,e,n){const r=n.docs.get(e._key),i=new Va(t);return new Mo(t,i,e._key,r,new ac(n.hasPendingWrites,n.fromCache),e.converter)}const xQ={maxAttempts:5};class KL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sc(e)}set(e,n,r){this._verifyNotCommitted();const i=Fa(e,this._firestore),s=Fv(i.converter,n,r),o=Pv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Fa(e,this._firestore);let o;return o="string"==typeof(n=(0,vt.m9)(n))||n instanceof Po?c0(this._dataReader,"WriteBatch.update",s._key,n,r,i):u0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fa(e,this._firestore);return this._mutations=this._mutations.concat(new yd(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fa(t,e){if((t=(0,vt.m9)(t)).firestore!==e)throw new J(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class OQ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=sc(n)}get(n){const r=Fa(n,this._firestore),i=new fQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ge();const o=s[0];if(o.isFoundDocument())return new ng(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ng(this._firestore,i,r._key,null,r.converter);throw ge()})}set(n,r,i){const s=Fa(n,this._firestore),o=Fv(s.converter,r,i),a=Pv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Fa(n,this._firestore);let a;return a="string"==typeof(r=(0,vt.m9)(r))||r instanceof Po?c0(this._dataReader,"Transaction.update",o._key,r,i,s):u0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Fa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Fa(e,this._firestore),r=new Va(this._firestore);return super.get(e).then(i=>new Mo(this._firestore,r,n._key,i._document,new ac(!1,!1),n.converter))}}function m0(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function XL(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function e2(){if(!function m7(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){id=Ll.SDK_VERSION,(0,Ll._registerComponent)(new d1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ht(new BW(r.getProvider("auth-internal")),new HW(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Ll.registerVersion)(Rk,"4.4.1",e),(0,Ll.registerVersion)(Rk,"4.4.1","esm2017")}();class og{constructor(e){this._delegate=e}static fromBase64String(e){return e2(),new og(Zs.fromBase64String(e))}static fromUint8Array(e){return XL(),new og(Zs.fromUint8Array(e))}toBase64(){return e2(),this._delegate.toBase64()}toUint8Array(){return XL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _0(t){return function zQ(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class GQ{enableIndexedDbPersistence(e,n){return function GK(t,e){ML(t=it(t,Ht));const n=pn(t);if(n._uninitializedComponentsProvider)throw new J(V.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Od;return PL(n,i,new GA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function qK(t){ML(t=it(t,Ht));const e=pn(t);if(e._uninitializedComponentsProvider)throw new J(V.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Od;return PL(e,r,new dL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function WK(t){if(t._initialized&&!t._terminated)throw new J(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(n=(0,W.Z)(function*(i){if(!Hi.D())return Promise.resolve();const s=i+"main";yield Hi.delete(s)}),function r(i){return n.apply(this,arguments)})(FC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class t2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function AL(t,e,n,r={}){var i;const s=(t=it(t,Jp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Jn.MOCK_USER;else{a=(0,vt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Jn(d)}t._authCredentials=new UW(new Pk(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function KK(t){return function MK(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield pL(t),n=yield gL(t);return e.setNetworkEnabled(!0),function(i){const s=se(i);return s.v_.delete(0),Kp(s)}(n)}))}(pn(t=it(t,Ht)))}(this._delegate)}disableNetwork(){return function QK(t){return function NK(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield pL(t),n=yield gL(t);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(s){const o=se(s);o.v_.add(0),yield bd(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(pn(t=it(t,Ht)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,EL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ZK(t){return function(n){const r=new zn;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function pK(t,e){return RA.apply(this,arguments)}(yield JA(n),r)})),r.promise}(pn(t=it(t,Ht)))}(this._delegate)}onSnapshotsInSync(e){return function TQ(t,e){return function kK(t,e){const n=new Dv(e);return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield Vd(t),s=n,se(i).K_.add(s),void s.next();var i,s})),()=>{n.La(),t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield Vd(t),s=n,void se(i).K_.delete(s);var i,s}))}}(pn(t=it(t,Ht)),n0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ud(this,bL(this._delegate,e))}catch(n){throw qr(n,"collection()","Firestore.collection()")}}doc(e){try{return new zi(this,bv(this._delegate,e))}catch(n){throw qr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wr(this,function jK(t,e){if(t=it(t,Jp),e0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hr(t,null,(r=e,new Co(ot.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw qr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kQ(t,e,n){t=it(t,Ht);const r=Object.assign(Object.assign({},xQ),n);return function(s){if(s.maxAttempts<1)throw new J(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new zn;return s.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const d=yield function mL(t){return Cv(t).then(e=>e.datastore)}(s);new RK(s.asyncQueue,d,a,o,u).ja()})),u.promise}(pn(t),i=>e(new OQ(t,i)),r)}(this._delegate,n=>e(new n2(this,n)))}batch(){return pn(this._delegate),new r2(new KL(this._delegate,e=>Ld(this._delegate,e)))}loadBundle(e){return function YK(t,e){const n=pn(t=it(t,Ht)),r=new HK;return function VK(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?LV().encode(o):o,p=function(p,g){if(p instanceof Uint8Array)return hL(p,g);if(p instanceof ArrayBuffer)return hL(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new bK(p,a);var p}(n,Zp(e));t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function CK(t,e,n){const r=se(t);var i;(i=(0,W.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,C){const S=se(E),O=En(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.$r.getBundleMetadata(R,C.id)).then(R=>!!R&&R.createTime.compareTo(O)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(nL(d));const p=new iK(d,o.localStore,a.serializer);let g=yield a.Oa();for(;g;){const y=yield p.na(g);y&&u._updateProgress(y),g=yield a.Oa()}const _=yield p.complete();return yield Ro(o,_.sa,void 0),yield function(E,C){const S=se(E);return S.persistence.runTransaction("Save bundle","readwrite",O=>S.$r.saveBundleMetadata(O,C))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.ia)}catch(d){return ii("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield JA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function JK(t,e){return function FK(t,e){return t.asyncQueue.enqueue((0,W.Z)(function*(){return function(r,i){const s=se(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield kd(t),e)}))}(pn(t=it(t,Ht)),e).then(n=>n?new hr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Wr(this,n):null)}}class Uv extends f0{constructor(e){super(),this.firestore=e}convertBytes(e){return new og(new Zs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return zi.forKey(n,this.firestore,null)}}class n2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Uv(e)}get(e){const n=cc(e);return this._delegate.get(n).then(r=>new ag(this._firestore,new Mo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=cc(e);return r?(m0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=cc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=cc(e);return this._delegate.delete(n),this}}class r2{constructor(e){this._delegate=e}set(e,n,r){const i=cc(e);return r?(m0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=cc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=cc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class uc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new sg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ug(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=uc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new uc(e,new Uv(e),n),i.set(n,s)),s}}uc.INSTANCES=new WeakMap;class zi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Uv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zi(n,new Jt(n._delegate,r,new ae(e)))}static forKey(e,n,r){return new zi(n,new Jt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ud(this.firestore,bL(this._delegate,e))}catch(n){throw qr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,vt.m9)(e))instanceof Jt&&SL(this._delegate,e)}set(e,n){n=m0("DocumentReference.set",n);try{return n?qL(this._delegate,e,n):qL(this._delegate,e)}catch(r){throw qr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?WL(this._delegate,e):WL(this._delegate,e,n,...r)}catch(i){throw qr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wQ(t){return Ld(it(t.firestore,Ht),[new yd(t._key,on.none())])}(this._delegate)}onSnapshot(...e){const n=i2(e),r=s2(e,i=>new ag(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ZL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function _Q(t){t=it(t,Jt);const e=it(t.firestore,Ht),n=pn(e),r=new Va(e);return function xK(t,e){const n=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield function(p,g){const _=se(p);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Pd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield kd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Mo(e,r,t._key,i,new ac(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function yQ(t){t=it(t,Jt);const e=it(t.firestore,Ht);return _L(pn(e),t._key,{source:"server"}).then(n=>p0(e,t,n))}(this._delegate):function mQ(t){t=it(t,Jt);const e=it(t.firestore,Ht);return _L(pn(e),t._key).then(n=>p0(e,t,n))}(this._delegate),n.then(r=>new ag(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zi(this.firestore,this._delegate.withConverter(e?uc.getInstance(this.firestore,e):null))}}function qr(t,e,n){return t.message=t.message.replace(e,n),t}function i2(t){for(const e of t)if("object"==typeof e&&!_0(e))return e;return{}}function s2(t,e){var n,r;let i;return i=_0(t[0])?t[0]:_0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ag{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new zi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return GL(this._delegate,e._delegate)}}class ug extends ag{data(e){const n=this._delegate.data(e);return this._delegate._converter||function FW(t,e){t||ge()}(void 0!==n),n}}class Wr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Uv(e)}where(e,n,r){try{return new Wr(this.firestore,Oa(this._delegate,function sQ(t,e,n){const r=e,i=xv("where",t);return ig._create(i,r,n)}(e,n,r)))}catch(i){throw qr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Wr(this.firestore,Oa(this._delegate,function oQ(t,e="asc"){const n=e,r=xv("orderBy",t);return h0._create(r,n)}(e,n)))}catch(r){throw qr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wr(this.firestore,Oa(this._delegate,function aQ(t){return TL("limit",t),Ov._create("limit",t,"F")}(e)))}catch(n){throw qr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Wr(this.firestore,Oa(this._delegate,function uQ(t){return TL("limitToLast",t),Ov._create("limitToLast",t,"L")}(e)))}catch(n){throw qr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wr(this.firestore,Oa(this._delegate,function cQ(...t){return kv._create("startAt",t,!0)}(...e)))}catch(n){throw qr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wr(this.firestore,Oa(this._delegate,function lQ(...t){return kv._create("startAfter",t,!1)}(...e)))}catch(n){throw qr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wr(this.firestore,Oa(this._delegate,function dQ(...t){return Vv._create("endBefore",t,!1)}(...e)))}catch(n){throw qr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wr(this.firestore,Oa(this._delegate,function hQ(...t){return Vv._create("endAt",t,!0)}(...e)))}catch(n){throw qr(n,"endAt()","Query.endAt()")}}isEqual(e){return t0(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function IQ(t){t=it(t,hr);const e=it(t.firestore,Ht),n=pn(e),r=new Va(e);return function OK(t,e){const n=new zn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield mv(s,o,!0),d=new sL(o,u.hs),p=d.ha(u.documents),g=d.applyChanges(p,!1);a.resolve(g.snapshot)}catch(u){const d=Pd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield kd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ka(e,r,t,i))}(this._delegate):"server"===e?.source?function EQ(t){t=it(t,hr);const e=it(t.firestore,Ht),n=pn(e),r=new Va(e);return yL(n,t._query,{source:"server"}).then(i=>new ka(e,r,t,i))}(this._delegate):function vQ(t){t=it(t,hr);const e=it(t.firestore,Ht),n=pn(e),r=new Va(e);return UL(t._query),yL(n,t._query).then(i=>new ka(e,r,t,i))}(this._delegate),n.then(r=>new y0(this.firestore,new ka(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=i2(e),r=s2(e,i=>new y0(this.firestore,new ka(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ZL(this._delegate,n,r)}withConverter(e){return new Wr(this.firestore,this._delegate.withConverter(e?uc.getInstance(this.firestore,e):null))}}class WQ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ug(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class y0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Wr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ug(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new WQ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ug(this._firestore,r))})}isEqual(e){return GL(this._delegate,e._delegate)}}class Ud extends Wr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zi(this.firestore,e):null}doc(e){try{return new zi(this.firestore,void 0===e?bv(this._delegate):bv(this._delegate,e))}catch(n){throw qr(n,"doc()","CollectionReference.doc()")}}add(e){return function DQ(t,e){const n=it(t.firestore,Ht),r=bv(t),i=Fv(t.converter,e);return Ld(n,[Pv(sc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new zi(this.firestore,n))}isEqual(e){return SL(this._delegate,e._delegate)}withConverter(e){return new Ud(this.firestore,this._delegate.withConverter(e?uc.getInstance(this.firestore,e):null))}}function cc(t){return it(t,Jt)}class v0{constructor(...e){this._delegate=new Po(...e)}static documentId(){return new v0(Qt.keyField().canonicalString())}isEqual(e){return(e=(0,vt.m9)(e))instanceof Po&&this._delegate._internalPath.isEqual(e._internalPath)}}class lc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function FQ(){return new r0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lc(e)}static delete(){const e=function VQ(){return new eg("deleteField")}();return e._methodName="FieldValue.delete",new lc(e)}static arrayUnion(...e){const n=function LQ(...t){return new s0("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new lc(n)}static arrayRemove(...e){const n=function UQ(...t){return new o0("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new lc(n)}static increment(e){const n=function BQ(t){return new a0("increment",t)}(e);return n._methodName="FieldValue.increment",new lc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZQ={Firestore:t2,GeoPoint:Sv,Timestamp:sn,Blob:og,Transaction:n2,WriteBatch:r2,DocumentReference:zi,DocumentSnapshot:ag,Query:Wr,QueryDocumentSnapshot:ug,QuerySnapshot:y0,CollectionReference:Ud,FieldPath:v0,FieldValue:lc,setLogLevel:function qQ(t){!function VW(t){ya.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function o2(t,e){return function YQ(t,e=Lx){return new st(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function I0(t,e){return o2(t,e).pipe(Ee(n=>({payload:n,type:"query"})))}!function QQ(t){(function KQ(t,e){t.INTERNAL.registerComponent(new d1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZQ)))})(t,(e,n)=>new t2(e,n,new GQ)),t.registerVersion("@firebase/firestore-compat","0.3.24")}(Vu.Z);class a2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=d2(r,n);return new l2(i,s,this.afs)}snapshotChanges(){return function JQ(t,e){return o2(t,e).pipe(Y_(void 0),dT(),Ee(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gi)}valueChanges(e={}){return this.snapshotChanges().pipe(Ee(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(gi)}}function Bv(t,e){return I0(t,e).pipe(Y_(void 0),dT(),Ee(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function u2(t,e,n){return Bv(t,n).pipe(X_((r,i)=>function XQ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function eY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return E0(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return E0(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return E0(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Wt(),Ee(r=>r.map(i=>({type:i.type,payload:i}))))}function E0(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function c2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class l2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Bv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Y_(void 0),dT(),os(([r,i])=>i.length>0||!r),Ee(([,r])=>r),gi)}auditTrail(e){return this.stateChanges(e).pipe(X_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=c2(e);return u2(this.query,n,this.afs.schedulers.outsideAngular).pipe(gi)}valueChanges(e={}){return I0(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),gi)}get(e){return A(this.query.get(e)).pipe(gi)}add(e){return this.ref.add(e)}doc(e){return new a2(this.ref.doc(e),this.afs)}}class tY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Bv(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(n=>n.filter(r=>e.indexOf(r.type)>-1)),os(n=>n.length>0),gi):Bv(this.query,this.afs.schedulers.outsideAngular).pipe(gi)}auditTrail(e){return this.stateChanges(e).pipe(X_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=c2(e);return u2(this.query,n,this.afs.schedulers.outsideAngular).pipe(gi)}valueChanges(e={}){return I0(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),gi)}get(e){return A(this.query.get(e)).pipe(gi)}}const nY=new ue("angularfire2.enableFirestorePersistence"),rY=new ue("angularfire2.firestore.persistenceSettings"),iY=new ue("angularfire2.firestore.settings"),sY=new ue("angularfire2.firestore.use-emulator");function d2(t,e=(n=>n)){return{query:e(t),ref:t}}let oY=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,p,g,_,y,E,C,S,O,R){this.schedulers=u;const U=UD(n,a,r),te=p;g&&c1(U,a,_,E,C,S,y,O),[this.firestore,this.persistenceEnabled$]=zx(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const ce=a.runOutsideAngular(()=>U.firestore());if(s&&ce.settings(s),te&&ce.useEmulator(...te),i&&!H_(o)){const Ue=()=>{try{return A(ce.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(It){return typeof console<"u"&&console.warn(It),q(!1)}};return[ce,a.runOutsideAngular(Ue)]}return[ce,q(!1)]},[s,te,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=d2(i,r),a=this.schedulers.ngZone.run(()=>s);return new l2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new tY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new a2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(ie(Z_),ie(K_,8),ie(nY,8),ie(iY,8),ie(co),ie(wt),ie($x),ie(rY,8),ie(sY,8),ie(l1,8),ie(r1,8),ie(i1,8),ie(s1,8),ie(o1,8),ie(a1,8),ie(u1,8),ie(Bx,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),w0=(()=>{class t{constructor(n){this.firestore=n}addStudent(n){return this.firestore.collection("students").add(n)}getStudents(){return this.firestore.collection("students").valueChanges({idField:"id"})}getStudentByMobile(n){return this.firestore.collection("students",r=>r.where("mobile","==",n)).valueChanges({idField:"id"})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(oY))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h2=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(lo),ne(ti))};static#t=this.\u0275dir=Re({type:t})}return t})(),dc=(()=>{class t extends h2{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275dir=Re({type:t,features:[Ct]})}return t})();const Ks=new ue("NgValueAccessor"),cY={provide:Ks,useExisting:x(()=>cg),multi:!0},dY=new ue("CompositionEventMode");let cg=(()=>{class t extends h2{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lY(){const t=da()?da().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(lo),ne(ti),ne(dY,8))};static#t=this.\u0275dir=Re({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ut("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rn([cY]),Ct]})}return t})();function La(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function p2(t){return null!=t&&"number"==typeof t.length}const Sr=new ue("NgValidators"),Ua=new ue("NgAsyncValidators");function _2(t){return La(t.value)?{required:!0}:null}function jv(t){return null}function D2(t){return null!=t}function T2(t){return yf(t)?A(t):t}function C2(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function A2(t,e){return e.map(n=>n(t))}function b2(t){return t.map(e=>function fY(t){return!t.validate}(e)?e:n=>e.validate(n))}function D0(t){return null!=t?function S2(t){if(!t)return null;const e=t.filter(D2);return 0==e.length?null:function(n){return C2(A2(n,e))}}(b2(t)):null}function T0(t){return null!=t?function R2(t){if(!t)return null;const e=t.filter(D2);return 0==e.length?null:function(n){return function aY(...t){const e=ko(t),{args:n,keys:r}=qx(t),i=new st(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let p=0;p<o;p++){let g=!1;mn(n[p]).subscribe(he(s,_=>{g||(g=!0,d--),a[p]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?Zx(r,a):a),s.complete())}))}});return e?i.pipe(Wx(e)):i}(A2(n,e).map(T2)).pipe(Ee(C2))}}(b2(t)):null}function P2(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function C0(t){return t?Array.isArray(t)?t:[t]:[]}function $v(t,e){return Array.isArray(t)?t.includes(e):t===e}function x2(t,e){const n=C0(e);return C0(t).forEach(i=>{$v(n,i)||n.push(i)}),n}function O2(t,e){return C0(e).filter(n=>!$v(t,n))}class k2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=D0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=T0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Zr extends k2{get formDirective(){return null}get path(){return null}}class No extends k2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class V2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let A0=(()=>{class t extends V2{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(No,2))};static#t=this.\u0275dir=Re({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&m_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ct]})}return t})(),b0=(()=>{class t extends V2{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Zr,10))};static#t=this.\u0275dir=Re({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&m_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ct]})}return t})();const lg="VALID",zv="INVALID",Bd="PENDING",dg="DISABLED";function P0(t){return(Gv(t)?t.validators:t)||null}function M0(t,e){return(Gv(e)?e.asyncValidators:t)||null}function Gv(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class B2{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lg}get invalid(){return this.status===zv}get pending(){return this.status==Bd}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(x2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(x2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O2(e,this._rawAsyncValidators))}hasValidator(e){return $v(this._rawValidators,e)}hasAsyncValidator(e){return $v(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=dg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=lg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lg||this.status===Bd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bd,this._hasOwnPendingAsyncValidator=!0;const n=T2(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ln,this.statusChanges=new ln}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?zv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bd)?Bd:this._anyControlsHaveStatus(zv)?zv:lg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function _Y(t){return Array.isArray(t)?D0(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function yY(t){return Array.isArray(t)?T0(t):t||null}(this._rawAsyncValidators)}}class N0 extends B2{constructor(e,n,r){super(P0(n),M0(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function U2(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new j(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function L2(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const jd=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>qv}),qv="always";function hg(t,e,n=qv){x0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function EY(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&j2(t,e)})}(t,e),function DY(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function wY(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&j2(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function IY(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Kv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function x0(t,e){const n=function M2(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(P2(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function N2(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(P2(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Kv(e._rawValidators,i),Kv(e._rawAsyncValidators,i)}function j2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const SY={provide:Zr,useExisting:x(()=>pg)},fg=(()=>Promise.resolve())();let pg=(()=>{class t extends Zr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ln,this.form=new N0({},D0(n),T0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){fg.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),hg(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){fg.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){fg.then(()=>{const r=this._findContainer(n.path),i=new N0({});(function $2(t,e){x0(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){fg.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){fg.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function H2(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Sr,10),ne(Ua,10),ne(jd,8))};static#t=this.\u0275dir=Re({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ut("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rn([SY]),Ct]})}return t})();function z2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function G2(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const q2=class extends B2{constructor(e=null,n,r){super(P0(n),M0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=G2(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){z2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){z2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){G2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},MY={provide:No,useExisting:x(()=>Yv)},K2=(()=>Promise.resolve())();let Yv=(()=>{class t extends No{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new q2,this._registered=!1,this.name="",this.update=new ln,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function V0(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===cg?n=s:function AY(t){return Object.getPrototypeOf(t.constructor)===dc}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function k0(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){K2.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Vl(r);K2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Wv(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Zr,9),ne(Sr,10),ne(Ua,10),ne(Ks,10),ne(S_,8),ne(jd,8))};static#t=this.\u0275dir=Re({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rn([MY]),Ct,Fr]})}return t})(),F0=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Re({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),Y2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({})}return t})();function oU(t){return"number"==typeof t?t:parseInt(t,10)}let hc=(()=>{class t{constructor(){this._validator=jv}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jv,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Re({type:t,features:[Fr]})}return t})();const KY={provide:Sr,useExisting:x(()=>gg),multi:!0};let gg=(()=>{class t extends hc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Vl,this.createValidator=n=>_2}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275dir=Re({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&xs("required",i._enabled?"":null)},inputs:{required:"required"},features:[rn([KY]),Ct]})}return t})();const JY={provide:Sr,useExisting:x(()=>Jv),multi:!0};let Jv=(()=>{class t extends hc{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=n=>oU(n),this.createValidator=n=>function I2(t){return e=>La(e.value)||!p2(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275dir=Re({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&xs("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[rn([JY]),Ct]})}return t})();const XY={provide:Sr,useExisting:x(()=>Xv),multi:!0};let Xv=(()=>{class t extends hc{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=n=>oU(n),this.createValidator=n=>function E2(t){return e=>p2(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275dir=Re({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&xs("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[rn([XY]),Ct]})}return t})();const eJ={provide:Sr,useExisting:x(()=>eI),multi:!0};let eI=(()=>{class t extends hc{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=n=>n,this.createValidator=n=>function w2(t){if(!t)return jv;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(La(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=jn(t)))(i||t)}}();static#t=this.\u0275dir=Re({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&xs("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[rn([eJ]),Ct]})}return t})(),tJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({imports:[Y2]})}return t})(),rJ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:jd,useValue:n.callSetDisabledState??qv}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({imports:[tJ]})}return t})(),iJ=(()=>{class t{constructor(){}onInput(n){const r=n.target;r.value=r.value.replace(/[^a-z A-Z]/g,"")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Re({type:t,selectors:[["","appAlphabetInput",""]],hostBindings:function(r,i){1&r&&Ut("input",function(o){return i.onInput(o)})}})}return t})(),hU=(()=>{class t{constructor(n,r){this.el=n,this.control=r}onBlur(){const n=this.el.nativeElement.value;this.control.control?.setErrors(n&&10!==n.length?{invalidMobileNumber:!0}:null)}onInputChange(n){const r=this.el.nativeElement.value,i=r.replace(/[^0-9]/g,"");this.el.nativeElement.value=i,r!==i&&n.stopPropagation()}static#e=this.\u0275fac=function(r){return new(r||t)(ne(ti),ne(No))};static#t=this.\u0275dir=Re({type:t,selectors:[["","appMobileNumber",""]],hostBindings:function(r,i){1&r&&Ut("blur",function(){return i.onBlur()})("input",function(o){return i.onInputChange(o)})}})}return t})();function sJ(t,e){1&t&&(be(0,"div"),Ve(1," Please enter a valid 10-digit mobile number. "),Te())}function oJ(t,e){1&t&&(be(0,"div"),Ve(1," Please enter a valid email address. "),Te())}let aJ=(()=>{class t{constructor(n){this.database=n,this.name="",this.mobile="",this.emailId="",this.DOB="",this.age=0,this.physics=void 0,this.chemistry=void 0,this.mathematics=void 0,this.total=void 0,this.avg_percentage=0}calculateAge(){const n=new Date(this.DOB),r=new Date;let i=r.getFullYear()-n.getFullYear();const s=r.getMonth()-n.getMonth();(s<0||0===s&&r.getDate()<n.getDate())&&i--,this.age=i}calculateTotalAndAvg(){const s=+this.physics+ +this.chemistry+ +this.mathematics,o=s/3;this.total=s,this.avg_percentage=o}onSubmit(n){this.database.addStudent(n.value),n.reset(),alert("Student details Submitted SuccessFully !")}static#e=this.\u0275fac=function(r){return new(r||t)(ne(w0))};static#t=this.\u0275cmp=ys({type:t,selectors:[["app-student-information"]],decls:58,vars:16,consts:[[1,"w-full","h-screen","bg-white","mt-2","rounded-md","mx-2"],[1,"text-2xl","text-slate-800","font-extrabold","font-serif","mt-10","mx-auto","text-center"],[1,"border-4","border-black","h-fit","w-96","rounded-3xl","items-center","justify-center","mx-auto","mt-10",3,"ngSubmit"],["studentForm","ngForm"],[1,"mx-3"],[1,"my-5"],["for","name"],["pattern","[a-zA-Z ]+","type","text","name","name","id","name","appAlphabetInput","","required","","ngModel","",1,"border-2","border-black","ml-2","rounded-md",3,"ngModel","ngModelChange"],["for","mobile"],["type","text","name","mobile","id","mobile","minlength","10","maxlength","10","pattern","[0-9]{10}","appMobileNumber","","required","","ngModel","",1,"border-2","border-black","ml-2","rounded-md",3,"ngModel","ngModelChange"],[4,"ngIf"],["for","emailId"],["type","text","name","emailId","id","emailId","pattern","[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}","ngModel","","required","",1,"border-2","border-black","ml-2","rounded-md",3,"ngModel","ngModelChange"],["for","DOB"],["type","date","name","DOB","id","DOB","ngModel","","required","",1,"border-2","border-black","ml-2","rounded-md",3,"ngModel","ngModelChange","change"],["for","age"],["type","text","name","age","id","age","ngModel","","required","",1,"ml-2","rounded-md","w-12",3,"ngModel","ngModelChange"],["for","physics"],["type","text","min","0","ngModel","","name","physics","id","physics","maxlength","3",1,"border-2","border-black","ml-2","w-12","rounded-md",3,"ngModel","ngModelChange","input"],["for","chemistry"],["type","text","min","0","ngModel","","name","chemistry","id","chemistry","maxlength","3",1,"border-2","border-black","ml-2","w-12","rounded-md",3,"ngModel","ngModelChange","input"],["for","mathematics"],["type","text","min","0","ngModel","","name","mathematics","id","mathematics","maxlength","3",1,"border-2","border-black","ml-2","w-12","rounded-md",3,"ngModel","ngModelChange","input"],["for","total"],["type","text","name","total","ngModel","","id","total",1,"ml-2","w-12","rounded-md",3,"ngModel","ngModelChange"],["for","avg_percentage"],["type","text","name","avg_percentage","ngModel","","id","avg_percentage",1,"ml-2",3,"ngModel","ngModelChange"],[1,"flex","w-full","flex-row","my-5","mx-32"],["type","submit",1,"mr-10","items-center","justify-center","px-3","py-2","border-2","border-black","bg-purple-600","rounded-xl","text-xl","font-sans","font-extrabold",3,"disabled"]],template:function(r,i){if(1&r){const s=yw();be(0,"div",0)(1,"h1",1),Ve(2," Student Information "),Te(),be(3,"form",2,3),Ut("ngSubmit",function(){Dh(s);const a=_f(4);return Th(i.onSubmit(a))}),be(5,"div",4)(6,"div",5)(7,"label",6),Ve(8,"Name :"),Te(),be(9,"input",7),Ut("ngModelChange",function(a){return i.name=a}),Te()(),be(10,"div",5)(11,"label",8),Ve(12,"Mobile :"),Te(),be(13,"input",9),Ut("ngModelChange",function(a){return i.mobile=a}),Te(),mf(14,sJ,2,0,"div",10),Te(),be(15,"div",5)(16,"label",11),Ve(17,"Email ID :"),Te(),be(18,"input",12),Ut("ngModelChange",function(a){return i.emailId=a}),Te(),mf(19,oJ,2,0,"div",10),Te(),be(20,"div",5)(21,"label",13),Ve(22,"Date of birth :"),Te(),be(23,"input",14),Ut("ngModelChange",function(a){return i.DOB=a})("change",function(){return i.calculateAge()}),Te()(),be(24,"div",5)(25,"label",15),Ve(26,"Age :"),Te(),be(27,"label",16),Ut("ngModelChange",function(a){return i.age=a}),Ve(28),Te()()(),be(29,"div",4)(30,"div",5)(31,"label",17),Ve(32,"Physics : "),Te(),be(33,"input",18),Ut("ngModelChange",function(a){return i.physics=a})("input",function(){return i.calculateTotalAndAvg()}),Te(),Ve(34," / 100 "),Te(),be(35,"div",5)(36,"label",19),Ve(37,"Chemistry : "),Te(),be(38,"input",20),Ut("ngModelChange",function(a){return i.chemistry=a})("input",function(){return i.calculateTotalAndAvg()}),Te(),Ve(39," / 100 "),Te(),be(40,"div",5)(41,"label",21),Ve(42,"Mathematics : "),Te(),be(43,"input",22),Ut("ngModelChange",function(a){return i.mathematics=a})("input",function(){return i.calculateTotalAndAvg()}),Te(),Ve(44," / 100 "),Te(),be(45,"div",5)(46,"label",23),Ve(47,"Total : "),Te(),be(48,"label",24),Ut("ngModelChange",function(a){return i.total=a}),Ve(49),Te()(),be(50,"div",5)(51,"label",25),Ve(52,"Average percentage : "),Te(),be(53,"label",26),Ut("ngModelChange",function(a){return i.avg_percentage=a}),Ve(54),Te()()(),be(55,"div",27)(56,"button",28),Ve(57,"SUBMIT"),Te()()()()}if(2&r){const s=_f(4);Tt(9),or("ngModel",i.name),Tt(4),or("ngModel",i.mobile),Tt(1),or("ngIf",(null==s.controls.mobile?null:s.controls.mobile.hasError("invalidMobileNumber"))&&(null==s.controls.mobile?null:s.controls.mobile.touched)),Tt(4),or("ngModel",i.emailId),Tt(1),or("ngIf",(null==s.controls.emailId?null:s.controls.emailId.hasError("pattern"))&&(null==s.controls.emailId?null:s.controls.emailId.touched)),Tt(4),or("ngModel",i.DOB),Tt(4),or("ngModel",i.age),Tt(1),ca(i.age),Tt(5),or("ngModel",i.physics),Tt(5),or("ngModel",i.chemistry),Tt(5),or("ngModel",i.mathematics),Tt(5),or("ngModel",i.total),Tt(1),Vs("",i.total," / 300 "),Tt(4),or("ngModel",i.avg_percentage),Tt(1),Vs("",i.avg_percentage," % "),Tt(2),or("disabled",s.invalid)}},dependencies:[DD,F0,cg,A0,b0,gg,Jv,Xv,eI,Yv,pg,iJ,hU]})}return t})();function uJ(t,e){1&t&&(be(0,"div"),Ve(1," Please enter a valid 10-digit mobile number. "),Te())}function cJ(t,e){if(1&t&&(be(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),Ve(4,"Name :"),Te(),be(5,"label",15),Ve(6),Te()(),be(7,"div",13)(8,"label",5),Ve(9,"Mobile :"),Te(),be(10,"label",15),Ve(11),Te()(),be(12,"div",13)(13,"label",16),Ve(14,"Email ID :"),Te(),be(15,"label",15),Ve(16),Te()(),be(17,"div",13)(18,"label",16),Ve(19,"Date of birth :"),Te(),be(20,"label",15),Ve(21),Ow(22,"date"),Te()(),be(23,"div",13)(24,"label",16),Ve(25,"Age :"),Te(),be(26,"label",15),Ve(27),Te()()(),be(28,"div",12)(29,"div",13)(30,"label",16),Ve(31,"Physics : "),Te(),be(32,"label",15),Ve(33),Te()(),be(34,"div",13)(35,"label",16),Ve(36,"Chemistry : "),Te(),be(37,"label",15),Ve(38),Te()(),be(39,"div",13)(40,"label",16),Ve(41,"Mathematics : "),Te(),be(42,"label",15),Ve(43),Te()(),be(44,"div",13)(45,"label",16),Ve(46,"Total : "),Te(),be(47,"label",15),Ve(48),Te()(),be(49,"div",13)(50,"label",16),Ve(51,"Average percentage : "),Te(),be(52,"label",15),Ve(53),Ow(54,"number"),Te()()()()),2&t){const n=XR();Tt(6),ca(n.studentData.name),Tt(5),ca(n.studentData.mobile),Tt(5),ca(n.studentData.emailId),Tt(5),ca(kw(22,10,n.studentData.DOB,"dd/MM/yyyy")),Tt(6),ca(n.studentData.age),Tt(6),Vs("",n.studentData.physics," / 100 "),Tt(5),Vs("",n.studentData.chemistry," / 100 "),Tt(5),Vs("",n.studentData.mathematics," / 100 "),Tt(5),Vs("",n.studentData.total," / 300 "),Tt(5),Vs("",kw(54,13,n.studentData.avg_percentage,"1.2-2")," %")}}const lJ=[{path:"dashboard",component:b8,children:[{path:"student_information",component:aJ},{path:"",redirectTo:"student_information",pathMatch:"full"},{path:"get_information",component:(()=>{class t{constructor(n){this.database=n}showdata(){console.log(this.studentData.name)}getData(n){this.database.getStudentByMobile(n.value.mobile).subscribe(i=>{i&&i.length>0?this.studentData=i[0]:alert("Data does not exist for the given mobile number.")}),n.reset()}static#e=this.\u0275fac=function(r){return new(r||t)(ne(w0))};static#t=this.\u0275cmp=ys({type:t,selectors:[["app-get-info"]],decls:14,vars:2,consts:[[1,"w-full","h-screen","bg-white","mt-2","rounded-md","mx-2"],[1,"text-2xl","text-slate-800","font-extrabold","font-serif","mt-10","mx-auto","text-center"],[1,"my-5","flex","flex-col","w-full",3,"ngSubmit"],["getform","ngForm"],[1,"my-5","items-center","justify-center","mx-auto"],["for","mobile"],["type","text","name","mobile","id","mobile","minlength","10","maxlength","10","pattern","[0-9]{10}","appMobileNumber","","required","","ngModel","",1,"border-2","border-black","ml-2","rounded-md"],[4,"ngIf"],[1,"flex","w-full","flex-row","my-5","mx-auto","items-center","justify-center"],["type","submit",1,"px-3","py-2","border-2","border-black","bg-purple-600","rounded-xl","text-xl","font-sans","font-extrabold"],["class","border-4 border-black h-fit w-96 rounded-3xl items-center justify-center mx-auto mt-10",4,"ngIf"],[1,"border-4","border-black","h-fit","w-96","rounded-3xl","items-center","justify-center","mx-auto","mt-10"],[1,"mx-3"],[1,"my-5"],["for","name"],[1,"ml-2"],["for",""]],template:function(r,i){if(1&r){const s=yw();be(0,"div",0)(1,"h1",1),Ve(2,"Get Student Information "),Te(),be(3,"form",2,3),Ut("ngSubmit",function(){Dh(s);const a=_f(4);return Th(i.getData(a))}),be(5,"div",4)(6,"label",5),Ve(7,"Mobile :"),Te(),Rl(8,"input",6),mf(9,uJ,2,0,"div",7),Te(),be(10,"div",8)(11,"button",9),Ve(12,"GET DATA"),Te()()(),mf(13,cJ,55,16,"div",10),Te()}if(2&r){const s=_f(4);Tt(9),or("ngIf",(null==s.controls.mobile?null:s.controls.mobile.hasError("invalidMobileNumber"))&&(null==s.controls.mobile?null:s.controls.mobile.touched)),Tt(4),or("ngIf",i.studentData)}},dependencies:[DD,F0,cg,A0,b0,gg,Jv,Xv,eI,Yv,pg,hU,fx,dx]})}return t})()}]},{path:"",redirectTo:"dashboard",pathMatch:"full"}];let dJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t});static#n=this.\u0275inj=Mr({imports:[XO.forRoot(lJ),XO]})}return t})(),hJ=(()=>{class t{constructor(){this.title="angular-task"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ys({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Rl(0,"router-outlet")},dependencies:[cy]})}return t})();const fJ={apiKey:"AIzaSyAB8w39XWsq67qW_6kJ33zFF8cDmz_KDI8",authDomain:"angular-task-fb133.firebaseapp.com",projectId:"angular-task-fb133",storageBucket:"angular-task-fb133.appspot.com",messagingSenderId:"892350407738",appId:"1:892350407738:web:e443075423f93be6cc8103",measurementId:"G-BR5H0YWF1Z"};let pJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Or({type:t,bootstrap:[hJ]});static#n=this.\u0275inj=Mr({providers:[w0],imports:[w9,dJ,rJ,Z9.initializeApp(fJ)]})}return t})();I9().bootstrapModule(pJ).catch(t=>console.error(t))},106:(Gi,Pn,Be)=>{Be.d(Pn,{Z:()=>Nn});var I=Be(58),Me=Be(537),B=Be(534),Ne=Be(879);class lt{constructor(ke,ze){this._delegate=ke,this.firebase=ze,(0,B._addComponent)(ke,new Me.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ke,ze=B._DEFAULT_ENTRY_NAME){var xn;this._delegate.checkDestroyed();const On=this._delegate.container.getProvider(ke);return!On.isInitialized()&&"EXPLICIT"===(null===(xn=On.getComponent())||void 0===xn?void 0:xn.instantiationMode)&&On.initialize(),On.getImmediate({identifier:ze})}_removeServiceInstance(ke,ze=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance(ze)}_addComponent(ke){(0,B._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,B._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Je(){const ft=function Mn(ft){const ke={},ze={__esModule:!0,initializeApp:function kt(Ge,wn={}){const Z=B.initializeApp(Ge,wn);if((0,I.r3)(ke,Z.name))return ke[Z.name];const Gt=new ft(Z,ze);return ke[Z.name]=Gt,Gt},app:On,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Rt(Ge){const wn=Ge.name,Z=wn.replace("-compat","");if(B._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Gt=(Vt=On())=>{if("function"!=typeof Vt[Z])throw Xt.create("invalid-app-argument",{appName:wn});return Vt[Z]()};void 0!==Ge.serviceProps&&(0,I.ZB)(Gt,Ge.serviceProps),ze[Z]=Gt,ft.prototype[Z]=function(...Vt){return this._getService.bind(this,wn).apply(this,Ge.multipleInstances?Vt:[])}}return"PUBLIC"===Ge.type?ze[Z]:null},removeApp:function xn(Ge){delete ke[Ge]},useAsService:function fr(Ge,wn){return"serverAuth"===wn?null:wn},modularAPIs:B}};function On(Ge){if(!(0,I.r3)(ke,Ge=Ge||B._DEFAULT_ENTRY_NAME))throw Xt.create("no-app",{appName:Ge});return ke[Ge]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function pt(){return Object.keys(ke).map(Ge=>ke[Ge])}}),On.App=ft,ze}(lt);return ft.INTERNAL=Object.assign(Object.assign({},ft.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function ke(ze){(0,I.ZB)(ft,ze)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),ft}(),re=new Ne.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ft=self.firebase.SDK_VERSION;ft&&ft.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Nn=K;!function dt(ft){(0,B.registerVersion)("@firebase/app-compat","0.2.26",ft)}()},534:(Gi,Pn,Be)=>{Be.r(Pn),Be.d(Pn,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>ds,_DEFAULT_ENTRY_NAME:()=>ai,_addComponent:()=>ls,_addOrOverwriteComponent:()=>Zn,_apps:()=>gr,_clearComponents:()=>Tn,_components:()=>Wi,_getProvider:()=>Ft,_registerComponent:()=>Ys,_removeServiceInstance:()=>ui,deleteApp:()=>nr,getApp:()=>hs,getApps:()=>Vo,initializeApp:()=>ko,onLog:()=>Fo,registerVersion:()=>fs,setLogLevel:()=>fc});var I=Be(861),Me=Be(537),B=Be(879),Ne=Be(58);const lt=(x,b)=>b.some(X=>x instanceof X);let zt,Xt;const K=new WeakMap,re=new WeakMap,Ie=new WeakMap,Qe=new WeakMap,dt=new WeakMap;let ke={get(x,b,X){if(x instanceof IDBTransaction){if("done"===b)return re.get(x);if("objectStoreNames"===b)return x.objectStoreNames||Ie.get(x);if("store"===b)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return kt(x[b])},set:(x,b,X)=>(x[b]=X,!0),has:(x,b)=>x instanceof IDBTransaction&&("done"===b||"store"===b)||b in x};function On(x){return"function"==typeof x?function xn(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Je(){return Xt||(Xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...b){return x.apply(pt(this),b),kt(K.get(this))}:function(...b){return kt(x.apply(pt(this),b))}:function(b,...X){const _e=x.call(pt(this),b,...X);return Ie.set(_e,b.sort?b.sort():[b]),kt(_e)}}(x):(x instanceof IDBTransaction&&function ft(x){if(re.has(x))return;const b=new Promise((X,_e)=>{const Fe=()=>{x.removeEventListener("complete",Xe),x.removeEventListener("error",j),x.removeEventListener("abort",j)},Xe=()=>{X(),Fe()},j=()=>{_e(x.error||new DOMException("AbortError","AbortError")),Fe()};x.addEventListener("complete",Xe),x.addEventListener("error",j),x.addEventListener("abort",j)});re.set(x,b)}(x),lt(x,function Mn(){return zt||(zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,ke):x)}function kt(x){if(x instanceof IDBRequest)return function Nn(x){const b=new Promise((X,_e)=>{const Fe=()=>{x.removeEventListener("success",Xe),x.removeEventListener("error",j)},Xe=()=>{X(kt(x.result)),Fe()},j=()=>{_e(x.error),Fe()};x.addEventListener("success",Xe),x.addEventListener("error",j)});return b.then(X=>{X instanceof IDBCursor&&K.set(X,x)}).catch(()=>{}),dt.set(b,x),b}(x);if(Qe.has(x))return Qe.get(x);const b=On(x);return b!==x&&(Qe.set(x,b),dt.set(b,x)),b}const pt=x=>dt.get(x),Ge=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],Z=new Map;function Gt(x,b){if(!(x instanceof IDBDatabase)||b in x||"string"!=typeof b)return;if(Z.get(b))return Z.get(b);const X=b.replace(/FromIndex$/,""),_e=b!==X,Fe=wn.includes(X);if(!(X in(_e?IDBIndex:IDBObjectStore).prototype)||!Fe&&!Ge.includes(X))return;const Xe=function(){var j=(0,I.Z)(function*(en,...ye){const Ye=this.transaction(en,Fe?"readwrite":"readonly");let Uo=Ye.store;return _e&&(Uo=Uo.index(ye.shift())),(yield Promise.all([Uo[X](...ye),Fe&&Ye.done]))[0]});return function(ye){return j.apply(this,arguments)}}();return Z.set(b,Xe),Xe}!function ze(x){ke=x(ke)}(x=>({...x,get:(b,X,_e)=>Gt(b,X)||x.get(b,X,_e),has:(b,X)=>!!Gt(b,X)||x.has(b,X)}));class Vt{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function gn(x){const b=x.getComponent();return"VERSION"===b?.type}(X)){const _e=X.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(X=>X).join(" ")}}const vi="@firebase/app",st=new B.Yd("@firebase/app"),ai="[DEFAULT]",$a={[vi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gr=new Map,Wi=new Map;function ls(x,b){try{x.container.addComponent(b)}catch(X){st.debug(`Component ${b.name} failed to register with FirebaseApp ${x.name}`,X)}}function Zn(x,b){x.container.addOrOverwriteComponent(b)}function Ys(x){const b=x.name;if(Wi.has(b))return st.debug(`There were multiple attempts to register component ${b}.`),!1;Wi.set(b,x);for(const X of gr.values())ls(X,x);return!0}function Ft(x,b){const X=x.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),x.container.getProvider(b)}function ui(x,b,X=ai){Ft(x,b).clearInstance(X)}function Tn(){Wi.clear()}const Kr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qr{constructor(b,X,_e){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new Me.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const ds="10.7.2";function ko(x,b={}){let X=x;"object"!=typeof b&&(b={name:b});const _e=Object.assign({name:ai,automaticDataCollectionEnabled:!1},b),Fe=_e.name;if("string"!=typeof Fe||!Fe)throw Kr.create("bad-app-name",{appName:String(Fe)});if(X||(X=(0,Ne.aH)()),!X)throw Kr.create("no-options");const Xe=gr.get(Fe);if(Xe){if((0,Ne.vZ)(X,Xe.options)&&(0,Ne.vZ)(_e,Xe.config))return Xe;throw Kr.create("duplicate-app",{appName:Fe})}const j=new Me.H0(Fe);for(const ye of Wi.values())j.addComponent(ye);const en=new Qr(X,_e,j);return gr.set(Fe,en),en}function hs(x=ai){const b=gr.get(x);if(!b&&x===ai&&(0,Ne.aH)())return ko();if(!b)throw Kr.create("no-app",{appName:x});return b}function Vo(){return Array.from(gr.values())}function nr(x){return mr.apply(this,arguments)}function mr(){return(mr=(0,I.Z)(function*(x){const b=x.name;gr.has(b)&&(gr.delete(b),yield Promise.all(x.container.getProviders().map(X=>X.delete())),x.isDeleted=!0)})).apply(this,arguments)}function fs(x,b,X){var _e;let Fe=null!==(_e=$a[x])&&void 0!==_e?_e:x;X&&(Fe+=`-${X}`);const Xe=Fe.match(/\s|\//),j=b.match(/\s|\//);if(Xe||j){const en=[`Unable to register library "${Fe}" with version "${b}":`];return Xe&&en.push(`library name "${Fe}" contains illegal characters (whitespace or "/")`),Xe&&j&&en.push("and"),j&&en.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void st.warn(en.join(" "))}Ys(new Me.wA(`${Fe}-version`,()=>({library:Fe,version:b}),"VERSION"))}function Fo(x,b){if(null!==x&&"function"!=typeof x)throw Kr.create("invalid-log-argument");(0,B.Am)(x,b)}function fc(x){(0,B.Ub)(x)}const Ha="firebase-heartbeat-database",Lo=1,T="firebase-heartbeat-store";let D=null;function A(){return D||(D=function Rt(x,b,{blocked:X,upgrade:_e,blocking:Fe,terminated:Xe}={}){const j=indexedDB.open(x,b),en=kt(j);return _e&&j.addEventListener("upgradeneeded",ye=>{_e(kt(j.result),ye.oldVersion,ye.newVersion,kt(j.transaction),ye)}),X&&j.addEventListener("blocked",ye=>X(ye.oldVersion,ye.newVersion,ye)),en.then(ye=>{Xe&&ye.addEventListener("close",()=>Xe()),Fe&&ye.addEventListener("versionchange",Ye=>Fe(Ye.oldVersion,Ye.newVersion,Ye))}).catch(()=>{}),en}(Ha,Lo,{upgrade:(x,b)=>{if(0===b)try{x.createObjectStore(T)}catch(X){console.warn(X)}}}).catch(x=>{throw Kr.create("idb-open",{originalErrorMessage:x.message})})),D}function M(){return(M=(0,I.Z)(function*(x){try{return yield(yield A()).transaction(T).objectStore(T).get(qe(x))}catch(b){if(b instanceof Ne.ZR)st.warn(b.message);else{const X=Kr.create("idb-get",{originalErrorMessage:b?.message});st.warn(X.message)}}})).apply(this,arguments)}function q(x,b){return xe.apply(this,arguments)}function xe(){return(xe=(0,I.Z)(function*(x,b){try{const _e=(yield A()).transaction(T,"readwrite");yield _e.objectStore(T).put(b,qe(x)),yield _e.done}catch(X){if(X instanceof Ne.ZR)st.warn(X.message);else{const _e=Kr.create("idb-set",{originalErrorMessage:X?.message});st.warn(_e.message)}}})).apply(this,arguments)}function qe(x){return`${x.name}!${x.options.appId}`}class Cn{constructor(b){this.container=b,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new Dt(X),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var b=this;return(0,I.Z)(function*(){var X,_e;const Xe=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=me();if((null!=(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(_e=b._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==j&&!b._heartbeatsCache.heartbeats.some(en=>en.date===j))return b._heartbeatsCache.heartbeats.push({date:j,agent:Xe}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(en=>{const ye=new Date(en.date).valueOf();return Date.now()-ye<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,I.Z)(function*(){var X;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const _e=me(),{heartbeatsToSend:Fe,unsentEntries:Xe}=function kn(x,b=1024){const X=[];let _e=x.slice();for(const Fe of x){const Xe=X.find(j=>j.agent===Fe.agent);if(Xe){if(Xe.dates.push(Fe.date),wi(X)>b){Xe.dates.pop();break}}else if(X.push({agent:Fe.agent,dates:[Fe.date]}),wi(X)>b){X.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:X,unsentEntries:_e}}(b._heartbeatsCache.heartbeats),j=(0,Ne.L)(JSON.stringify({version:2,heartbeats:Fe}));return b._heartbeatsCache.lastSentHeartbeatDate=_e,Xe.length>0?(b._heartbeatsCache.heartbeats=Xe,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),j})()}}function me(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,I.Z)(function*(){if(yield b._canUseIndexedDBPromise){const _e=yield function G(x){return M.apply(this,arguments)}(b.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var X=this;return(0,I.Z)(function*(){var _e;if(yield X._canUseIndexedDBPromise){const Xe=yield X.read();return q(X.app,{lastSentHeartbeatDate:null!==(_e=b.lastSentHeartbeatDate)&&void 0!==_e?_e:Xe.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var X=this;return(0,I.Z)(function*(){var _e;if(yield X._canUseIndexedDBPromise){const Xe=yield X.read();return q(X.app,{lastSentHeartbeatDate:null!==(_e=b.lastSentHeartbeatDate)&&void 0!==_e?_e:Xe.lastSentHeartbeatDate,heartbeats:[...Xe.heartbeats,...b.heartbeats]})}})()}}function wi(x){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:x})).length}!function pc(x){Ys(new Me.wA("platform-logger",b=>new Vt(b),"PRIVATE")),Ys(new Me.wA("heartbeat",b=>new Cn(b),"PRIVATE")),fs(vi,"0.9.26",x),fs(vi,"0.9.26","esm2017"),fs("fire-js","")}("")},537:(Gi,Pn,Be)=>{Be.d(Pn,{H0:()=>Mn,wA:()=>B});var I=Be(861),Me=Be(58);class B{constructor(K,re,Ie){this.name=K,this.instanceFactory=re,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const Ne="[DEFAULT]";class lt{constructor(K,re){this.name=K,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const re=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(re)){const Ie=new Me.BH;if(this.instancesDeferred.set(re,Ie),this.isInitialized(re)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:re});Qe&&Ie.resolve(Qe)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(K){var re;const Ie=this.normalizeInstanceIdentifier(K?.identifier),Qe=null!==(re=K?.optional)&&void 0!==re&&re;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(dt){if(Qe)return null;throw dt}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Xt(Je){return"EAGER"===Je.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[re,Ie]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(re);try{const dt=this.getOrInitializeService({instanceIdentifier:Qe});Ie.resolve(dt)}catch{}}}}clearInstance(K=Ne){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,I.Z)(function*(){const re=Array.from(K.instances.values());yield Promise.all([...re.filter(Ie=>"INTERNAL"in Ie).map(Ie=>Ie.INTERNAL.delete()),...re.filter(Ie=>"_delete"in Ie).map(Ie=>Ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=Ne){return this.instances.has(K)}getOptions(K=Ne){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:re={}}=K,Ie=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(Ie))throw Error(`${this.name}(${Ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:Ie,options:re});for(const[dt,Nn]of this.instancesDeferred.entries())Ie===this.normalizeInstanceIdentifier(dt)&&Nn.resolve(Qe);return Qe}onInit(K,re){var Ie;const Qe=this.normalizeInstanceIdentifier(re),dt=null!==(Ie=this.onInitCallbacks.get(Qe))&&void 0!==Ie?Ie:new Set;dt.add(K),this.onInitCallbacks.set(Qe,dt);const Nn=this.instances.get(Qe);return Nn&&K(Nn,Qe),()=>{dt.delete(K)}}invokeOnInitCallbacks(K,re){const Ie=this.onInitCallbacks.get(re);if(Ie)for(const Qe of Ie)try{Qe(K,re)}catch{}}getOrInitializeService({instanceIdentifier:K,options:re={}}){let Ie=this.instances.get(K);if(!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=K,Je===Ne?void 0:Je),options:re}),this.instances.set(K,Ie),this.instancesOptions.set(K,re),this.invokeOnInitCallbacks(Ie,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,Ie)}catch{}var Je;return Ie||null}normalizeInstanceIdentifier(K=Ne){return this.component?this.component.multipleInstances?K:Ne:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Mn{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const re=this.getProvider(K.name);if(re.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);re.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const re=new lt(K,this);return this.providers.set(K,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(Gi,Pn,Be)=>{Be.d(Pn,{Am:()=>Je,Ub:()=>Mn,Yd:()=>Xt,in:()=>Me});const I=[];var Me=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}(Me||{});const B={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Ne=Me.INFO,lt={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},zt=(K,re,...Ie)=>{if(re<K.logLevel)return;const Qe=(new Date).toISOString(),dt=lt[re];if(!dt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[dt](`[${Qe}]  ${K.name}:`,...Ie)};class Xt{constructor(re){this.name=re,this._logLevel=Ne,this._logHandler=zt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Me))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?B[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...re),this._logHandler(this,Me.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...re),this._logHandler(this,Me.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...re),this._logHandler(this,Me.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...re),this._logHandler(this,Me.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...re),this._logHandler(this,Me.ERROR,...re)}}function Mn(K){I.forEach(re=>{re.setLogLevel(K)})}function Je(K,re){for(const Ie of I){let Qe=null;re&&re.level&&(Qe=B[re.level]),Ie.userLogHandler=null===K?null:(dt,Nn,...ft)=>{const ke=ft.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");Nn>=(Qe??dt.logLevel)&&K({level:Me[Nn].toLowerCase(),message:ke,args:ft,type:dt.name})}}}},230:(Gi,Pn,Be)=>{Be.r(Pn);var I=Be(861),Me=Be(106),B=Be(58),Ne=Be(534),lt=Be(879),zt=Be(582),Xt=Be(537);const Je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Nn=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ft=function dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xn=new lt.Yd("@firebase/auth");function kt(h,...c){xn.logLevel<=lt.in.ERROR&&xn.error(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}function pt(h,...c){throw wn(h,...c)}function Rt(h,...c){return wn(h,...c)}function fr(h,c,l){const f=Object.assign(Object.assign({},ft()),{[c]:l});return new B.LL("auth","Firebase",f).create(c,{appName:h.name})}function Ge(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&pt(h,"argument-error"),fr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wn(h,...c){if("string"!=typeof h){const l=c[0],f=[...c.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(l,...f)}return ke.create(h,...c)}function Z(h,c,...l){if(!h)throw wn(c,...l)}function Gt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw kt(c),new Error(c)}function Vt(h,c){h||Gt(c)}function gn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function vi(){return"http:"===Ii()||"https:"===Ii()}function Ii(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Ei{constructor(c,l){this.shortDelay=c,this.longDelay=l,Vt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function st(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vi()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function k(h,c){Vt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,f){this.fetchImpl=c,l&&(this.headersImpl=l),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Ei(3e4,6e4);function Q(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function L(h,c,l,f){return he.apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(h,c,l,f,m={}){return rt(h,m,(0,I.Z)(function*(){let v={},w={};f&&("GET"===c?w=f:v={body:JSON.stringify(f)});const P=(0,B.xO)(Object.assign({key:h.config.apiKey},w)).slice(1),z=yield h._getAdditionalHeaders();return z["Content-Type"]="application/json",h.languageCode&&(z["X-Firebase-Locale"]=h.languageCode),F.fetch()(qt(h,h.config.apiHost,l,P),Object.assign({method:c,headers:z,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function rt(h,c,l){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},$),c);try{const m=new Wn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const w=yield v.json();if("needConfirmation"in w)throw Dn(h,"account-exists-with-different-credential",w);if(v.ok&&!("errorMessage"in w))return w;{const P=v.ok?w.errorMessage:w.error.message,[z,oe]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===z)throw Dn(h,"credential-already-in-use",w);if("EMAIL_EXISTS"===z)throw Dn(h,"email-already-in-use",w);if("USER_DISABLED"===z)throw Dn(h,"user-disabled",w);const pe=f[z]||z.toLowerCase().replace(/[_\s]+/g,"-");if(oe)throw fr(h,pe,oe);pt(h,pe)}}catch(m){if(m instanceof B.ZR)throw m;pt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function we(h,c,l,f){return ut.apply(this,arguments)}function ut(){return(ut=(0,I.Z)(function*(h,c,l,f,m={}){const v=yield L(h,c,l,f,m);return"mfaPendingCredential"in v&&pt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function qt(h,c,l,f){const m=`${c}${l}?${f}`;return h.config.emulator?k(h.config,m):`${h.config.apiScheme}://${m}`}function Nt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,f)=>{this.timer=setTimeout(()=>f(Rt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dn(h,c,l){const f={appName:h.name};l.email&&(f.email=l.email),l.phoneNumber&&(f.phoneNumber=l.phoneNumber);const m=Rt(h,c,f);return m.customData._tokenResponse=l,m}function tr(h){return void 0!==h&&void 0!==h.getResponse}function pr(h){return void 0!==h&&void 0!==h.enterprise}class Rr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Nt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function qi(){return(qi=(0,I.Z)(function*(h){return(yield L(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mn(h,c){return xo.apply(this,arguments)}function xo(){return(xo=(0,I.Z)(function*(h,c){return L(h,"GET","/v2/recaptchaConfig",Q(h,c))})).apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function gr(){return(gr=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ls(){return(ls=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Zn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ui(){return(ui=(0,I.Z)(function*(h,c=!1){const l=(0,B.m9)(h),f=yield l.getIdToken(c),m=Oo(f);Z(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,w=v?.sign_in_provider;return{claims:m,token:f,authTime:Zn(Tn(m.auth_time)),issuedAtTime:Zn(Tn(m.iat)),expirationTime:Zn(Tn(m.exp)),signInProvider:w||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Tn(h){return 1e3*Number(h)}function Oo(h){const[c,l,f]=h.split(".");if(void 0===c||void 0===l||void 0===f)return kt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,B.tV)(l);return m?JSON.parse(m):(kt("Failed to decode base64 JWT payload"),null)}catch(m){return kt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Qr(h,c){return ds.apply(this,arguments)}function ds(){return(ds=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(f){throw f instanceof B.ZR&&function ko({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class hs{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const f=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),f)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Vo{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zn(this.lastLoginAt),this.creationTime=Zn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(h){return mr.apply(this,arguments)}function mr(){return mr=(0,I.Z)(function*(h){var c;const l=h.auth,f=yield h.getIdToken(),m=yield Qr(h,function Wi(h,c){return ls.apply(this,arguments)}(l,{idToken:f}));Z(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const w=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function Ha(h){return h.map(c=>{var{providerId:l}=c,f=(0,zt._T)(c,["providerId"]);return{providerId:l,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(v.providerUserInfo):[],P=function fc(h,c){return[...h.filter(f=>!c.some(m=>m.providerId===f.providerId)),...c]}(h.providerData,w),pe=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),ve={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new Vo(v.createdAt,v.lastLoginAt),isAnonymous:pe};Object.assign(h,ve)}),mr.apply(this,arguments)}function Fo(){return(Fo=(0,I.Z)(function*(h){const c=(0,B.m9)(h);yield nr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function T(){return(T=(0,I.Z)(function*(h,c){const l=yield rt(h,{},(0,I.Z)(function*(){const f=(0,B.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,w=qt(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(w,{method:"POST",headers:P,body:f})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return L(h,"POST","/v2/accounts:revokeToken",Q(h,c))})).apply(this,arguments)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Z(c.idToken,"internal-error"),Z(typeof c.idToken<"u","internal-error"),Z(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Kr(h){const c=Oo(h);return Z(c,"internal-error"),Z(typeof c.exp<"u","internal-error"),Z(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var f=this;return(0,I.Z)(function*(){return Z(!f.accessToken||f.refreshToken,c,"user-token-expired"),l||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(c,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var f=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:w}=yield function Lo(h,c){return T.apply(this,arguments)}(c,l);f.updateTokensAndExpiration(m,v,Number(w))})()}updateTokensAndExpiration(c,l,f){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(c,l){const{refreshToken:f,accessToken:m,expirationTime:v}=l,w=new G;return f&&(Z("string"==typeof f,"internal-error",{appName:c}),w.refreshToken=f),m&&(Z("string"==typeof m,"internal-error",{appName:c}),w.accessToken=m),v&&(Z("number"==typeof v,"internal-error",{appName:c}),w.expirationTime=v),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return Gt("not implemented")}}function M(h,c){Z("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class q{constructor(c){var{uid:l,auth:f,stsTokenManager:m}=c,v=(0,zt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Vo(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const f=yield Qr(l,l.stsTokenManager.getToken(l.auth,c));return Z(f,l.auth,"internal-error"),l.accessToken!==f&&(l.accessToken=f,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),f})()}getIdTokenResult(c){return function Ft(h){return ui.apply(this,arguments)}(this,c)}reload(){return function fs(h){return Fo.apply(this,arguments)}(this)}_assign(c){this!==c&&(Z(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var f=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield nr(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield Qr(c,function ja(h,c){return ai.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var f,m,v,w,P,z,oe,pe;const ve=null!==(f=l.displayName)&&void 0!==f?f:void 0,nn=null!==(m=l.email)&&void 0!==m?m:void 0,di=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,il=null!==(w=l.photoURL)&&void 0!==w?w:void 0,Pm=null!==(P=l.tenantId)&&void 0!==P?P:void 0,sa=null!==(z=l._redirectEventId)&&void 0!==z?z:void 0,Wh=null!==(oe=l.createdAt)&&void 0!==oe?oe:void 0,Mm=null!==(pe=l.lastLoginAt)&&void 0!==pe?pe:void 0,{uid:sl,emailVerified:sE,isAnonymous:Zh,providerData:Nm,stsTokenManager:xm}=l;Z(sl&&xm,c,"internal-error");const oE=G.fromJSON(this.name,xm);Z("string"==typeof sl,c,"internal-error"),M(ve,c.name),M(nn,c.name),Z("boolean"==typeof sE,c,"internal-error"),Z("boolean"==typeof Zh,c,"internal-error"),M(di,c.name),M(il,c.name),M(Pm,c.name),M(sa,c.name),M(Wh,c.name),M(Mm,c.name);const Au=new q({uid:sl,auth:c,email:nn,emailVerified:sE,displayName:ve,isAnonymous:Zh,photoURL:il,phoneNumber:di,tenantId:Pm,stsTokenManager:oE,createdAt:Wh,lastLoginAt:Mm});return Nm&&Array.isArray(Nm)&&(Au.providerData=Nm.map(Ab=>Object.assign({},Ab))),sa&&(Au._redirectEventId=sa),Au}static _fromIdTokenResponse(c,l,f=!1){return(0,I.Z)(function*(){const m=new G;m.updateFromServerResponse(l);const v=new q({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:f});return yield nr(v),v})()}}const xe=new Map;function qe(h){Vt(h instanceof Function,"Expected a class definition");let c=xe.get(h);return c?(Vt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,xe.set(h,c),c)}const Wt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,f){var m=this;return(0,I.Z)(function*(){m.storage[l]=f})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=f.storage[l];return void 0===m?null:m})()}_remove(l){var f=this;return(0,I.Z)(function*(){delete f.storage[l]})()}_addListener(l,f){}_removeListener(l,f){}}return h.type="NONE",h})();function Cn(h,c,l){return`firebase:${h}:${c}:${l}`}class me{constructor(c,l,f){this.persistence=c,this.auth=l,this.userKey=f;const{config:m,name:v}=this.auth;this.fullUserKey=Cn(this.userKey,m.apiKey,v),this.fullPersistenceKey=Cn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?q._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const f=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,f?l.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,f="authUser"){return(0,I.Z)(function*(){if(!l.length)return new me(qe(Wt),c,f);const m=(yield Promise.all(l.map(function(){var oe=(0,I.Z)(function*(pe){if(yield pe._isAvailable())return pe});return function(pe){return oe.apply(this,arguments)}}()))).filter(oe=>oe);let v=m[0]||qe(Wt);const w=Cn(f,c.config.apiKey,c.name);let P=null;for(const oe of l)try{const pe=yield oe._get(w);if(pe){const ve=q._fromJSON(c,pe);oe!==v&&(P=ve),v=oe;break}}catch{}const z=m.filter(oe=>oe._shouldAllowMigration);return v._shouldAllowMigration&&z.length?(v=z[0],P&&(yield v._set(w,P.toJSON())),yield Promise.all(l.map(function(){var oe=(0,I.Z)(function*(pe){if(pe!==v)try{yield pe._remove(w)}catch{}});return function(pe){return oe.apply(this,arguments)}}())),new me(v,c,f)):new me(v,c,f)})()}}function kn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(x(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(X(c))return"Blackberry";if(_e(c))return"Webos";if(wi(c))return"Safari";if((c.includes("chrome/")||pc(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function Dt(h=(0,B.z$)()){return/firefox\//i.test(h)}function wi(h=(0,B.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function pc(h=(0,B.z$)()){return/crios\//i.test(h)}function x(h=(0,B.z$)()){return/iemobile/i.test(h)}function b(h=(0,B.z$)()){return/android/i.test(h)}function X(h=(0,B.z$)()){return/blackberry/i.test(h)}function _e(h=(0,B.z$)()){return/webos/i.test(h)}function Fe(h=(0,B.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function ye(h=(0,B.z$)()){return Fe(h)||b(h)||_e(h)||X(h)||/windows phone/i.test(h)||x(h)}function Uo(h,c=[]){let l;switch(h){case"Browser":l=kn((0,B.z$)());break;case"Worker":l=`${kn((0,B.z$)())}-${h}`;break;default:l=h}const f=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ne.SDK_VERSION}/${f}`}class H0{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const f=v=>new Promise((w,P)=>{try{w(c(v))}catch(z){P(z)}});f.onAbort=l,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const f=[];try{for(const m of l.queue)yield m(c),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const v of f)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function za(){return(za=(0,I.Z)(function*(h,c={}){return L(h,"GET","/v2/passwordPolicy",Q(h,c))})).apply(this,arguments)}class z0{constructor(c){var l,f,m,v;const w=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=w.minPasswordLength)&&void 0!==l?l:6,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),void 0!==w.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),void 0!==w.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),void 0!==w.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),void 0!==w.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=c.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,f,m,v,w,P;const z={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,z),this.validatePasswordCharacterOptions(c,z),z.isValid&&(z.isValid=null===(l=z.meetsMinPasswordLength)||void 0===l||l),z.isValid&&(z.isValid=null===(f=z.meetsMaxPasswordLength)||void 0===f||f),z.isValid&&(z.isValid=null===(m=z.containsLowercaseLetter)||void 0===m||m),z.isValid&&(z.isValid=null===(v=z.containsUppercaseLetter)||void 0===v||v),z.isValid&&(z.isValid=null===(w=z.containsNumericCharacter)||void 0===w||w),z.isValid&&(z.isValid=null===(P=z.containsNonAlphanumericCharacter)||void 0===P||P),z}validatePasswordLengthOptions(c,l){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(l.meetsMinPasswordLength=c.length>=f),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let f;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)f=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(c,l,f,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class rI{constructor(c,l,f,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ps(this),this.idTokenSubscription=new ps(this),this.beforeStateQueue=new H0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var f=this;return l&&(this._popupRedirectResolver=qe(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!f._deleted&&(f.persistenceManager=yield me.create(f,c),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(l),f.lastNotifiedUid=(null===(v=f.currentUser)||void 0===v?void 0:v.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var f;const m=yield l.assertedPersistence.getCurrentUser();let v=m,w=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(f=l.redirectUser)||void 0===f?void 0:f._redirectEventId,z=v?._redirectEventId,oe=yield l.tryRedirectSignIn(c);(!P||P===z)&&oe?.user&&(v=oe.user,w=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(w)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return Z(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let f=null;try{f=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield nr(c)}catch(f){if("auth/network-request-failed"!==f?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Qs(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const f=c?(0,B.m9)(c):null;return f&&Z(f.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(f&&f._clone(l))})()}_updateCurrentUser(c,l=!1){var f=this;return(0,I.Z)(function*(){if(!f._deleted)return c&&Z(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),l||(yield f.beforeStateQueue.runMiddleware(c)),f.queue((0,I.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(qe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const f=l._getPasswordPolicyInternal();return f.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function nI(h){return za.apply(this,arguments)}(c),f=new z0(l);null===c.tenantId?c._projectPasswordPolicy=f:c._tenantPasswordPolicies[c.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new B.LL("auth","Firebase",c())}onAuthStateChanged(c,l,f){return this.registerStateListener(this.authStateSubscription,c,l,f)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,f){return this.registerStateListener(this.idTokenSubscription,c,l,f)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const f=this.onAuthStateChanged(()=>{f(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const f=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:f};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function D(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var f=this;return(0,I.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const f=c&&qe(c)||l._popupRedirectResolver;Z(f,l,"argument-error"),l.redirectPersistenceManager=yield me.create(l,[qe(f._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var f,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(f=l._currentUser)||void 0===f?void 0:f._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,f,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let w=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(P,this,"internal-error"),P.then(()=>{w||v(this.currentUser)}),"function"==typeof l){const z=c.addObserver(l,f,m);return()=>{w=!0,z()}}{const z=c.addObserver(l);return()=>{w=!0,z()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Uo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const f={"X-Client-Version":c.clientVersion};c.app.options.appId&&(f["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(f["X-Firebase-AppCheck"]=v),f})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const f=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return f?.error&&function On(h,...c){xn.logLevel<=lt.in.WARN&&xn.warn(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function Lt(h){return(0,B.m9)(h)}class ps{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,B.ne)(l=>this.observer=l)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _g(h){return new Promise((c,l)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=c,f.onerror=m=>{const v=Rt("internal-error");v.customData=m,l(v)},f.type="text/javascript",f.charset="UTF-8",function G0(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(f)})}function iI(h){return`__${h}${Math.floor(1e6*Math.random())}`}class yg{constructor(c){this.type="recaptcha-enterprise",this.auth=Lt(c)}verify(c="verify",l=!1){var f=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var z=(0,I.Z)(function*(oe,pe){mn(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ve=>{if(void 0!==ve.recaptchaKey){const nn=new Rr(ve);return null==P.tenantId?P._agentRecaptchaConfig=nn:P._tenantRecaptchaConfigs[P.tenantId]=nn,oe(nn.siteKey)}pe(new Error("recaptcha Enterprise site key undefined"))}).catch(ve=>{pe(ve)})});return function(oe,pe){return z.apply(this,arguments)}}())}),v.apply(this,arguments)}function w(P,z,oe){const pe=window.grecaptcha;pr(pe)?pe.enterprise.ready(()=>{pe.enterprise.execute(P,{action:c}).then(ve=>{z(ve)}).catch(()=>{z("NO_RECAPTCHA")})}):oe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,z)=>{(function m(P){return v.apply(this,arguments)})(f.auth).then(oe=>{if(!l&&pr(window.grecaptcha))w(oe,P,z);else{if(typeof window>"u")return void z(new Error("RecaptchaVerifier is only supported in browser"));_g("https://www.google.com/recaptcha/enterprise.js?render="+oe).then(()=>{w(oe,P,z)}).catch(pe=>{z(pe)})}}).catch(oe=>{z(oe)})})})()}}function oI(h,c,l){return _r.apply(this,arguments)}function _r(){return(_r=(0,I.Z)(function*(h,c,l,f=!1){const m=new yg(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const w=Object.assign({},c);return Object.assign(w,f?{captchaResp:v}:{captchaResponse:v}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w})).apply(this,arguments)}function Se(h,c,l,f){return vg.apply(this,arguments)}function vg(){return vg=(0,I.Z)(function*(h,c,l,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield oI(h,c,l,"getOobCode"===l);return f(h,v)}return f(h,c).catch(function(){var v=(0,I.Z)(function*(w){if("auth/missing-recaptcha-token"===w.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield oI(h,c,l,"getOobCode"===l);return f(h,P)}return Promise.reject(w)});return function(w){return v.apply(this,arguments)}}())}),vg.apply(this,arguments)}function Ga(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function $d(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class Zi{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Gt("not implemented")}_getIdTokenResponse(c){return Gt("not implemented")}_linkToIdToken(c,l){return Gt("not implemented")}_getReauthenticationResolver(c){return Gt("not implemented")}}function qa(h,c){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:resetPassword",Q(h,c))})).apply(this,arguments)}function Hd(){return(Hd=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function et(h,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Kn(){return(Kn=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",Q(h,c))})).apply(this,arguments)}function Dg(h,c){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPassword",Q(h,c))})).apply(this,arguments)}function mt(h,c){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:sendOobCode",Q(h,c))})).apply(this,arguments)}function ue(){return(ue=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function zd(h,c){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function Ag(h,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function Ya(){return(Ya=(0,I.Z)(function*(h,c){return mt(h,c)})).apply(this,arguments)}function bg(){return(bg=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}function Sg(){return(Sg=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}class gc extends Zi{constructor(c,l,f,m=null){super("password",f),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new gc(c,l,"password")}static _fromEmailAndCode(c,l,f=null){return new gc(c,l,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Se(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Dg);case"emailLink":return function Y0(h,c){return bg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:pt(c,"internal-error")}})()}_linkToIdToken(c,l){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return Se(c,{idToken:l,returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et);case"emailLink":return function J0(h,c){return Sg.apply(this,arguments)}(c,{idToken:l,email:f._email,oobCode:f._password});default:pt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Nr(h,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithIdp",Q(h,c))})).apply(this,arguments)}class Di extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Di(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):pt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m}=l,v=(0,zt._T)(l,["providerId","signInMethod"]);if(!f||!m)return null;const w=new Di(f,m);return w.idToken=v.idToken||void 0,w.accessToken=v.accessToken||void 0,w.secret=v.secret,w.nonce=v.nonce,w.pendingToken=v.pendingToken||null,w}_getIdTokenResponse(c){return Nr(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Nr(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Nr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,B.xO)(l)}return c}}function Gd(){return(Gd=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:sendVerificationCode",Q(h,c))})).apply(this,arguments)}function gs(){return(gs=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c))})).apply(this,arguments)}function Ti(){return(Ti=(0,I.Z)(function*(h,c){const l=yield we(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c));if(l.temporaryProof)throw Dn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const hI={USER_NOT_FOUND:"user-not-found"};function _c(){return(_c=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),hI)})).apply(this,arguments)}class fe extends Zi{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new fe({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new fe({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Rg(h,c){return gs.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function dI(h,c){return Ti.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function ie(h,c){return _c.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:f,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:f,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:v}=c;return f||l||m||v?new fe({verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:v}):null}}class Ki{constructor(c){var l,f,m,v,w,P;const z=(0,B.zd)((0,B.pd)(c)),oe=null!==(l=z.apiKey)&&void 0!==l?l:null,pe=null!==(f=z.oobCode)&&void 0!==f?f:null,ve=function yc(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=z.mode)&&void 0!==m?m:null);Z(oe&&pe&&ve,"argument-error"),this.apiKey=oe,this.operation=ve,this.code=pe,this.continueUrl=null!==(v=z.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(w=z.languageCode)&&void 0!==w?w:null,this.tenantId=null!==(P=z.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function qd(h){const c=(0,B.zd)((0,B.pd)(h)).link,l=c?(0,B.zd)((0,B.pd)(c)).deep_link_id:null,f=(0,B.zd)((0,B.pd)(h)).deep_link_id;return(f?(0,B.zd)((0,B.pd)(f)).link:null)||f||l||c||h}(c);try{return new Ki(l)}catch{return null}}}let Wd=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,f){return gc._fromEmailAndPassword(l,f)}static credentialWithLink(l,f){const m=Ki.parseLink(f);return Z(m,"argument-error"),gc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Qi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class yr extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Yi extends yr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return Z("providerId"in l&&"signInMethod"in l,"argument-error"),Di._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Z(c.idToken||c.accessToken,"argument-error"),Di._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Yi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Yi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:v,nonce:w,providerId:P}=c;if(!f&&!m&&!l&&!v||!P)return null;try{return new Yi(P)._credential({idToken:l,accessToken:f,nonce:w,pendingToken:v})}catch{return null}}}let Yr=(()=>{class h extends yr{constructor(){super("facebook.com")}static credential(l){return Di._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ci=(()=>{class h extends yr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,f){return Di._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:f,oauthAccessToken:m}=l;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ct=(()=>{class h extends yr{constructor(){super("github.com")}static credential(l){return Di._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class ms extends Zi{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Nr(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Nr(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Nr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m,pendingToken:v}=l;return f&&m&&v&&f===m?new ms(f,v):null}static _create(c,l){return new ms(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xa extends Qi{constructor(c){Z(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Xa.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Xa.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=ms.fromJSON(c);return Z(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:f}=c;if(!l||!f)return null;try{return ms._create(f,l)}catch{return null}}}let Ci=(()=>{class h extends yr{constructor(){super("twitter.com")}static credential(l,f){return Di._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=l;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Bo(h,c){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signUp",Q(h,c))})).apply(this,arguments)}class xr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,f,m=!1){return(0,I.Z)(function*(){const v=yield q._fromIdTokenResponse(c,f,m),w=Ec(f);return new xr({user:v,providerId:w,_tokenResponse:f,operationType:l})})()}static _forOperation(c,l,f){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(f,!0);const m=Ec(f);return new xr({user:c,providerId:m,_tokenResponse:f,operationType:l})})()}}function Ec(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function wc(){return(wc=(0,I.Z)(function*(h){var c;const l=Lt(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new xr({user:l.currentUser,providerId:null,operationType:"signIn"});const f=yield Bo(l,{returnSecureToken:!0}),m=yield xr._fromIdTokenResponse(l,"signIn",f,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class _s extends B.ZR{constructor(c,l,f,m){var v;super(l.code,l.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,_s.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(c,l,f,m){return new _s(c,l,f,m)}}function Kd(h,c,l,f){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?_s._fromErrorAndOperation(h,v,c,f):v})}function Qd(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Dc(){return Dc=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h);yield vr(!0,l,c);const{providerUserInfo:f}=yield function $a(h,c){return gr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Qd(f||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Dc.apply(this,arguments)}function Yd(h,c){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,I.Z)(function*(h,c,l=!1){const f=yield Qr(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return xr._forOperation(h,"link",f)})).apply(this,arguments)}function vr(h,c,l){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,I.Z)(function*(h,c,l){yield nr(c);const m=!1===h?"provider-already-linked":"no-such-provider";Z(Qd(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function eh(h,c){return th.apply(this,arguments)}function th(){return(th=(0,I.Z)(function*(h,c,l=!1){const{auth:f}=h,m="reauthenticate";try{const v=yield Qr(h,Kd(f,m,c,h),l);Z(v.idToken,f,"internal-error");const w=Oo(v.idToken);Z(w,f,"internal-error");const{sub:P}=w;return Z(h.uid===P,f,"user-mismatch"),xr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&pt(f,"user-mismatch"),v}})).apply(this,arguments)}function Mg(h,c){return nh.apply(this,arguments)}function nh(){return(nh=(0,I.Z)(function*(h,c,l=!1){const f="signIn",m=yield Kd(h,f,c),v=yield xr._fromIdTokenResponse(h,f,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function Tc(h,c){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,I.Z)(function*(h,c){return Mg(Lt(h),c)})).apply(this,arguments)}function Ng(h,c){return rh.apply(this,arguments)}function rh(){return(rh=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h);return yield vr(!1,l,c.providerId),Yd(l,c)})).apply(this,arguments)}function xg(h,c){return ys.apply(this,arguments)}function ys(){return(ys=(0,I.Z)(function*(h,c){return eh((0,B.m9)(h),c)})).apply(this,arguments)}function ih(){return(ih=(0,I.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithCustomToken",Q(h,c))})).apply(this,arguments)}function Or(){return Or=(0,I.Z)(function*(h,c){const l=Lt(h),f=yield function pI(h,c){return ih.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield xr._fromIdTokenResponse(l,"signIn",f);return yield l._updateCurrentUser(m.user),m}),Or.apply(this,arguments)}class eu{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Ac._fromServerResponse(c,l):"totpInfo"in l?Re._fromServerResponse(c,l):pt(c,"internal-error")}}class Ac extends eu{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Ac(l)}}class Re extends eu{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Re(l)}}function Vn(h,c,l){var f;Z((null===(f=l.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),Z(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(Z(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(Z(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function tt(h){return _n.apply(this,arguments)}function _n(){return(_n=(0,I.Z)(function*(h){const c=Lt(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function vs(){return(vs=(0,I.Z)(function*(h,c,l){const f=Lt(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Vn(f,m,l),yield Se(f,m,"getOobCode",zd)})).apply(this,arguments)}function bc(){return bc=(0,I.Z)(function*(h,c,l){yield qa((0,B.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}),bc.apply(this,arguments)}function jo(){return jo=(0,I.Z)(function*(h,c){yield function wg(h,c){return Kn.apply(this,arguments)}((0,B.m9)(h),{oobCode:c})}),jo.apply(this,arguments)}function kg(h,c){return sh.apply(this,arguments)}function sh(){return(sh=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h),f=yield qa(l,{oobCode:c}),m=f.requestType;switch(Z(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(f.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(f.mfaInfo,l,"internal-error");default:Z(f.email,l,"internal-error")}let v=null;return f.mfaInfo&&(v=eu._fromServerResponse(Lt(l),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c){const{data:l}=yield kg((0,B.m9)(h),c);return l.email})).apply(this,arguments)}function Pt(){return(Pt=(0,I.Z)(function*(h,c,l){const f=Lt(h),w=yield Se(f,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bo).catch(z=>{throw"auth/password-does-not-meet-requirements"===z.code&&tt(h),z}),P=yield xr._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}function An(){return(An=(0,I.Z)(function*(h,c,l){const f=Lt(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(w,P){Z(P.handleCodeInApp,f,"argument-error"),P&&Vn(f,w,P)})(m,l),yield Se(f,m,"getOobCode",Ag)})).apply(this,arguments)}function Ai(){return(Ai=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h),m=Wd.credentialWithLink(c,l||gn());return Z(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),Tc(f,m)})).apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:createAuthUri",Q(h,c))})).apply(this,arguments)}function Sc(){return Sc=(0,I.Z)(function*(h,c){const f={identifier:c,continueUri:vi()?gn():"http://localhost"},{signinMethods:m}=yield function Ho(h,c){return Oe.apply(this,arguments)}((0,B.m9)(h),f);return m||[]}),Sc.apply(this,arguments)}function Zt(){return Zt=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Vn(l.auth,m,c);const{email:v}=yield function Q0(h,c){return ue.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Zt.apply(this,arguments)}function Is(){return Is=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Vn(f.auth,v,l);const{email:w}=yield function cI(h,c){return Ya.apply(this,arguments)}(f.auth,v);w!==h.email&&(yield h.reload())}),Is.apply(this,arguments)}function Js(){return(Js=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Si(){return Si=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const f=(0,B.m9)(h),v={idToken:yield f.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},w=yield Qr(f,function bi(h,c){return Js.apply(this,arguments)}(f.auth,v));f.displayName=w.displayName||null,f.photoURL=w.photoUrl||null;const P=f.providerData.find(({providerId:z})=>"password"===z);P&&(P.displayName=f.displayName,P.photoURL=f.photoURL),yield f._updateTokensIfNecessary(w)}),Si.apply(this,arguments)}function Go(h,c,l){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,I.Z)(function*(h,c,l){const{auth:f}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const w=yield Qr(h,function Eg(h,c){return Hd.apply(this,arguments)}(f,v));yield h._updateTokensIfNecessary(w,!0)}),Ke.apply(this,arguments)}class Es{constructor(c,l,f={}){this.isNewUser=c,this.providerId=l,this.profile=f}}class oh extends Es{constructor(c,l,f,m){super(c,l,f),this.username=m}}class Ri extends Es{constructor(c,l){super(c,"facebook.com",l)}}class Rc extends oh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class qo extends Es{constructor(c,l){super(c,"google.com",l)}}class su extends oh{constructor(c,l,f){super(c,"twitter.com",l,f)}}function Fn(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function eb(h){var c,l;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const w=null===(l=null===(c=Oo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(w)return new Es(v,"anonymous"!==w&&"custom"!==w?w:null)}if(!f)return null;switch(f){case"facebook.com":return new Ri(v,m);case"github.com":return new Rc(v,m);case"google.com":return new qo(v,m);case"twitter.com":return new su(v,m,h.screenName||null);case"custom":case"anonymous":return new Es(v,null);default:return new Es(v,f,m)}}(l)}class Wo{constructor(c,l,f){this.type=c,this.credential=l,this.user=f}static _fromIdtoken(c,l){return new Wo("enroll",c,l)}static _fromMfaPendingCredential(c){return new Wo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,f;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Wo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.idToken)return Wo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Lg{constructor(c,l,f){this.session=c,this.hints=l,this.signInResolver=f}static _fromError(c,l){const f=Lt(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>eu._fromServerResponse(f,P));Z(m.mfaPendingCredential,f,"internal-error");const w=Wo._fromMfaPendingCredential(m.mfaPendingCredential);return new Lg(w,v,function(){var P=(0,I.Z)(function*(z){const oe=yield z._process(f,w);delete m.mfaInfo,delete m.mfaPendingCredential;const pe=Object.assign(Object.assign({},m),{idToken:oe.idToken,refreshToken:oe.refreshToken});switch(l.operationType){case"signIn":const ve=yield xr._fromIdTokenResponse(f,l.operationType,pe);return yield f._updateCurrentUser(ve.user),ve;case"reauthenticate":return Z(l.user,f,"internal-error"),xr._forOperation(l.user,l.operationType,pe);default:pt(f,"internal-error")}});return function(z){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Ug{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(f=>eu._fromServerResponse(c.auth,f)))})}static _fromUser(c){return new Ug(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Wo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var f=this;return(0,I.Z)(function*(){const m=c,v=yield f.getSession(),w=yield Qr(f.user,m._process(f.user.auth,v,l));return yield f.user._updateTokensIfNecessary(w),f.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const f="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield Qr(l.user,function ub(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:f}));l.enrolledFactors=l.enrolledFactors.filter(({uid:w})=>w!==f),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Bg=new WeakMap,uh="__sak";class ch{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mi=(()=>{class h extends ch{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,f)=>this.onStorageEvent(l,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jg(){const h=(0,B.z$)();return wi(h)||Fe(h)}()&&function Ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ye(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),v=this.localCache[f];m!==v&&l(f,v,m)}}onStorageEvent(l,f=!1){if(!l.key)return void this.forAllChangedKeys((P,z,oe)=>{this.notifyListeners(P,oe)});const m=l.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!f)return}const v=()=>{const P=this.storage.getItem(m);!f&&this.localCache[m]===P||this.notifyListeners(m,P)},w=this.storage.getItem(m);!function en(){return(0,B.w1)()&&10===document.documentMode}()||w===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,f){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,f),v.localCache[l]=JSON.stringify(f)})()}_get(l){var f=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield f().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var f=()=>super._remove,m=this;return(0,I.Z)(function*(){yield f().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),to=(()=>{class h extends ch{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,f){}_removeListener(l,f){}}return h.type="SESSION",h})();let Ln=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const f=this.receivers.find(v=>v.isListeningto(l));if(f)return f;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var f=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:w,data:P}=m.data,z=f.handlersMap[w];if(!z?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:w});const oe=Array.from(z).map(function(){var ve=(0,I.Z)(function*(nn){return nn(m.origin,P)});return function(nn){return ve.apply(this,arguments)}}()),pe=yield function hb(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(f){return{fulfilled:!1,reason:f}}});return function(l){return c.apply(this,arguments)}}()))}(oe);m.ports[0].postMessage({status:"done",eventId:v,eventType:w,response:pe})})()}_subscribe(l,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(f)}_unsubscribe(l,f){this.handlersMap[l]&&f&&this.handlersMap[l].delete(f),(!f||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function ws(h="",c=10){let l="";for(let f=0;f<c;f++)l+=Math.floor(10*Math.random());return h+l}class Jr{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,f=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let w,P;return new Promise((z,oe)=>{const pe=ws("",20);v.port1.start();const ve=setTimeout(()=>{oe(new Error("unsupported_event"))},f);P={messageChannel:v,onMessage(nn){const di=nn;if(di.data.eventId===pe)switch(di.data.status){case"ack":clearTimeout(ve),w=setTimeout(()=>{oe(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),z(di.data.response);break;default:clearTimeout(ve),clearTimeout(w),oe(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:pe,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function un(){return window}function Mc(){return typeof un().WorkerGlobalScope<"u"&&"function"==typeof un().importScripts}function au(){return(au=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Nc="firebaseLocalStorageDb",uu="firebaseLocalStorage",dh="fbase_key";class Ds{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Ts(h,c){return h.transaction([uu],c?"readwrite":"readonly").objectStore(uu)}function xc(){const h=indexedDB.open(Nc,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(uu,{keyPath:dh})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const f=h.result;f.objectStoreNames.contains(uu)?c(f):(f.close(),yield function Zo(){const h=indexedDB.deleteDatabase(Nc);return new Ds(h).toPromise()}(),c(yield xc()))}))})}function mI(h,c,l){return qg.apply(this,arguments)}function qg(){return(qg=(0,I.Z)(function*(h,c,l){const f=Ts(h,!0).put({[dh]:c,value:l});return new Ds(f).toPromise()})).apply(this,arguments)}function hh(){return(hh=(0,I.Z)(function*(h,c){const l=Ts(h,!1).get(c),f=yield new Ds(l).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function Wg(h,c){const l=Ts(h,!0).delete(c);return new Ds(l).toPromise()}const Ko=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield xc()),l.db})()}_withRetries(l){var f=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield f._openDb();return yield l(v)}catch(v){if(m++>3)throw v;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Mc()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Ln._getInstance(function lh(){return Mc()?self:null}()),l.receiver._subscribe("keyChanged",function(){var f=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return f.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var f=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return f.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var f,m;if(l.activeServiceWorker=yield function Hg(){return au.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Jr(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(f=v[0])&&void 0!==f&&f.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var f=this;return(0,I.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function zg(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:l},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield xc();return yield mI(l,uh,"1"),yield Wg(l,uh),!0}catch{}return!1})()}_withPendingWrite(l){var f=this;return(0,I.Z)(function*(){f.pendingWrites++;try{yield l()}finally{f.pendingWrites--}})()}_set(l,f){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>mI(v,l,f)),m.localCache[l]=f,m.notifyServiceWorker(l)}))})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=yield f._withRetries(v=>function fb(h,c){return hh.apply(this,arguments)}(v,l));return f.localCache[l]=m,m})()}_remove(l){var f=this;return(0,I.Z)(function*(){return f._withPendingWrite((0,I.Z)(function*(){return yield f._withRetries(m=>Wg(m,l)),delete f.localCache[l],f.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const f=yield l._withRetries(w=>{const P=Ts(w,!1).getAll();return new Ds(P).toPromise()});if(!f)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;if(0!==f.length)for(const{fbase_key:w,value:P}of f)v.add(w),JSON.stringify(l.localCache[w])!==JSON.stringify(P)&&(l.notifyListeners(w,P),m.push(w));for(const w of Object.keys(l.localCache))l.localCache[w]&&!v.has(w)&&(l.notifyListeners(w,null),m.push(w));return m})()}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(f)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),cu=1e12;class yI{constructor(c){this.auth=c,this.counter=cu,this._widgets=new Map}render(c,l){const f=this.counter;return this._widgets.set(f,new vI(c,this.auth.name,l||{})),this.counter++,f}reset(c){var l;const f=c||cu;null===(l=this._widgets.get(f))||void 0===l||l.delete(),this._widgets.delete(f)}getResponse(c){var l;return(null===(l=this._widgets.get(c||cu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var f;return null===(f=l._widgets.get(c||cu))||void 0===f||f.execute(),""})()}}class vI{constructor(c,l,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;Z(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function II(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oc=iI("rcb"),EI=new Ei(3e4,6e4);class wI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=un().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return Z(function _b(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&tr(un().grecaptcha)?Promise.resolve(un().grecaptcha):new Promise((f,m)=>{const v=un().setTimeout(()=>{m(Rt(c,"network-request-failed"))},EI.get());un()[Oc]=()=>{un().clearTimeout(v),delete un()[Oc];const P=un().grecaptcha;if(!P||!tr(P))return void m(Rt(c,"internal-error"));const z=P.render;P.render=(oe,pe)=>{const ve=z(oe,pe);return this.counter++,ve},this.hostLanguage=l,f(P)},_g(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Oc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(Rt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=un().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class DI{load(c){return(0,I.Z)(function*(){return new yI(c)})()}clearedOneInstance(){}}const Fr="recaptcha",Jg={theme:"light",type:"image"};class TI{constructor(c,l,f=Object.assign({},Jg)){this.parameters=f,this.type=Fr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lt(c),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;Z(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new DI:new wI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),f=c.getAssertedRecaptcha();return f.getResponse(l)||new Promise(v=>{const w=P=>{P&&(c.tokenChangeListeners.delete(w),v(P))};c.tokenChangeListeners.add(w),c.isInvisible&&f.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(f=>f(l)),"function"==typeof c)c(l);else if("string"==typeof c){const f=un()[c];"function"==typeof f&&f(l)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const f=document.createElement("div");l.appendChild(f),l=f}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){Z(vi()&&!Mc(),c.auth,"internal-error"),yield function CI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Ba(h){return qi.apply(this,arguments)}(c.auth);Z(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=fe._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function ph(){return(ph=(0,I.Z)(function*(h,c,l){const f=Lt(h),m=yield lu(f,c,(0,B.m9)(l));return new kc(m,v=>Tc(f,v))})).apply(this,arguments)}function mh(){return(mh=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h);yield vr(!1,f,"phone");const m=yield lu(f.auth,c,(0,B.m9)(l));return new kc(m,v=>Ng(f,v))})).apply(this,arguments)}function Vc(){return(Vc=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h),m=yield lu(f.auth,c,(0,B.m9)(l));return new kc(m,v=>xg(f,v))})).apply(this,arguments)}function lu(h,c,l){return Et.apply(this,arguments)}function Et(){return Et=(0,I.Z)(function*(h,c,l){var f;const m=yield l.verify();try{let v;if(Z("string"==typeof m,h,"argument-error"),Z(l.type===Fr,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const w=v.session;if("phoneNumber"in v)return Z("enroll"===w.type,h,"internal-error"),(yield function sb(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:start",Q(h,c))}(h,{idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{Z("signin"===w.type,h,"internal-error");const P=(null===(f=v.multiFactorHint)||void 0===f?void 0:f.uid)||v.multiFactorUid;return Z(P,h,"missing-multi-factor-info"),(yield function fh(h,c){return L(h,"POST","/v2/accounts/mfaSignIn:start",Q(h,c))}(h,{mfaPendingCredential:w.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:w}=yield function lI(h,c){return Gd.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return w}}finally{l._reset()}}),Et.apply(this,arguments)}function Qo(){return(Qo=(0,I.Z)(function*(h,c){yield Yd((0,B.m9)(h),c)})).apply(this,arguments)}let bn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Lt(l)}verifyPhoneNumber(l,f){return lu(this.auth,l,(0,B.m9)(f))}static credential(l,f){return fe._fromVerification(l,f)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:f,temporaryProof:m}=l;return f&&m?fe._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function no(h,c){return c?qe(c):(Z(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Fc extends Zi{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Nr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Nr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Nr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function Yo(h){return Mg(h.auth,new Fc(h),h.bypassAuthState)}function Lr(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),eh(l,new Fc(h),h.bypassAuthState)}function AI(h){return yh.apply(this,arguments)}function yh(){return(yh=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),Yd(l,new Fc(h),h.bypassAuthState)})).apply(this,arguments)}class em{constructor(c,l,f,m,v=!1){this.auth=c,this.resolver=f,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(f,m){c.pendingPromise={resolve:f,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(f,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:v,tenantId:w,error:P,type:z}=c;if(P)return void l.reject(P);const oe={auth:l.auth,requestUri:f,sessionId:m,tenantId:w||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(z)(oe))}catch(pe){l.reject(pe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Yo;case"linkViaPopup":case"linkViaRedirect":return AI;case"reauthViaPopup":case"reauthViaRedirect":return Lr;default:pt(this.auth,"internal-error")}}resolve(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cs=new Ei(2e3,1e4);function vh(){return(vh=(0,I.Z)(function*(h,c,l){const f=Lt(h);Ge(h,c,Qi);const m=no(f,l);return new Pe(f,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Lc(){return(Lc=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h);Ge(f.auth,c,Qi);const m=no(f.auth,l);return new Pe(f.auth,"reauthViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}function Ih(){return(Ih=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h);Ge(f.auth,c,Qi);const m=no(f.auth,l);return new Pe(f.auth,"linkViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}let Pe=(()=>{class h extends em{constructor(l,f,m,v,w){super(l,f,v,w),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const f=yield l.execute();return Z(f,l.auth,"internal-error"),f})()}onExecution(){var l=this;return(0,I.Z)(function*(){Vt(1===l.filter.length,"Popup operations only handle one event");const f=ws();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],f),l.authWindow.associatedEvent=f,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(Rt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Cs.get())};l()}}return h.currentPopupAction=null,h})();const im="pendingRedirect",Uc=new Map;class bI extends em{constructor(c,l,f=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,f),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let f=Uc.get(l.auth._key());if(!f){try{const v=(yield function SI(h,c){return Eh.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;f=()=>Promise.resolve(v)}catch(m){f=()=>Promise.reject(m)}Uc.set(l.auth._key(),f)}return l.bypassAuthState||Uc.set(l.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,f=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(f,c);if("unknown"!==c.type){if(c.eventId){const m=yield f.auth._redirectUserForId(c.eventId);if(m)return f.user=m,l().call(f,c);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Eh(){return(Eh=(0,I.Z)(function*(h,c){const l=om(c),f=sm(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(l));return yield f._remove(l),m})).apply(this,arguments)}function Bc(h,c){return As.apply(this,arguments)}function As(){return(As=(0,I.Z)(function*(h,c){return sm(h)._set(om(c),"true")})).apply(this,arguments)}function wh(h,c){Uc.set(h._key(),c)}function sm(h){return qe(h._redirectPersistence)}function om(h){return Cn(im,h.config.apiKey,h.name)}function PI(h,c,l){return function Y(h,c,l){return nt.apply(this,arguments)}(h,c,l)}function nt(){return(nt=(0,I.Z)(function*(h,c,l){const f=Lt(h);Ge(h,c,Qi),yield f._initializationPromise;const m=no(f,l);return yield Bc(m,f),m._openRedirect(f,c,"signInViaRedirect")})).apply(this,arguments)}function Dh(h,c,l){return function Th(h,c,l){return yn.apply(this,arguments)}(h,c,l)}function yn(){return(yn=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h);Ge(f.auth,c,Qi),yield f.auth._initializationPromise;const m=no(f.auth,l);yield Bc(m,f.auth);const v=yield Ah(f);return m._openRedirect(f.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function am(h,c,l){return function du(h,c,l){return Xr.apply(this,arguments)}(h,c,l)}function Xr(){return(Xr=(0,I.Z)(function*(h,c,l){const f=(0,B.m9)(h);Ge(f.auth,c,Qi),yield f.auth._initializationPromise;const m=no(f.auth,l);yield vr(!1,f,c.providerId),yield Bc(m,f.auth);const v=yield Ah(f);return m._openRedirect(f.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function hu(){return(hu=(0,I.Z)(function*(h,c){return yield Lt(h)._initializationPromise,jc(h,c,!1)})).apply(this,arguments)}function jc(h,c){return um.apply(this,arguments)}function um(){return(um=(0,I.Z)(function*(h,c,l=!1){const f=Lt(h),m=no(f,c),w=yield new bI(f,m,l).execute();return w&&!l&&(delete w.user._redirectEventId,yield f._persistUserIfCurrent(w.user),yield f._setRedirectUser(null,c)),w})).apply(this,arguments)}function Ah(h){return Un.apply(this,arguments)}function Un(){return(Un=(0,I.Z)(function*(h){const c=ws(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class bh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(c,f)&&(l=!0,this.sendToConsumer(c,f),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function MI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var f;if(c.error&&!xi(c)){const m=(null===(f=c.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";l.onError(Rt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const f=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&f}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ro(c))}saveEventToCache(c){this.cachedEventUids.add(ro(c)),this.lastProcessedEventTime=Date.now()}}function ro(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function xi({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function Sh(h){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,I.Z)(function*(h,c={}){return L(h,"GET","/v1/projects",c)})).apply(this,arguments)}const NI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ph=/^https?/;function $c(){return($c=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield Sh(h);for(const l of c)try{if(Nh(l))return}catch{}pt(h,"unauthorized-domain")})).apply(this,arguments)}function Nh(h){const c=gn(),{protocol:l,hostname:f}=new URL(c);if(h.startsWith("chrome-extension://")){const w=new URL(h);return""===w.hostname&&""===f?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&w.hostname===f}if(!Ph.test(l))return!1;if(NI.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const xI=new Ei(3e4,6e4);function xh(){const h=un().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let fu=null;const lm=new Ei(5e3,15e3),dm="__/auth/iframe",kh="emulator/auth/iframe",OI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ir(h){const c=h.config;Z(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?k(c,kh):`https://${h.config.authDomain}/${dm}`,f={apiKey:c.apiKey,appName:h.name,v:Ne.SDK_VERSION},m=kI.get(h.config.apiHost);m&&(f.eid=m);const v=h._getFrameworks();return v.length&&(f.fw=v.join(",")),`${l}?${(0,B.xO)(f).slice(1)}`}function xt(){return xt=(0,I.Z)(function*(h){const c=yield function cm(h){return fu=fu||function Oh(h){return new Promise((c,l)=>{var f,m,v;function w(){xh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{xh(),l(Rt(h,"network-request-failed"))},timeout:xI.get()})}if(null!==(m=null===(f=un().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=un().gapi)||void 0===v||!v.load){const P=iI("iframefcb");return un()[P]=()=>{gapi.load?w():l(Rt(h,"network-request-failed"))},_g(`https://apis.google.com/js/api.js?onload=${P}`).catch(z=>l(z))}w()}}).catch(c=>{throw fu=null,c})}(h),fu}(h),l=un().gapi;return Z(l,h,"internal-error"),c.open({where:document.body,url:ir(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OI,dontclear:!0},f=>new Promise(function(){var m=(0,I.Z)(function*(v,w){yield f.restyle({setHideOnLeave:!1});const P=Rt(h,"network-request-failed"),z=un().setTimeout(()=>{w(P)},lm.get());function oe(){un().clearTimeout(z),v(f)}f.ping(oe).then(oe,()=>{w(P)})});return function(v,w){return m.apply(this,arguments)}}()))}),xt.apply(this,arguments)}const VI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const BI="__/auth/handler",zc="emulator/auth/handler",Gc=encodeURIComponent("fac");function Jo(h,c,l,f,m,v){return pu.apply(this,arguments)}function pu(){return(pu=(0,I.Z)(function*(h,c,l,f,m,v){Z(h.config.authDomain,h,"auth-domain-config-required"),Z(h.config.apiKey,h,"invalid-api-key");const w={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:f,v:Ne.SDK_VERSION,eventId:m};if(c instanceof Qi){c.setDefaultLanguage(h.languageCode),w.providerId=c.providerId||"",(0,B.xb)(c.getCustomParameters())||(w.customParameters=JSON.stringify(c.getCustomParameters()));for(const[pe,ve]of Object.entries(v||{}))w[pe]=ve}if(c instanceof yr){const pe=c.getScopes().filter(ve=>""!==ve);pe.length>0&&(w.scopes=pe.join(","))}h.tenantId&&(w.tid=h.tenantId);const P=w;for(const pe of Object.keys(P))void 0===P[pe]&&delete P[pe];const z=yield h._getAppCheckToken(),oe=z?`#${Gc}=${encodeURIComponent(z)}`:"";return`${function fm({config:h}){return h.emulator?k(h,zc):`https://${h.authDomain}/${BI}`}(h)}?${(0,B.xO)(P).slice(1)}${oe}`})).apply(this,arguments)}const qc="webStorageSupport",so=class jI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=jc,this._overrideRedirectResult=wh}_openPopup(c,l,f,m){var v=this;return(0,I.Z)(function*(){var w;Vt(null===(w=v.eventManagers[c._key()])||void 0===w?void 0:w.manager,"_initialize() not called before _openPopup()");const P=yield Jo(c,l,f,gn(),m);return function Hc(h,c,l,f=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),w=Math.max((window.screen.availWidth-f)/2,0).toString();let P="";const z=Object.assign(Object.assign({},VI),{width:f.toString(),height:m.toString(),top:v,left:w}),oe=(0,B.z$)().toLowerCase();l&&(P=pc(oe)?"_blank":l),Dt(oe)&&(c=c||"http://localhost",z.scrollbars="yes");const pe=Object.entries(z).reduce((nn,[di,il])=>`${nn}${di}=${il},`,"");if(function j(h=(0,B.z$)()){var c;return Fe(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(oe)&&"_self"!==P)return function bs(h,c){const l=document.createElement("a");l.href=h,l.target=c;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(f)}(c||"",P),new Vh(null);const ve=window.open(c||"",P,pe);Z(ve,h,"popup-blocked");try{ve.focus()}catch{}return new Vh(ve)}(c,P,ws())})()}_openRedirect(c,l,f,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function $g(h){un().location.href=h}(yield Jo(c,l,f,gn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Vt(v,"If manager is not set, promise should be"),v)}const f=this.initAndGetManager(c);return this.eventManagers[l]={promise:f},f.catch(()=>{delete this.eventManagers[l]}),f}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const f=yield function io(h){return xt.apply(this,arguments)}(c),m=new bh(c);return f.register("authEvent",v=>(Z(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=f,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(qc,{type:qc},m=>{var v;const w=null===(v=m?.[0])||void 0===v?void 0:v[qc];void 0!==w&&l(!!w),pt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Mh(h){return $c.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return ye()||wi()||Fe()}};class gu{constructor(c){this.factorId=c}_process(c,l,f){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,f);case"signin":return this._finalizeSignIn(c,l.credential);default:return Gt("unexpected MultiFactorSessionType")}}}class Fh extends gu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Fh(c)}_finalizeEnroll(c,l,f){return function ob(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:finalize",Q(h,c))}(c,{idToken:l,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function gb(h,c){return L(h,"POST","/v2/accounts/mfaSignIn:finalize",Q(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yb=(()=>{class h{constructor(){}static assertion(l){return Fh._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var $I="@firebase/auth";class Lh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(f=>{c(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ss(){return window}(0,B.Pz)("authIdTokenMaxAge"),function zI(h){(0,Ne._registerComponent)(new Xt.wA("auth",(c,{options:l})=>{const f=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:w,authDomain:P}=f.options;Z(w&&!w.includes(":"),"invalid-api-key",{appName:f.name});const z={apiKey:w,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uo(h)},oe=new rI(f,m,v,z);return function K0(h,c){const l=c?.persistence||[],f=(Array.isArray(l)?l:[l]).map(qe);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(f,c?.popupRedirectResolver)}(oe,l),oe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,f)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Xt.wA("auth-internal",c=>{const l=Lt(c.getProvider("auth").getImmediate());return new Lh(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)($I,"1.5.1",function mu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ne.registerVersion)($I,"1.5.1","esm2017")}("Browser");function Bh(){return Bh=(0,I.Z)(function*(h,c,l){var f;const{BuildInfo:m}=Ss();Vt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function ym(h){return Qc.apply(this,arguments)}(c.sessionId),w={};return Fe()?w.ibi=m.packageName:b()?w.apn=m.packageName:pt(h,"operation-not-supported-in-this-environment"),m.displayName&&(w.appDisplayName=m.displayName),w.sessionId=v,Jo(h,l,c.type,void 0,null!==(f=c.eventId)&&void 0!==f?f:void 0,w)}),Bh.apply(this,arguments)}function vu(){return(vu=(0,I.Z)(function*(h){const{BuildInfo:c}=Ss(),l={};Fe()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:pt(h,"operation-not-supported-in-this-environment"),yield Sh(h,l)})).apply(this,arguments)}function Iu(){return(Iu=(0,I.Z)(function*(h,c,l){const{cordova:f}=Ss();let m=()=>{};try{yield new Promise((v,w)=>{let P=null;function z(){var ve;v();const nn=null===(ve=f.plugins.browsertab)||void 0===ve?void 0:ve.close;"function"==typeof nn&&nn(),"function"==typeof l?.close&&l.close()}function oe(){P||(P=window.setTimeout(()=>{w(Rt(h,"redirect-cancelled-by-user"))},2e3))}function pe(){"visible"===document?.visibilityState&&oe()}c.addPassiveListener(z),document.addEventListener("resume",oe,!1),b()&&document.addEventListener("visibilitychange",pe,!1),m=()=>{c.removePassiveListener(z),document.removeEventListener("resume",oe,!1),document.removeEventListener("visibilitychange",pe,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Qc(){return(Qc=(0,I.Z)(function*(h){const c=function vm(h){if(Vt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let f=0;f<h.length;f++)l[f]=h.charCodeAt(f);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ZI extends bh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function Em(h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,I.Z)(function*(h){const c=yield jh()._get(Bn(h));return c&&(yield jh()._remove(Bn(h))),c})).apply(this,arguments)}function Eu(){const h=[];for(let l=0;l<20;l++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function jh(){return qe(Mi)}function Bn(h){return Cn("authEvent",h.config.apiKey,h.name)}function Xo(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,B.zd)(l.join("?"))}const Xc=class Dm{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jc,this._overrideRedirectResult=wh}_initialize(c){var l=this;return(0,I.Z)(function*(){const f=c._key();let m=l.eventManagers.get(f);return m||(m=new ZI(c),l.eventManagers.set(f,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){pt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,f,m){var v=this;return(0,I.Z)(function*(){!function WI(h){var c,l,f,m,v,w,P,z,oe,pe;const ve=Ss();Z("function"==typeof(null===(c=ve?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(l=ve?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(v=null===(m=null===(f=ve?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(z=null===(P=null===(w=ve?.cordova)||void 0===w?void 0:w.plugins)||void 0===P?void 0:P.browsertab)||void 0===z?void 0:z.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(pe=null===(oe=ve?.cordova)||void 0===oe?void 0:oe.InAppBrowser)||void 0===pe?void 0:pe.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const w=yield v._initialize(c);yield w.initialized(),w.resetRedirect(),function RI(){Uc.clear()}(),yield v._originValidation(c);const P=function Yc(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Eu(),postBody:null,tenantId:h.tenantId,error:Rt(h,"no-auth-event")}}(c,f,m);yield function oo(h,c){return jh()._set(Bn(h),c)}(c,P);const z=yield function Oi(h,c,l){return Bh.apply(this,arguments)}(c,P,l),oe=yield function _m(h){const{cordova:c}=Ss();return new Promise(l=>{c.plugins.browsertab.isAvailable(f=>{let m=null;f?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Xe(h=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(z);return function Kc(h,c,l){return Iu.apply(this,arguments)}(c,w,oe)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Zc(h){return vu.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:f,handleOpenURL:m,BuildInfo:v}=Ss(),w=setTimeout((0,I.Z)(function*(){yield Em(c),l.onEvent(ao())}),500),P=function(){var pe=(0,I.Z)(function*(ve){clearTimeout(w);const nn=yield Em(c);let di=null;nn&&ve?.url&&(di=function wm(h,c){var l,f;const m=function jn(h){const c=Xo(h),l=c.link?decodeURIComponent(c.link):void 0,f=Xo(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Xo(m).link||m||f||l||h}(c);if(m.includes("/__/auth/callback")){const v=Xo(m),w=v.firebaseError?function KI(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(f=null===(l=w?.code)||void 0===l?void 0:l.split("auth/"))||void 0===f?void 0:f[1],z=P?Rt(P):null;return z?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:z,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(nn,ve.url)),l.onEvent(di||ao())});return function(nn){return pe.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,P);const z=m,oe=`${v.packageName.toLowerCase()}://`;Ss().handleOpenURL=function(){var pe=(0,I.Z)(function*(ve){if(ve.toLowerCase().startsWith(oe)&&P({url:ve}),"function"==typeof z)try{z(ve)}catch(nn){console.error(nn)}});return function(ve){return pe.apply(this,arguments)}}()}};function ao(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}function ki(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Cm(h=(0,B.z$)()){return!("file:"!==ki()&&"ionic:"!==ki()&&"capacitor:"!==ki()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function YI(){try{const h=self.localStorage,c=ws();if(h)return h.setItem(c,"1"),h.removeItem(c),!function Tb(h=(0,B.z$)()){return function wb(){return(0,B.w1)()&&11===document?.documentMode}()||function Db(h=(0,B.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,B.hl)()}catch{return Am()&&(0,B.hl)()}return!1}function Am(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rs(){return(function Ib(){return"http:"===ki()||"https:"===ki()}()||(0,B.ru)()||Cm())&&!function Eb(){return(0,B.b$)()||(0,B.UG)()}()&&YI()&&!Am()}function bm(){return Cm()&&typeof document<"u"}function cn(){return(cn=(0,I.Z)(function*(){return!!bm()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const $n={LOCAL:"local",NONE:"none",SESSION:"session"},wu=Z,Ur="persistence";function el(h){return ra.apply(this,arguments)}function ra(){return(ra=(0,I.Z)(function*(h){yield h._initializationPromise;const c=Sm(),l=Cn(Ur,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function Sm(){var h;try{return(null===(h=function XI(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Cb=Z;class Ps{constructor(){this.browserResolver=qe(so),this.cordovaResolver=qe(Xc),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=jc,this._overrideRedirectResult=wh}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,f,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,f,m)})()}_openRedirect(c,l,f,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,f,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return bm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function JI(){return cn.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function eE(h){return h.unwrap()}function Hh(h){return tE(h)}function tE(h){const{_tokenResponse:c}=h instanceof B.ZR?h.customData:h;if(!c)return null;if(!(h instanceof B.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return bn.credentialFromResult(h);const l=c.providerId;if(!l||l===Je.PASSWORD)return null;let f;switch(l){case Je.GOOGLE:f=ci;break;case Je.FACEBOOK:f=Yr;break;case Je.GITHUB:f=ct;break;case Je.TWITTER:f=Ci;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:w,pendingToken:P,nonce:z}=c;return v||w||m||P?P?l.startsWith("saml.")?ms._create(l,P):Di._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new Yi(l).credential({idToken:m,accessToken:v,rawNonce:z}):null}return h instanceof B.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function sr(h,c){return c.catch(l=>{throw l instanceof B.ZR&&function ia(h,c){var l;const f=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new nE(h,function ib(h,c){var l;const f=(0,B.m9)(h),m=c;return Z(c.customData.operationType,f,"argument-error"),Z(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,f,"argument-error"),Lg._fromError(f,m)}(h,c));else if(f){const m=tE(c),v=c;m&&(v.credential=m,v.tenantId=f.tenantId||void 0,v.email=f.email||void 0,v.phoneNumber=f.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Hh(l),additionalUserInfo:Fn(l),user:es.getOrCreate(m)}})}function zh(h,c){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:f=>sr(h,l.confirm(f))}})).apply(this,arguments)}class nE{constructor(c,l){this.resolver=l,this.auth=function Br(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return sr(eE(this.auth),this.resolver.resolveSignIn(c))}}class es{constructor(c){this._delegate=c,this.multiFactor=function cb(h){const c=(0,B.m9)(h);return Bg.has(c)||Bg.set(c,Ug._fromUser(c)),Bg.get(c)}(c)}static getOrCreate(c){return es.USER_MAP.has(c)||es.USER_MAP.set(c,new es(c)),es.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return sr(l.auth,Ng(l._delegate,c))})()}linkWithPhoneNumber(c,l){var f=this;return(0,I.Z)(function*(){return zh(f.auth,function gh(h,c,l){return mh.apply(this,arguments)}(f._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return sr(l.auth,function rm(h,c,l){return Ih.apply(this,arguments)}(l._delegate,c,Ps))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield el(Lt(l.auth)),am(l._delegate,c,Ps)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return sr(l.auth,xg(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return zh(this.auth,function Ni(h,c,l){return Vc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return sr(this.auth,function nm(h,c,l){return Lc.apply(this,arguments)}(this._delegate,c,Ps))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield el(Lt(l.auth)),Dh(l._delegate,c,Ps)})()}sendEmailVerification(c){return function zo(h,c){return Zt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function fI(h,c){return Dc.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function Ji(h,c){return Go((0,B.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function iu(h,c){return Go((0,B.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function _h(h,c){return Qo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Vg(h,c){return Si.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function ru(h,c,l){return Is.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}es.USER_MAP=new WeakMap;const Tu=Z;let Rm=(()=>{class h{constructor(l,f){if(this.app=l,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Tu(m,"invalid-api-key",{appName:l.name}),Tu(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Ps:void 0;this._delegate=f.initialize({options:{persistence:nl(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Nn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,f){!function Mr(h,c,l){const f=Lt(h);Z(f._canInitEmulator,f,"emulator-config-failed"),Z(/^https?:\/\//.test(c),f,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=Ga(c),{host:w,port:P}=function aI(h){const c=Ga(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const f=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const v=m[1];return{host:v,port:$d(f.substr(v.length+1))}}{const[v,w]=f.split(":");return{host:v,port:$d(w)}}}(c);f.config.emulator={url:`${v}//${w}${null===P?"":`:${P}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:w,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function uI(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,f)}applyActionCode(l){return function Og(h,c){return jo.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return kg(this._delegate,l)}confirmPasswordReset(l,f){return function kr(h,c,l){return bc.apply(this,arguments)}(this._delegate,l,f)}createUserWithEmailAndPassword(l,f){var m=this;return(0,I.Z)(function*(){return sr(m._delegate,function je(h,c,l){return Pt.apply(this,arguments)}(m._delegate,l,f))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function nu(h,c){return Sc.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function $o(h,c){const l=Ki.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Tu(Rs(),l._delegate,"operation-not-supported-in-this-environment");const f=yield function Ch(h,c){return hu.apply(this,arguments)}(l._delegate,Ps);return f?sr(l._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function ea(h,c){Lt(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,f,m){const{next:v,error:w,complete:P}=tl(l,f,m);return this._delegate.onAuthStateChanged(v,w,P)}onIdTokenChanged(l,f,m){const{next:v,error:w,complete:P}=tl(l,f,m);return this._delegate.onIdTokenChanged(v,w,P)}sendSignInLinkToEmail(l,f){return function tu(h,c,l){return An.apply(this,arguments)}(this._delegate,l,f)}sendPasswordResetEmail(l,f){return function rr(h,c,l){return vs.apply(this,arguments)}(this._delegate,l,f||void 0)}setPersistence(l){var f=this;return(0,I.Z)(function*(){let m;switch(function na(h,c){wu(Object.values($n).includes(c),h,"invalid-persistence-type"),(0,B.b$)()?wu(c!==$n.SESSION,h,"unsupported-persistence-type"):(0,B.UG)()?wu(c===$n.NONE,h,"unsupported-persistence-type"):Am()?wu(c===$n.NONE||c===$n.LOCAL&&(0,B.hl)(),h,"unsupported-persistence-type"):wu(c===$n.NONE||YI(),h,"unsupported-persistence-type")}(f._delegate,l),l){case $n.SESSION:m=to;break;case $n.LOCAL:m=(yield qe(Ko)._isAvailable())?Ko:Mi;break;case $n.NONE:m=Wt;break;default:return pt("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return sr(this._delegate,function Pg(h){return wc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return sr(this._delegate,Tc(this._delegate,l))}signInWithCustomToken(l){return sr(this._delegate,function gI(h,c){return Or.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,f){return sr(this._delegate,function li(h,c,l){return Tc((0,B.m9)(h),Wd.credential(c,l)).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,l,f))}signInWithEmailLink(l,f){return sr(this._delegate,function an(h,c,l){return Ai.apply(this,arguments)}(this._delegate,l,f))}signInWithPhoneNumber(l,f){return zh(this._delegate,function Xg(h,c,l){return ph.apply(this,arguments)}(this._delegate,l,f))}signInWithPopup(l){var f=this;return(0,I.Z)(function*(){return Tu(Rs(),f._delegate,"operation-not-supported-in-this-environment"),sr(f._delegate,function tm(h,c,l){return vh.apply(this,arguments)}(f._delegate,l,Ps))})()}signInWithRedirect(l){var f=this;return(0,I.Z)(function*(){return Tu(Rs(),f._delegate,"operation-not-supported-in-this-environment"),yield el(f._delegate),PI(f._delegate,l,Ps)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function tn(h,c){return le.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=$n,h})();function tl(h,c,l){let f=h;"function"!=typeof h&&({next:f,error:c,complete:l}=h);const m=f;return{next:w=>m(w&&es.getOrCreate(w)),error:c,complete:l}}function nl(h,c){const l=function Du(h,c){const l=Sm();if(!l)return[];const f=Cn(Ur,h,c);switch(l.getItem(f)){case $n.NONE:return[Wt];case $n.LOCAL:return[Ko,to];case $n.SESSION:return[to];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(Ko)&&l.push(Ko),typeof window<"u")for(const f of[Mi,to])l.includes(f)||l.push(f);return l.includes(Wt)||l.push(Wt),l}class qh{constructor(){this.providerId="phone",this._delegate=new bn(eE(Me.Z.auth()))}static credential(c,l){return bn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}qh.PHONE_SIGN_IN_METHOD=bn.PHONE_SIGN_IN_METHOD,qh.PROVIDER_ID=bn.PROVIDER_ID;const Cu=Z;class rE{constructor(c,l,f=Me.Z.app()){var m;Cu(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new TI(f.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function iE(h){h.INTERNAL.registerComponent(new Xt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),f=c.getProvider("auth");return new Rm(l,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wd,FacebookAuthProvider:Yr,GithubAuthProvider:ct,GoogleAuthProvider:ci,OAuthProvider:Yi,SAMLAuthProvider:Xa,PhoneAuthProvider:qh,PhoneMultiFactorGenerator:yb,RecaptchaVerifier:rE,TwitterAuthProvider:Ci,Auth:Rm,AuthCredential:Zi,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.1")}(Me.Z)},861:(Gi,Pn,Be)=>{function I(B,Ne,lt,zt,Xt,Mn,Je){try{var K=B[Mn](Je),re=K.value}catch(Ie){return void lt(Ie)}K.done?Ne(re):Promise.resolve(re).then(zt,Xt)}function Me(B){return function(){var Ne=this,lt=arguments;return new Promise(function(zt,Xt){var Mn=B.apply(Ne,lt);function Je(re){I(Mn,zt,Xt,Je,K,"next",re)}function K(re){I(Mn,zt,Xt,Je,K,"throw",re)}Je(void 0)})}}Be.d(Pn,{Z:()=>Me})},582:(Gi,Pn,Be)=>{function Ne(k,F){var $={};for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&F.indexOf(H)<0&&($[H]=k[H]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(H=Object.getOwnPropertySymbols(k);Q<H.length;Q++)F.indexOf(H[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,H[Q])&&($[H[Q]]=k[H[Q]])}return $}function Ie(k,F,$,H){return new($||($=Promise))(function(L,he){function rt(ut){try{we(H.next(ut))}catch(qt){he(qt)}}function Ee(ut){try{we(H.throw(ut))}catch(qt){he(qt)}}function we(ut){ut.done?L(ut.value):function Q(L){return L instanceof $?L:new $(function(he){he(L)})}(ut.value).then(rt,Ee)}we((H=H.apply(k,F||[])).next())})}function kt(k){return this instanceof kt?(this.v=k,this):new kt(k)}function pt(k,F,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,H=$.apply(k,F||[]),L=[];return Q={},he("next"),he("throw"),he("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function he(Nt){H[Nt]&&(Q[Nt]=function(Wn){return new Promise(function(Dn,tr){L.push([Nt,Wn,Dn,tr])>1||rt(Nt,Wn)})})}function rt(Nt,Wn){try{!function Ee(Nt){Nt.value instanceof kt?Promise.resolve(Nt.value.v).then(we,ut):qt(L[0][2],Nt)}(H[Nt](Wn))}catch(Dn){qt(L[0][3],Dn)}}function we(Nt){rt("next",Nt)}function ut(Nt){rt("throw",Nt)}function qt(Nt,Wn){Nt(Wn),L.shift(),L.length&&rt(L[0][0],L[0][1])}}function fr(k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,F=k[Symbol.asyncIterator];return F?F.call(k):(k=function ft(k){var F="function"==typeof Symbol&&Symbol.iterator,$=F&&k[F],H=0;if($)return $.call(k);if(k&&"number"==typeof k.length)return{next:function(){return k&&H>=k.length&&(k=void 0),{value:k&&k[H++],done:!k}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(k),$={},H("next"),H("throw"),H("return"),$[Symbol.asyncIterator]=function(){return this},$);function H(L){$[L]=k[L]&&function(he){return new Promise(function(rt,Ee){!function Q(L,he,rt,Ee){Promise.resolve(Ee).then(function(we){L({value:we,done:rt})},he)}(rt,Ee,(he=k[L](he)).done,he.value)})}}}Be.d(Pn,{FC:()=>pt,KL:()=>fr,_T:()=>Ne,mG:()=>Ie,qq:()=>kt}),"function"==typeof SuppressedError&&SuppressedError}},Gi=>{Gi(Gi.s=120)}]);